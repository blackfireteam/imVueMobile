(function(t){function e(e){for(var r,o,a=e[0],u=e[1],l=e[2],c=0,g=[];c<a.length;c++)o=a[c],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&g.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);h&&h(e);while(g.length)g.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(s.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},o={app:0},i={app:0},s=[];function a(t){return u.p+"js/"+({chats:"chats",home:"home",login:"login",messages:"messages",my:"my",register:"register",search:"search"}[t]||t)+"."+{chats:"e570e596",home:"0985aab3",login:"0d5012e3",messages:"8865aac5",my:"d5d9ed83",register:"301da287",search:"cb0efec8"}[t]+".js"}function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={chats:1,home:1,login:1,messages:1,my:1,register:1};o[t]?e.push(o[t]):0!==o[t]&&n[t]&&e.push(o[t]=new Promise((function(e,n){for(var r="css/"+({chats:"chats",home:"home",login:"login",messages:"messages",my:"my",register:"register",search:"search"}[t]||t)+"."+{chats:"e5dfb01c",home:"be646f04",login:"0e9f0668",messages:"dc3dd5cb",my:"599e8cff",register:"d12bb5e0",search:"31d6cfe0"}[t]+".css",i=u.p+r,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var l=s[a],c=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(c===r||c===i))return e()}var g=document.getElementsByTagName("style");for(a=0;a<g.length;a++){l=g[a],c=l.getAttribute("data-href");if(c===r||c===i)return e()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=e,h.onerror=function(e){var r=e&&e.target&&e.target.src||i,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete o[t],h.parentNode.removeChild(h),n(s)},h.href=i;var d=document.getElementsByTagName("head")[0];d.appendChild(h)})).then((function(){o[t]=0})));var r=i[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=i[t]=[e,n]}));e.push(r[2]=s);var l,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=a(t);var g=new Error;l=function(e){c.onerror=c.onload=null,clearTimeout(h);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;g.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",g.name="ChunkLoadError",g.type=r,g.request=o,n[1](g)}i[t]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:c})}),12e4);c.onerror=c.onload=l,document.head.appendChild(c)}return Promise.all(e)},u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="",u.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var g=0;g<l.length;g++)e(l[g]);var h=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1f6d":function(t,e,n){},4345:function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_asyncToGenerator=__webpack_require__("c973").default,_objectSpread=__webpack_require__("ded3").default,_toConsumableArray=__webpack_require__("448a").default,_typeof=__webpack_require__("7037").default;__webpack_require__("96cf"),__webpack_require__("d3b7"),__webpack_require__("fb6a"),__webpack_require__("a15b"),__webpack_require__("a434"),__webpack_require__("cfc3"),__webpack_require__("9a8c"),__webpack_require__("a975"),__webpack_require__("735e"),__webpack_require__("c1ac"),__webpack_require__("d139"),__webpack_require__("3a7b"),__webpack_require__("d5d6"),__webpack_require__("82f8"),__webpack_require__("e91f"),__webpack_require__("60bd"),__webpack_require__("5f96"),__webpack_require__("3280"),__webpack_require__("3fcc"),__webpack_require__("ca91"),__webpack_require__("25a1"),__webpack_require__("cd26"),__webpack_require__("3c5d"),__webpack_require__("2954"),__webpack_require__("649e"),__webpack_require__("219c"),__webpack_require__("170b"),__webpack_require__("b39a"),__webpack_require__("72f7"),__webpack_require__("5cc6"),__webpack_require__("4a9b"),__webpack_require__("ac1f"),__webpack_require__("5319"),__webpack_require__("b64b"),__webpack_require__("25f0"),__webpack_require__("a9e3"),__webpack_require__("bf19"),__webpack_require__("b0c0"),__webpack_require__("dca8"),__webpack_require__("8ba4"),__webpack_require__("20bf"),__webpack_require__("6c57"),__webpack_require__("fb2c"),__webpack_require__("84c3"),__webpack_require__("5377"),__webpack_require__("143c"),__webpack_require__("99af"),__webpack_require__("caad"),__webpack_require__("2532"),__webpack_require__("4de4"),__webpack_require__("1276"),__webpack_require__("c740"),__webpack_require__("4e82"),__webpack_require__("159b"),__webpack_require__("3410"),__webpack_require__("e439"),__webpack_require__("130f"),__webpack_require__("e21d"),__webpack_require__("d81d"),__webpack_require__("c19f"),__webpack_require__("a4d3"),__webpack_require__("e01a"),__webpack_require__("d28b"),__webpack_require__("3ca3"),__webpack_require__("ddb0"),__webpack_require__("944a"),__webpack_require__("0c47"),__webpack_require__("23dc"),__webpack_require__("2ca0"),__webpack_require__("466d"),__webpack_require__("498a"),__webpack_require__("7db0"),__webpack_require__("6062"),function(t,e){"object"==_typeof(exports)&&"object"==_typeof(module)?module.exports=e():(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_FACTORY__=e,__WEBPACK_AMD_DEFINE_RESULT__="function"===typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(self,(function(){return function(){"use strict";var __webpack_modules__={537:function(t){t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(t){if(i)if(i=!1,t)s(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){i&&(i=!1,s(t))}}))}},419:function(t,e){e.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;1<--e%4&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var n=new Array(64),r=new Array(123),o=0;o<64;)r[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(t,e,r){for(var o,i=null,s=[],a=0,u=0;e<r;){var l=t[e++];switch(u){case 0:s[a++]=n[l>>2],o=(3&l)<<4,u=1;break;case 1:s[a++]=n[o|l>>4],o=(15&l)<<2,u=2;break;case 2:s[a++]=n[o|l>>6],s[a++]=n[63&l],u=0}8191<a&&((i=i||[]).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=n[o],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var i="invalid encoding";e.decode=function(t,e,n){for(var o,s=n,a=0,u=0;u<t.length;){var l=t.charCodeAt(u++);if(61===l&&1<a)break;if(void 0===(l=r[l]))throw Error(i);switch(a){case 0:o=l,a=1;break;case 1:e[n++]=o<<2|(48&l)>>4,o=l,a=2;break;case 2:e[n++]=(15&o)<<4|(60&l)>>2,o=l,a=3;break;case 3:e[n++]=(3&o)<<6|l,a=0}}if(1===a)throw Error(i);return n-s},e.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},211:function(t){function e(){this._listeners={}}(t.exports=e).prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:function(t){function e(t){function e(t,e,n,r){var o=e<0?1:0;0===(e=o?-e:e)?t(0<1/e?0:2147483648,n,r):isNaN(e)?t(2143289344,n,r):t(34028234663852886e22<e?(o<<31|2139095040)>>>0:e<11754943508222875e-54?(o<<31|Math.round(e/1401298464324817e-60))>>>0:(o<<31|(o=Math.floor(Math.log(e)/Math.LN2))+127<<23|8388607&Math.round(e*Math.pow(2,-o)*8388608))>>>0,n,r)}function s(t,e,n){return e=2*((t=t(e,n))>>31)+1,n=t>>>23&255,t&=8388607,255==n?t?NaN:1/0*e:0==n?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(8388608+t)}function a(t,e,n){g[0]=t,e[n]=h[0],e[n+1]=h[1],e[n+2]=h[2],e[n+3]=h[3]}function u(t,e,n){g[0]=t,e[n]=h[3],e[n+1]=h[2],e[n+2]=h[1],e[n+3]=h[0]}function l(t,e){return h[0]=t[e],h[1]=t[e+1],h[2]=t[e+2],h[3]=t[e+3],g[0]}function c(t,e){return h[3]=t[e],h[2]=t[e+1],h[1]=t[e+2],h[0]=t[e+3],g[0]}var g,h,d,f,p;function m(t,e,n,r,o,i){var s,a,u=r<0?1:0;0===(r=u?-r:r)?(t(0,o,i+e),t(0<1/r?0:2147483648,o,i+n)):isNaN(r)?(t(0,o,i+e),t(2146959360,o,i+n)):17976931348623157e292<r?(t(0,o,i+e),t((u<<31|2146435072)>>>0,o,i+n)):r<22250738585072014e-324?(t((s=r/5e-324)>>>0,o,i+e),t((u<<31|s/4294967296)>>>0,o,i+n)):(1024===(a=Math.floor(Math.log(r)/Math.LN2))&&(a=1023),t(4503599627370496*(s=r*Math.pow(2,-a))>>>0,o,i+e),t((u<<31|a+1023<<20|1048576*s&1048575)>>>0,o,i+n))}function b(t,e,n,r,o){return e=t(r,o+e),o=2*((r=t(r,o+n))>>31)+1,e=4294967296*(1048575&r)+e,2047==(n=r>>>20&2047)?e?NaN:1/0*o:0==n?5e-324*o*e:o*Math.pow(2,n-1075)*(e+4503599627370496)}function y(t,e,n){d[0]=t,e[n]=f[0],e[n+1]=f[1],e[n+2]=f[2],e[n+3]=f[3],e[n+4]=f[4],e[n+5]=f[5],e[n+6]=f[6],e[n+7]=f[7]}function w(t,e,n){d[0]=t,e[n]=f[7],e[n+1]=f[6],e[n+2]=f[5],e[n+3]=f[4],e[n+4]=f[3],e[n+5]=f[2],e[n+6]=f[1],e[n+7]=f[0]}function _(t,e){return f[0]=t[e],f[1]=t[e+1],f[2]=t[e+2],f[3]=t[e+3],f[4]=t[e+4],f[5]=t[e+5],f[6]=t[e+6],f[7]=t[e+7],d[0]}function v(t,e){return f[7]=t[e],f[6]=t[e+1],f[5]=t[e+2],f[4]=t[e+3],f[3]=t[e+4],f[2]=t[e+5],f[1]=t[e+6],f[0]=t[e+7],d[0]}return"undefined"!=typeof Float32Array?(g=new Float32Array([-0]),p=128===(h=new Uint8Array(g.buffer))[3],t.writeFloatLE=p?a:u,t.writeFloatBE=p?u:a,t.readFloatLE=p?l:c,t.readFloatBE=p?c:l):(t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=s.bind(null,o),t.readFloatBE=s.bind(null,i)),"undefined"!=typeof Float64Array?(d=new Float64Array([-0]),p=128===(f=new Uint8Array(d.buffer))[7],t.writeDoubleLE=p?y:w,t.writeDoubleBE=p?w:y,t.readDoubleLE=p?_:v,t.readDoubleBE=p?v:_):(t.writeDoubleLE=m.bind(null,n,0,4),t.writeDoubleBE=m.bind(null,r,4,0),t.readDoubleLE=b.bind(null,o,0,4),t.readDoubleBE=b.bind(null,i,4,0)),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},199:function _(module){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},662:function(t){t.exports=function(t,e,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){return n<1||o<n?t(n):(r<s+n&&(i=t(r),s=0),n=e.call(i,s,s+=n),7&s&&(s=1+(7|s)),n)}}},997:function(t,e){e.length=function(t){for(var e,n=0,r=0;r<t.length;++r)(e=t.charCodeAt(r))<128?n+=1:e<2048?n+=2:55296==(64512&e)&&56320==(64512&t.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},e.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,i=[],s=0;e<n;)(r=t[e++])<128?i[s++]=r:191<r&&r<224?i[s++]=(31&r)<<6|63&t[e++]:239<r&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},e.write=function(t,e,n){for(var r,o,i=n,s=0;s<t.length;++s)(r=t.charCodeAt(s))<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(s+1)))?(++s,e[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,e[n++]=r>>12&63|128):e[n++]=r>>12|224,e[n++]=r>>6&63|128),e[n++]=63&r|128);return n-i}},128:function(t,e,n){var r=n(100),o=r.Reader,i=r.Writer,s=r.util,a=r.roots.default||(r.roots.default={});function u(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function l(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function c(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function g(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function h(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function d(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function f(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function p(t){if(this.msgs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function m(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function b(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function y(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function w(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function _(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function v(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function S(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function k(t){if(this.chatItems=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function L(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function O(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function T(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}function I(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}a.Ping=(u.prototype.type=s.Long?s.Long.fromBits(0,0,!1):0,u.encode=function(t,e){return e=e||i.create(),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int64(t.type),e},u.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.Ping;t.pos<n;){var i=t.uint32();i>>>3==1?r.type=t.int64():t.skipType(7&i)}return r},u.fromObject=function(t){if(t instanceof a.Ping)return t;var e=new a.Ping;return null!=t.type&&(s.Long?(e.type=s.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?e.type=parseInt(t.type,10):"number"==typeof t.type?e.type=t.type:"object"==_typeof(t.type)&&(e.type=new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),e},u.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.type=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.type=e.longs===String?"0":0),null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?r.type=e.longs===String?String(t.type):t.type:r.type=e.longs===String?s.Long.prototype.toString.call(t.type):e.longs===Number?new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),r},u.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},u),a.ImLogin=(l.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,l.prototype.token="",l.prototype.ct=s.Long?s.Long.fromBits(0,0,!1):0,l.prototype.subApp=s.Long?s.Long.fromBits(0,0,!1):0,l.prototype.pushChannel=s.Long?s.Long.fromBits(0,0,!1):0,l.prototype.pushToken="",l.prototype.lastToken="",l.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&e.uint32(18).string(t.token),null!=t.ct&&Object.hasOwnProperty.call(t,"ct")&&e.uint32(24).int64(t.ct),null!=t.subApp&&Object.hasOwnProperty.call(t,"subApp")&&e.uint32(32).int64(t.subApp),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&e.uint32(40).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&e.uint32(50).string(t.pushToken),null!=t.lastToken&&Object.hasOwnProperty.call(t,"lastToken")&&e.uint32(58).string(t.lastToken),e},l.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ImLogin;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.token=t.string();break;case 3:r.ct=t.int64();break;case 4:r.subApp=t.int64();break;case 5:r.pushChannel=t.int64();break;case 6:r.pushToken=t.string();break;case 7:r.lastToken=t.string();break;default:t.skipType(7&i)}}return r},l.fromObject=function(t){if(t instanceof a.ImLogin)return t;var e=new a.ImLogin;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(e.token=String(t.token)),null!=t.ct&&(s.Long?(e.ct=s.Long.fromValue(t.ct)).unsigned=!1:"string"==typeof t.ct?e.ct=parseInt(t.ct,10):"number"==typeof t.ct?e.ct=t.ct:"object"==_typeof(t.ct)&&(e.ct=new s.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber())),null!=t.subApp&&(s.Long?(e.subApp=s.Long.fromValue(t.subApp)).unsigned=!1:"string"==typeof t.subApp?e.subApp=parseInt(t.subApp,10):"number"==typeof t.subApp?e.subApp=t.subApp:"object"==_typeof(t.subApp)&&(e.subApp=new s.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber())),null!=t.pushChannel&&(s.Long?(e.pushChannel=s.Long.fromValue(t.pushChannel)).unsigned=!1:"string"==typeof t.pushChannel?e.pushChannel=parseInt(t.pushChannel,10):"number"==typeof t.pushChannel?e.pushChannel=t.pushChannel:"object"==_typeof(t.pushChannel)&&(e.pushChannel=new s.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(e.pushToken=String(t.pushToken)),null!=t.lastToken&&(e.lastToken=String(t.lastToken)),e},l.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,r.token="",s.Long?(n=new s.Long(0,0,!1),r.ct=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.ct=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.subApp=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.subApp=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.pushChannel=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.pushChannel=e.longs===String?"0":0,r.pushToken="",r.lastToken=""),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(r.token=t.token),null!=t.ct&&t.hasOwnProperty("ct")&&("number"==typeof t.ct?r.ct=e.longs===String?String(t.ct):t.ct:r.ct=e.longs===String?s.Long.prototype.toString.call(t.ct):e.longs===Number?new s.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber():t.ct),null!=t.subApp&&t.hasOwnProperty("subApp")&&("number"==typeof t.subApp?r.subApp=e.longs===String?String(t.subApp):t.subApp:r.subApp=e.longs===String?s.Long.prototype.toString.call(t.subApp):e.longs===Number?new s.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber():t.subApp),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"==typeof t.pushChannel?r.pushChannel=e.longs===String?String(t.pushChannel):t.pushChannel:r.pushChannel=e.longs===String?s.Long.prototype.toString.call(t.pushChannel):e.longs===Number?new s.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(r.pushToken=t.pushToken),null!=t.lastToken&&t.hasOwnProperty("lastToken")&&(r.lastToken=t.lastToken),r},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l),a.ImLogout=(c.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,c.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),e},c.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ImLogout;t.pos<n;){var i=t.uint32();i>>>3==1?r.sign=t.int64():t.skipType(7&i)}return r},c.fromObject=function(t){if(t instanceof a.ImLogout)return t;var e=new a.ImLogout;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),e},c.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),r},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c),a.Result=(g.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,g.prototype.code=s.Long?s.Long.fromBits(0,0,!1):0,g.prototype.msg="",g.prototype.nowTime=s.Long?s.Long.fromBits(0,0,!1):0,g.prototype.uid=s.Long?s.Long.fromBits(0,0,!1):0,g.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(16).int64(t.code),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(26).string(t.msg),null!=t.nowTime&&Object.hasOwnProperty.call(t,"nowTime")&&e.uint32(32).int64(t.nowTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(40).int64(t.uid),e},g.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.Result;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.code=t.int64();break;case 3:r.msg=t.string();break;case 4:r.nowTime=t.int64();break;case 5:r.uid=t.int64();break;default:t.skipType(7&i)}}return r},g.fromObject=function(t){if(t instanceof a.Result)return t;var e=new a.Result;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.code&&(s.Long?(e.code=s.Long.fromValue(t.code)).unsigned=!1:"string"==typeof t.code?e.code=parseInt(t.code,10):"number"==typeof t.code?e.code=t.code:"object"==_typeof(t.code)&&(e.code=new s.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber())),null!=t.msg&&(e.msg=String(t.msg)),null!=t.nowTime&&(s.Long?(e.nowTime=s.Long.fromValue(t.nowTime)).unsigned=!1:"string"==typeof t.nowTime?e.nowTime=parseInt(t.nowTime,10):"number"==typeof t.nowTime?e.nowTime=t.nowTime:"object"==_typeof(t.nowTime)&&(e.nowTime=new s.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber())),null!=t.uid&&(s.Long?(e.uid=s.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?e.uid=parseInt(t.uid,10):"number"==typeof t.uid?e.uid=t.uid:"object"==_typeof(t.uid)&&(e.uid=new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},g.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.code=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.code=e.longs===String?"0":0,r.msg="",s.Long?(n=new s.Long(0,0,!1),r.nowTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.nowTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.uid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.uid=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.code&&t.hasOwnProperty("code")&&("number"==typeof t.code?r.code=e.longs===String?String(t.code):t.code:r.code=e.longs===String?s.Long.prototype.toString.call(t.code):e.longs===Number?new s.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber():t.code),null!=t.msg&&t.hasOwnProperty("msg")&&(r.msg=t.msg),null!=t.nowTime&&t.hasOwnProperty("nowTime")&&("number"==typeof t.nowTime?r.nowTime=e.longs===String?String(t.nowTime):t.nowTime:r.nowTime=e.longs===String?s.Long.prototype.toString.call(t.nowTime):e.longs===Number?new s.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber():t.nowTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?r.uid=e.longs===String?String(t.uid):t.uid:r.uid=e.longs===String?s.Long.prototype.toString.call(t.uid):e.longs===Number?new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),r},g.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},g),a.ChatS=(h.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.type=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.title="",h.prototype.body="",h.prototype.thumb="",h.prototype.width=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.height=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.duration=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.lat=0,h.prototype.lng=0,h.prototype.zoom=s.Long?s.Long.fromBits(0,0,!1):0,h.prototype.pushTitle="",h.prototype.pushBody="",h.prototype.pushSound="",h.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(16).int64(t.type),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(24).int64(t.toUid),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&e.uint32(34).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&e.uint32(42).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&e.uint32(50).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&e.uint32(56).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&e.uint32(64).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&e.uint32(72).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&e.uint32(81).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&e.uint32(89).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&e.uint32(96).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&e.uint32(106).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&e.uint32(114).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&e.uint32(122).string(t.pushSound),e},h.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatS;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.type=t.int64();break;case 3:r.toUid=t.int64();break;case 4:r.title=t.string();break;case 5:r.body=t.string();break;case 6:r.thumb=t.string();break;case 7:r.width=t.int64();break;case 8:r.height=t.int64();break;case 9:r.duration=t.int64();break;case 10:r.lat=t.double();break;case 11:r.lng=t.double();break;case 12:r.zoom=t.int64();break;case 13:r.pushTitle=t.string();break;case 14:r.pushBody=t.string();break;case 15:r.pushSound=t.string();break;default:t.skipType(7&i)}}return r},h.fromObject=function(t){if(t instanceof a.ChatS)return t;var e=new a.ChatS;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.type&&(s.Long?(e.type=s.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?e.type=parseInt(t.type,10):"number"==typeof t.type?e.type=t.type:"object"==_typeof(t.type)&&(e.type=new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.title&&(e.title=String(t.title)),null!=t.body&&(e.body=String(t.body)),null!=t.thumb&&(e.thumb=String(t.thumb)),null!=t.width&&(s.Long?(e.width=s.Long.fromValue(t.width)).unsigned=!1:"string"==typeof t.width?e.width=parseInt(t.width,10):"number"==typeof t.width?e.width=t.width:"object"==_typeof(t.width)&&(e.width=new s.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(s.Long?(e.height=s.Long.fromValue(t.height)).unsigned=!1:"string"==typeof t.height?e.height=parseInt(t.height,10):"number"==typeof t.height?e.height=t.height:"object"==_typeof(t.height)&&(e.height=new s.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(s.Long?(e.duration=s.Long.fromValue(t.duration)).unsigned=!1:"string"==typeof t.duration?e.duration=parseInt(t.duration,10):"number"==typeof t.duration?e.duration=t.duration:"object"==_typeof(t.duration)&&(e.duration=new s.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(e.lat=Number(t.lat)),null!=t.lng&&(e.lng=Number(t.lng)),null!=t.zoom&&(s.Long?(e.zoom=s.Long.fromValue(t.zoom)).unsigned=!1:"string"==typeof t.zoom?e.zoom=parseInt(t.zoom,10):"number"==typeof t.zoom?e.zoom=t.zoom:"object"==_typeof(t.zoom)&&(e.zoom=new s.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(e.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(e.pushBody=String(t.pushBody)),null!=t.pushSound&&(e.pushSound=String(t.pushSound)),e},h.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.type=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.type=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0,r.title="",r.body="",r.thumb="",s.Long?(n=new s.Long(0,0,!1),r.width=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.width=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.height=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.height=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.duration=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.duration=e.longs===String?"0":0,r.lat=0,r.lng=0,s.Long?(n=new s.Long(0,0,!1),r.zoom=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.zoom=e.longs===String?"0":0,r.pushTitle="",r.pushBody="",r.pushSound=""),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?r.type=e.longs===String?String(t.type):t.type:r.type=e.longs===String?s.Long.prototype.toString.call(t.type):e.longs===Number?new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.title&&t.hasOwnProperty("title")&&(r.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(r.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(r.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"==typeof t.width?r.width=e.longs===String?String(t.width):t.width:r.width=e.longs===String?s.Long.prototype.toString.call(t.width):e.longs===Number?new s.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"==typeof t.height?r.height=e.longs===String?String(t.height):t.height:r.height=e.longs===String?s.Long.prototype.toString.call(t.height):e.longs===Number?new s.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"==typeof t.duration?r.duration=e.longs===String?String(t.duration):t.duration:r.duration=e.longs===String?s.Long.prototype.toString.call(t.duration):e.longs===Number?new s.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(r.lat=e.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(r.lng=e.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"==typeof t.zoom?r.zoom=e.longs===String?String(t.zoom):t.zoom:r.zoom=e.longs===String?s.Long.prototype.toString.call(t.zoom):e.longs===Number?new s.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(r.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(r.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(r.pushSound=t.pushSound),r},h.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},h),a.ChatSR=(d.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,d.prototype.msgId=s.Long?s.Long.fromBits(0,0,!1):0,d.prototype.msgTime=s.Long?s.Long.fromBits(0,0,!1):0,d.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(16).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&e.uint32(24).int64(t.msgTime),e},d.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatSR;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.msgId=t.int64();break;case 3:r.msgTime=t.int64();break;default:t.skipType(7&i)}}return r},d.fromObject=function(t){if(t instanceof a.ChatSR)return t;var e=new a.ChatSR;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.msgId&&(s.Long?(e.msgId=s.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?e.msgId=t.msgId:"object"==_typeof(t.msgId)&&(e.msgId=new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(s.Long?(e.msgTime=s.Long.fromValue(t.msgTime)).unsigned=!1:"string"==typeof t.msgTime?e.msgTime=parseInt(t.msgTime,10):"number"==typeof t.msgTime?e.msgTime=t.msgTime:"object"==_typeof(t.msgTime)&&(e.msgTime=new s.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),e},d.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgId=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgTime=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?r.msgId=e.longs===String?String(t.msgId):t.msgId:r.msgId=e.longs===String?s.Long.prototype.toString.call(t.msgId):e.longs===Number?new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"==typeof t.msgTime?r.msgTime=e.longs===String?String(t.msgTime):t.msgTime:r.msgTime=e.longs===String?s.Long.prototype.toString.call(t.msgTime):e.longs===Number?new s.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),r},d.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},d),a.ChatR=(f.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.fromUid=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.msgId=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.msgTime=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.sput=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.newMsg=!1,f.prototype.type=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.title="",f.prototype.body="",f.prototype.thumb="",f.prototype.width=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.height=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.duration=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.lat=0,f.prototype.lng=0,f.prototype.zoom=s.Long?s.Long.fromBits(0,0,!1):0,f.prototype.pushTitle="",f.prototype.pushBody="",f.prototype.pushSound="",f.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.fromUid&&Object.hasOwnProperty.call(t,"fromUid")&&e.uint32(16).int64(t.fromUid),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(24).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(32).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&e.uint32(40).int64(t.msgTime),null!=t.sput&&Object.hasOwnProperty.call(t,"sput")&&e.uint32(48).int64(t.sput),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&e.uint32(56).bool(t.newMsg),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(64).int64(t.type),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&e.uint32(74).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&e.uint32(82).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&e.uint32(90).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&e.uint32(96).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&e.uint32(104).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&e.uint32(112).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&e.uint32(121).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&e.uint32(129).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&e.uint32(136).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&e.uint32(146).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&e.uint32(154).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&e.uint32(162).string(t.pushSound),e},f.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatR;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.fromUid=t.int64();break;case 3:r.toUid=t.int64();break;case 4:r.msgId=t.int64();break;case 5:r.msgTime=t.int64();break;case 6:r.sput=t.int64();break;case 7:r.newMsg=t.bool();break;case 8:r.type=t.int64();break;case 9:r.title=t.string();break;case 10:r.body=t.string();break;case 11:r.thumb=t.string();break;case 12:r.width=t.int64();break;case 13:r.height=t.int64();break;case 14:r.duration=t.int64();break;case 15:r.lat=t.double();break;case 16:r.lng=t.double();break;case 17:r.zoom=t.int64();break;case 18:r.pushTitle=t.string();break;case 19:r.pushBody=t.string();break;case 20:r.pushSound=t.string();break;default:t.skipType(7&i)}}return r},f.fromObject=function(t){if(t instanceof a.ChatR)return t;var e=new a.ChatR;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.fromUid&&(s.Long?(e.fromUid=s.Long.fromValue(t.fromUid)).unsigned=!1:"string"==typeof t.fromUid?e.fromUid=parseInt(t.fromUid,10):"number"==typeof t.fromUid?e.fromUid=t.fromUid:"object"==_typeof(t.fromUid)&&(e.fromUid=new s.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(s.Long?(e.msgId=s.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?e.msgId=t.msgId:"object"==_typeof(t.msgId)&&(e.msgId=new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(s.Long?(e.msgTime=s.Long.fromValue(t.msgTime)).unsigned=!1:"string"==typeof t.msgTime?e.msgTime=parseInt(t.msgTime,10):"number"==typeof t.msgTime?e.msgTime=t.msgTime:"object"==_typeof(t.msgTime)&&(e.msgTime=new s.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),null!=t.sput&&(s.Long?(e.sput=s.Long.fromValue(t.sput)).unsigned=!1:"string"==typeof t.sput?e.sput=parseInt(t.sput,10):"number"==typeof t.sput?e.sput=t.sput:"object"==_typeof(t.sput)&&(e.sput=new s.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber())),null!=t.newMsg&&(e.newMsg=Boolean(t.newMsg)),null!=t.type&&(s.Long?(e.type=s.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?e.type=parseInt(t.type,10):"number"==typeof t.type?e.type=t.type:"object"==_typeof(t.type)&&(e.type=new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.title&&(e.title=String(t.title)),null!=t.body&&(e.body=String(t.body)),null!=t.thumb&&(e.thumb=String(t.thumb)),null!=t.width&&(s.Long?(e.width=s.Long.fromValue(t.width)).unsigned=!1:"string"==typeof t.width?e.width=parseInt(t.width,10):"number"==typeof t.width?e.width=t.width:"object"==_typeof(t.width)&&(e.width=new s.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(s.Long?(e.height=s.Long.fromValue(t.height)).unsigned=!1:"string"==typeof t.height?e.height=parseInt(t.height,10):"number"==typeof t.height?e.height=t.height:"object"==_typeof(t.height)&&(e.height=new s.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(s.Long?(e.duration=s.Long.fromValue(t.duration)).unsigned=!1:"string"==typeof t.duration?e.duration=parseInt(t.duration,10):"number"==typeof t.duration?e.duration=t.duration:"object"==_typeof(t.duration)&&(e.duration=new s.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(e.lat=Number(t.lat)),null!=t.lng&&(e.lng=Number(t.lng)),null!=t.zoom&&(s.Long?(e.zoom=s.Long.fromValue(t.zoom)).unsigned=!1:"string"==typeof t.zoom?e.zoom=parseInt(t.zoom,10):"number"==typeof t.zoom?e.zoom=t.zoom:"object"==_typeof(t.zoom)&&(e.zoom=new s.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(e.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(e.pushBody=String(t.pushBody)),null!=t.pushSound&&(e.pushSound=String(t.pushSound)),e},f.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.fromUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.fromUid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgId=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.sput=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sput=e.longs===String?"0":0,r.newMsg=!1,s.Long?(n=new s.Long(0,0,!1),r.type=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.type=e.longs===String?"0":0,r.title="",r.body="",r.thumb="",s.Long?(n=new s.Long(0,0,!1),r.width=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.width=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.height=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.height=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.duration=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.duration=e.longs===String?"0":0,r.lat=0,r.lng=0,s.Long?(n=new s.Long(0,0,!1),r.zoom=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.zoom=e.longs===String?"0":0,r.pushTitle="",r.pushBody="",r.pushSound=""),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.fromUid&&t.hasOwnProperty("fromUid")&&("number"==typeof t.fromUid?r.fromUid=e.longs===String?String(t.fromUid):t.fromUid:r.fromUid=e.longs===String?s.Long.prototype.toString.call(t.fromUid):e.longs===Number?new s.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber():t.fromUid),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?r.msgId=e.longs===String?String(t.msgId):t.msgId:r.msgId=e.longs===String?s.Long.prototype.toString.call(t.msgId):e.longs===Number?new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"==typeof t.msgTime?r.msgTime=e.longs===String?String(t.msgTime):t.msgTime:r.msgTime=e.longs===String?s.Long.prototype.toString.call(t.msgTime):e.longs===Number?new s.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),null!=t.sput&&t.hasOwnProperty("sput")&&("number"==typeof t.sput?r.sput=e.longs===String?String(t.sput):t.sput:r.sput=e.longs===String?s.Long.prototype.toString.call(t.sput):e.longs===Number?new s.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber():t.sput),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(r.newMsg=t.newMsg),null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?r.type=e.longs===String?String(t.type):t.type:r.type=e.longs===String?s.Long.prototype.toString.call(t.type):e.longs===Number?new s.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.title&&t.hasOwnProperty("title")&&(r.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(r.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(r.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"==typeof t.width?r.width=e.longs===String?String(t.width):t.width:r.width=e.longs===String?s.Long.prototype.toString.call(t.width):e.longs===Number?new s.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"==typeof t.height?r.height=e.longs===String?String(t.height):t.height:r.height=e.longs===String?s.Long.prototype.toString.call(t.height):e.longs===Number?new s.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"==typeof t.duration?r.duration=e.longs===String?String(t.duration):t.duration:r.duration=e.longs===String?s.Long.prototype.toString.call(t.duration):e.longs===Number?new s.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(r.lat=e.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(r.lng=e.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"==typeof t.zoom?r.zoom=e.longs===String?String(t.zoom):t.zoom:r.zoom=e.longs===String?s.Long.prototype.toString.call(t.zoom):e.longs===Number?new s.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(r.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(r.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(r.pushSound=t.pushSound),r},f.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},f),a.ChatRBatch=(p.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,p.prototype.msgs=s.emptyArray,p.encode=function(t,e){if(e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.msgs&&t.msgs.length)for(var n=0;n<t.msgs.length;++n)a.ChatR.encode(t.msgs[n],e.uint32(18).fork()).ldelim();return e},p.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatRBatch;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.msgs&&r.msgs.length||(r.msgs=[]),r.msgs.push(a.ChatR.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},p.fromObject=function(t){if(t instanceof a.ChatRBatch)return t;var e=new a.ChatRBatch;if(null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".ChatRBatch.msgs: array expected");e.msgs=[];for(var n=0;n<t.msgs.length;++n){if("object"!=_typeof(t.msgs[n]))throw TypeError(".ChatRBatch.msgs: object expected");e.msgs[n]=a.ChatR.fromObject(t.msgs[n])}}return e},p.toObject=function(t,e){var n,r={};if(((e=e||{}).arrays||e.defaults)&&(r.msgs=[]),e.defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.msgs&&t.msgs.length){r.msgs=[];for(var o=0;o<t.msgs.length;++o)r.msgs[o]=a.ChatR.toObject(t.msgs[o],e)}return r},p.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},p),a.GetHistory=(m.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,m.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,m.prototype.msgEnd=s.Long?s.Long.fromBits(0,0,!1):0,m.prototype.msgStart=s.Long?s.Long.fromBits(0,0,!1):0,m.prototype.offset=s.Long?s.Long.fromBits(0,0,!1):0,m.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&e.uint32(24).int64(t.msgEnd),null!=t.msgStart&&Object.hasOwnProperty.call(t,"msgStart")&&e.uint32(32).int64(t.msgStart),null!=t.offset&&Object.hasOwnProperty.call(t,"offset")&&e.uint32(40).int64(t.offset),e},m.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.GetHistory;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.toUid=t.int64();break;case 3:r.msgEnd=t.int64();break;case 4:r.msgStart=t.int64();break;case 5:r.offset=t.int64();break;default:t.skipType(7&i)}}return r},m.fromObject=function(t){if(t instanceof a.GetHistory)return t;var e=new a.GetHistory;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgEnd&&(s.Long?(e.msgEnd=s.Long.fromValue(t.msgEnd)).unsigned=!1:"string"==typeof t.msgEnd?e.msgEnd=parseInt(t.msgEnd,10):"number"==typeof t.msgEnd?e.msgEnd=t.msgEnd:"object"==_typeof(t.msgEnd)&&(e.msgEnd=new s.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgStart&&(s.Long?(e.msgStart=s.Long.fromValue(t.msgStart)).unsigned=!1:"string"==typeof t.msgStart?e.msgStart=parseInt(t.msgStart,10):"number"==typeof t.msgStart?e.msgStart=t.msgStart:"object"==_typeof(t.msgStart)&&(e.msgStart=new s.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber())),null!=t.offset&&(s.Long?(e.offset=s.Long.fromValue(t.offset)).unsigned=!1:"string"==typeof t.offset?e.offset=parseInt(t.offset,10):"number"==typeof t.offset?e.offset=t.offset:"object"==_typeof(t.offset)&&(e.offset=new s.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber())),e},m.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgEnd=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgEnd=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgStart=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgStart=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.offset=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.offset=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"==typeof t.msgEnd?r.msgEnd=e.longs===String?String(t.msgEnd):t.msgEnd:r.msgEnd=e.longs===String?s.Long.prototype.toString.call(t.msgEnd):e.longs===Number?new s.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgStart&&t.hasOwnProperty("msgStart")&&("number"==typeof t.msgStart?r.msgStart=e.longs===String?String(t.msgStart):t.msgStart:r.msgStart=e.longs===String?s.Long.prototype.toString.call(t.msgStart):e.longs===Number?new s.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber():t.msgStart),null!=t.offset&&t.hasOwnProperty("offset")&&("number"==typeof t.offset?r.offset=e.longs===String?String(t.offset):t.offset:r.offset=e.longs===String?s.Long.prototype.toString.call(t.offset):e.longs===Number?new s.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber():t.offset),r},m.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},m),a.Revoke=(b.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,b.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,b.prototype.msgId=s.Long?s.Long.fromBits(0,0,!1):0,b.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(24).int64(t.msgId),e},b.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.Revoke;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.toUid=t.int64();break;case 3:r.msgId=t.int64();break;default:t.skipType(7&i)}}return r},b.fromObject=function(t){if(t instanceof a.Revoke)return t;var e=new a.Revoke;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(s.Long?(e.msgId=s.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?e.msgId=t.msgId:"object"==_typeof(t.msgId)&&(e.msgId=new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),e},b.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgId=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?r.msgId=e.longs===String?String(t.msgId):t.msgId:r.msgId=e.longs===String?s.Long.prototype.toString.call(t.msgId):e.longs===Number?new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),r},b.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},b),a.MsgRead=(y.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,y.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,y.prototype.msgId=s.Long?s.Long.fromBits(0,0,!1):0,y.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(24).int64(t.msgId),e},y.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.MsgRead;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.toUid=t.int64();break;case 3:r.msgId=t.int64();break;default:t.skipType(7&i)}}return r},y.fromObject=function(t){if(t instanceof a.MsgRead)return t;var e=new a.MsgRead;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(s.Long?(e.msgId=s.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?e.msgId=t.msgId:"object"==_typeof(t.msgId)&&(e.msgId=new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),e},y.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgId=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?r.msgId=e.longs===String?String(t.msgId):t.msgId:r.msgId=e.longs===String?s.Long.prototype.toString.call(t.msgId):e.longs===Number?new s.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),r},y.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},y),a.DelChat=(w.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,w.prototype.toUid=s.Long?s.Long.fromBits(0,0,!1):0,w.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),e},w.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.DelChat;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.toUid=t.int64();break;default:t.skipType(7&i)}}return r},w.fromObject=function(t){if(t instanceof a.DelChat)return t;var e=new a.DelChat;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(s.Long?(e.toUid=s.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?e.toUid=t.toUid:"object"==_typeof(t.toUid)&&(e.toUid=new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),e},w.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.toUid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.toUid=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?r.toUid=e.longs===String?String(t.toUid):t.toUid:r.toUid=e.longs===String?s.Long.prototype.toString.call(t.toUid):e.longs===Number?new s.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),r},w.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},w),a.GetChatList=(_.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,_.prototype.updateTime=s.Long?s.Long.fromBits(0,0,!1):0,_.prototype.uid=s.Long?s.Long.fromBits(0,0,!1):0,_.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(16).int64(t.updateTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(24).int64(t.uid),e},_.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.GetChatList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.updateTime=t.int64();break;case 3:r.uid=t.int64();break;default:t.skipType(7&i)}}return r},_.fromObject=function(t){if(t instanceof a.GetChatList)return t;var e=new a.GetChatList;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.updateTime&&(s.Long?(e.updateTime=s.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?e.updateTime=t.updateTime:"object"==_typeof(t.updateTime)&&(e.updateTime=new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.uid&&(s.Long?(e.uid=s.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?e.uid=parseInt(t.uid,10):"number"==typeof t.uid?e.uid=t.uid:"object"==_typeof(t.uid)&&(e.uid=new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},_.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.updateTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.updateTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.uid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.uid=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?r.updateTime=e.longs===String?String(t.updateTime):t.updateTime:r.updateTime=e.longs===String?s.Long.prototype.toString.call(t.updateTime):e.longs===Number?new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?r.uid=e.longs===String?String(t.uid):t.uid:r.uid=e.longs===String?s.Long.prototype.toString.call(t.uid):e.longs===Number?new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),r},_.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},_),a.ChatItem=(v.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.uid=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.msgEnd=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.msgLastRead=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.showMsgId=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.showMsgType=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.showMsg="",v.prototype.showMsgTime=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.unread=s.Long?s.Long.fromBits(0,0,!1):0,v.prototype.matched=!1,v.prototype.newMsg=!1,v.prototype.myMove=!1,v.prototype.iceBreak=!1,v.prototype.tipFree=!1,v.prototype.topAlbum=!1,v.prototype.iBlockU=!1,v.prototype.iChatU=!1,v.prototype.uChatI=!1,v.prototype.deleted=!1,v.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&e.uint32(24).int64(t.msgEnd),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&e.uint32(32).int64(t.msgLastRead),null!=t.showMsgId&&Object.hasOwnProperty.call(t,"showMsgId")&&e.uint32(40).int64(t.showMsgId),null!=t.showMsgType&&Object.hasOwnProperty.call(t,"showMsgType")&&e.uint32(48).int64(t.showMsgType),null!=t.showMsg&&Object.hasOwnProperty.call(t,"showMsg")&&e.uint32(58).string(t.showMsg),null!=t.showMsgTime&&Object.hasOwnProperty.call(t,"showMsgTime")&&e.uint32(64).int64(t.showMsgTime),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&e.uint32(72).int64(t.unread),null!=t.matched&&Object.hasOwnProperty.call(t,"matched")&&e.uint32(80).bool(t.matched),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&e.uint32(88).bool(t.newMsg),null!=t.myMove&&Object.hasOwnProperty.call(t,"myMove")&&e.uint32(96).bool(t.myMove),null!=t.iceBreak&&Object.hasOwnProperty.call(t,"iceBreak")&&e.uint32(104).bool(t.iceBreak),null!=t.tipFree&&Object.hasOwnProperty.call(t,"tipFree")&&e.uint32(112).bool(t.tipFree),null!=t.topAlbum&&Object.hasOwnProperty.call(t,"topAlbum")&&e.uint32(120).bool(t.topAlbum),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&e.uint32(128).bool(t.iBlockU),null!=t.iChatU&&Object.hasOwnProperty.call(t,"iChatU")&&e.uint32(136).bool(t.iChatU),null!=t.uChatI&&Object.hasOwnProperty.call(t,"uChatI")&&e.uint32(144).bool(t.uChatI),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&e.uint32(152).bool(t.deleted),e},v.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatItem;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.uid=t.int64();break;case 3:r.msgEnd=t.int64();break;case 4:r.msgLastRead=t.int64();break;case 5:r.showMsgId=t.int64();break;case 6:r.showMsgType=t.int64();break;case 7:r.showMsg=t.string();break;case 8:r.showMsgTime=t.int64();break;case 9:r.unread=t.int64();break;case 10:r.matched=t.bool();break;case 11:r.newMsg=t.bool();break;case 12:r.myMove=t.bool();break;case 13:r.iceBreak=t.bool();break;case 14:r.tipFree=t.bool();break;case 15:r.topAlbum=t.bool();break;case 16:r.iBlockU=t.bool();break;case 17:r.iChatU=t.bool();break;case 18:r.uChatI=t.bool();break;case 19:r.deleted=t.bool();break;default:t.skipType(7&i)}}return r},v.fromObject=function(t){if(t instanceof a.ChatItem)return t;var e=new a.ChatItem;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(s.Long?(e.uid=s.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?e.uid=parseInt(t.uid,10):"number"==typeof t.uid?e.uid=t.uid:"object"==_typeof(t.uid)&&(e.uid=new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.msgEnd&&(s.Long?(e.msgEnd=s.Long.fromValue(t.msgEnd)).unsigned=!1:"string"==typeof t.msgEnd?e.msgEnd=parseInt(t.msgEnd,10):"number"==typeof t.msgEnd?e.msgEnd=t.msgEnd:"object"==_typeof(t.msgEnd)&&(e.msgEnd=new s.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgLastRead&&(s.Long?(e.msgLastRead=s.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"==typeof t.msgLastRead?e.msgLastRead=parseInt(t.msgLastRead,10):"number"==typeof t.msgLastRead?e.msgLastRead=t.msgLastRead:"object"==_typeof(t.msgLastRead)&&(e.msgLastRead=new s.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.showMsgId&&(s.Long?(e.showMsgId=s.Long.fromValue(t.showMsgId)).unsigned=!1:"string"==typeof t.showMsgId?e.showMsgId=parseInt(t.showMsgId,10):"number"==typeof t.showMsgId?e.showMsgId=t.showMsgId:"object"==_typeof(t.showMsgId)&&(e.showMsgId=new s.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber())),null!=t.showMsgType&&(s.Long?(e.showMsgType=s.Long.fromValue(t.showMsgType)).unsigned=!1:"string"==typeof t.showMsgType?e.showMsgType=parseInt(t.showMsgType,10):"number"==typeof t.showMsgType?e.showMsgType=t.showMsgType:"object"==_typeof(t.showMsgType)&&(e.showMsgType=new s.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber())),null!=t.showMsg&&(e.showMsg=String(t.showMsg)),null!=t.showMsgTime&&(s.Long?(e.showMsgTime=s.Long.fromValue(t.showMsgTime)).unsigned=!1:"string"==typeof t.showMsgTime?e.showMsgTime=parseInt(t.showMsgTime,10):"number"==typeof t.showMsgTime?e.showMsgTime=t.showMsgTime:"object"==_typeof(t.showMsgTime)&&(e.showMsgTime=new s.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber())),null!=t.unread&&(s.Long?(e.unread=s.Long.fromValue(t.unread)).unsigned=!1:"string"==typeof t.unread?e.unread=parseInt(t.unread,10):"number"==typeof t.unread?e.unread=t.unread:"object"==_typeof(t.unread)&&(e.unread=new s.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.matched&&(e.matched=Boolean(t.matched)),null!=t.newMsg&&(e.newMsg=Boolean(t.newMsg)),null!=t.myMove&&(e.myMove=Boolean(t.myMove)),null!=t.iceBreak&&(e.iceBreak=Boolean(t.iceBreak)),null!=t.tipFree&&(e.tipFree=Boolean(t.tipFree)),null!=t.topAlbum&&(e.topAlbum=Boolean(t.topAlbum)),null!=t.iBlockU&&(e.iBlockU=Boolean(t.iBlockU)),null!=t.iChatU&&(e.iChatU=Boolean(t.iChatU)),null!=t.uChatI&&(e.uChatI=Boolean(t.uChatI)),null!=t.deleted&&(e.deleted=Boolean(t.deleted)),e},v.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.uid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.uid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgEnd=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgEnd=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgLastRead=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgLastRead=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.showMsgId=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.showMsgId=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.showMsgType=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.showMsgType=e.longs===String?"0":0,r.showMsg="",s.Long?(n=new s.Long(0,0,!1),r.showMsgTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.showMsgTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.unread=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.unread=e.longs===String?"0":0,r.matched=!1,r.newMsg=!1,r.myMove=!1,r.iceBreak=!1,r.tipFree=!1,r.topAlbum=!1,r.iBlockU=!1,r.iChatU=!1,r.uChatI=!1,r.deleted=!1),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?r.uid=e.longs===String?String(t.uid):t.uid:r.uid=e.longs===String?s.Long.prototype.toString.call(t.uid):e.longs===Number?new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"==typeof t.msgEnd?r.msgEnd=e.longs===String?String(t.msgEnd):t.msgEnd:r.msgEnd=e.longs===String?s.Long.prototype.toString.call(t.msgEnd):e.longs===Number?new s.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"==typeof t.msgLastRead?r.msgLastRead=e.longs===String?String(t.msgLastRead):t.msgLastRead:r.msgLastRead=e.longs===String?s.Long.prototype.toString.call(t.msgLastRead):e.longs===Number?new s.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.showMsgId&&t.hasOwnProperty("showMsgId")&&("number"==typeof t.showMsgId?r.showMsgId=e.longs===String?String(t.showMsgId):t.showMsgId:r.showMsgId=e.longs===String?s.Long.prototype.toString.call(t.showMsgId):e.longs===Number?new s.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber():t.showMsgId),null!=t.showMsgType&&t.hasOwnProperty("showMsgType")&&("number"==typeof t.showMsgType?r.showMsgType=e.longs===String?String(t.showMsgType):t.showMsgType:r.showMsgType=e.longs===String?s.Long.prototype.toString.call(t.showMsgType):e.longs===Number?new s.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber():t.showMsgType),null!=t.showMsg&&t.hasOwnProperty("showMsg")&&(r.showMsg=t.showMsg),null!=t.showMsgTime&&t.hasOwnProperty("showMsgTime")&&("number"==typeof t.showMsgTime?r.showMsgTime=e.longs===String?String(t.showMsgTime):t.showMsgTime:r.showMsgTime=e.longs===String?s.Long.prototype.toString.call(t.showMsgTime):e.longs===Number?new s.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber():t.showMsgTime),null!=t.unread&&t.hasOwnProperty("unread")&&("number"==typeof t.unread?r.unread=e.longs===String?String(t.unread):t.unread:r.unread=e.longs===String?s.Long.prototype.toString.call(t.unread):e.longs===Number?new s.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.matched&&t.hasOwnProperty("matched")&&(r.matched=t.matched),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(r.newMsg=t.newMsg),null!=t.myMove&&t.hasOwnProperty("myMove")&&(r.myMove=t.myMove),null!=t.iceBreak&&t.hasOwnProperty("iceBreak")&&(r.iceBreak=t.iceBreak),null!=t.tipFree&&t.hasOwnProperty("tipFree")&&(r.tipFree=t.tipFree),null!=t.topAlbum&&t.hasOwnProperty("topAlbum")&&(r.topAlbum=t.topAlbum),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(r.iBlockU=t.iBlockU),null!=t.iChatU&&t.hasOwnProperty("iChatU")&&(r.iChatU=t.iChatU),null!=t.uChatI&&t.hasOwnProperty("uChatI")&&(r.uChatI=t.uChatI),null!=t.deleted&&t.hasOwnProperty("deleted")&&(r.deleted=t.deleted),r},v.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},v),a.ChatItemUpdate=(S.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.uid=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.event=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.updateTime=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.msgLastRead=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.unread=s.Long?s.Long.fromBits(0,0,!1):0,S.prototype.iBlockU=!1,S.prototype.deleted=!1,S.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),null!=t.event&&Object.hasOwnProperty.call(t,"event")&&e.uint32(24).int64(t.event),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(32).int64(t.updateTime),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&e.uint32(40).int64(t.msgLastRead),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&e.uint32(48).int64(t.unread),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&e.uint32(56).bool(t.iBlockU),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&e.uint32(64).bool(t.deleted),e},S.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatItemUpdate;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.uid=t.int64();break;case 3:r.event=t.int64();break;case 4:r.updateTime=t.int64();break;case 5:r.msgLastRead=t.int64();break;case 6:r.unread=t.int64();break;case 7:r.iBlockU=t.bool();break;case 8:r.deleted=t.bool();break;default:t.skipType(7&i)}}return r},S.fromObject=function(t){if(t instanceof a.ChatItemUpdate)return t;var e=new a.ChatItemUpdate;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(s.Long?(e.uid=s.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?e.uid=parseInt(t.uid,10):"number"==typeof t.uid?e.uid=t.uid:"object"==_typeof(t.uid)&&(e.uid=new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.event&&(s.Long?(e.event=s.Long.fromValue(t.event)).unsigned=!1:"string"==typeof t.event?e.event=parseInt(t.event,10):"number"==typeof t.event?e.event=t.event:"object"==_typeof(t.event)&&(e.event=new s.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber())),null!=t.updateTime&&(s.Long?(e.updateTime=s.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?e.updateTime=t.updateTime:"object"==_typeof(t.updateTime)&&(e.updateTime=new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.msgLastRead&&(s.Long?(e.msgLastRead=s.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"==typeof t.msgLastRead?e.msgLastRead=parseInt(t.msgLastRead,10):"number"==typeof t.msgLastRead?e.msgLastRead=t.msgLastRead:"object"==_typeof(t.msgLastRead)&&(e.msgLastRead=new s.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.unread&&(s.Long?(e.unread=s.Long.fromValue(t.unread)).unsigned=!1:"string"==typeof t.unread?e.unread=parseInt(t.unread,10):"number"==typeof t.unread?e.unread=t.unread:"object"==_typeof(t.unread)&&(e.unread=new s.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.iBlockU&&(e.iBlockU=Boolean(t.iBlockU)),null!=t.deleted&&(e.deleted=Boolean(t.deleted)),e},S.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.uid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.uid=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.event=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.event=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.updateTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.updateTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.msgLastRead=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.msgLastRead=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.unread=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.unread=e.longs===String?"0":0,r.iBlockU=!1,r.deleted=!1),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?r.uid=e.longs===String?String(t.uid):t.uid:r.uid=e.longs===String?s.Long.prototype.toString.call(t.uid):e.longs===Number?new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.event&&t.hasOwnProperty("event")&&("number"==typeof t.event?r.event=e.longs===String?String(t.event):t.event:r.event=e.longs===String?s.Long.prototype.toString.call(t.event):e.longs===Number?new s.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber():t.event),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?r.updateTime=e.longs===String?String(t.updateTime):t.updateTime:r.updateTime=e.longs===String?s.Long.prototype.toString.call(t.updateTime):e.longs===Number?new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"==typeof t.msgLastRead?r.msgLastRead=e.longs===String?String(t.msgLastRead):t.msgLastRead:r.msgLastRead=e.longs===String?s.Long.prototype.toString.call(t.msgLastRead):e.longs===Number?new s.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.unread&&t.hasOwnProperty("unread")&&("number"==typeof t.unread?r.unread=e.longs===String?String(t.unread):t.unread:r.unread=e.longs===String?s.Long.prototype.toString.call(t.unread):e.longs===Number?new s.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(r.iBlockU=t.iBlockU),null!=t.deleted&&t.hasOwnProperty("deleted")&&(r.deleted=t.deleted),r},S.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},S),a.ChatList=(k.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,k.prototype.chatItems=s.emptyArray,k.prototype.updateTime=s.Long?s.Long.fromBits(0,0,!1):0,k.prototype.hasMore=!1,k.encode=function(t,e){if(e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.chatItems&&t.chatItems.length)for(var n=0;n<t.chatItems.length;++n)a.ChatItem.encode(t.chatItems[n],e.uint32(18).fork()).ldelim();return null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(24).int64(t.updateTime),null!=t.hasMore&&Object.hasOwnProperty.call(t,"hasMore")&&e.uint32(32).bool(t.hasMore),e},k.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.ChatList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.chatItems&&r.chatItems.length||(r.chatItems=[]),r.chatItems.push(a.ChatItem.decode(t,t.uint32()));break;case 3:r.updateTime=t.int64();break;case 4:r.hasMore=t.bool();break;default:t.skipType(7&i)}}return r},k.fromObject=function(t){if(t instanceof a.ChatList)return t;var e=new a.ChatList;if(null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.chatItems){if(!Array.isArray(t.chatItems))throw TypeError(".ChatList.chatItems: array expected");e.chatItems=[];for(var n=0;n<t.chatItems.length;++n){if("object"!=_typeof(t.chatItems[n]))throw TypeError(".ChatList.chatItems: object expected");e.chatItems[n]=a.ChatItem.fromObject(t.chatItems[n])}}return null!=t.updateTime&&(s.Long?(e.updateTime=s.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?e.updateTime=t.updateTime:"object"==_typeof(t.updateTime)&&(e.updateTime=new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.hasMore&&(e.hasMore=Boolean(t.hasMore)),e},k.toObject=function(t,e){var n,r={};if(((e=e||{}).arrays||e.defaults)&&(r.chatItems=[]),e.defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.updateTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.updateTime=e.longs===String?"0":0,r.hasMore=!1),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.chatItems&&t.chatItems.length){r.chatItems=[];for(var o=0;o<t.chatItems.length;++o)r.chatItems[o]=a.ChatItem.toObject(t.chatItems[o],e)}return null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?r.updateTime=e.longs===String?String(t.updateTime):t.updateTime:r.updateTime=e.longs===String?s.Long.prototype.toString.call(t.updateTime):e.longs===Number?new s.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.hasMore&&t.hasOwnProperty("hasMore")&&(r.hasMore=t.hasMore),r},k.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},k),a.GetChat=(L.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,L.prototype.uid=s.Long?s.Long.fromBits(0,0,!1):0,L.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),e},L.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.GetChat;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.uid=t.int64();break;default:t.skipType(7&i)}}return r},L.fromObject=function(t){if(t instanceof a.GetChat)return t;var e=new a.GetChat;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(s.Long?(e.uid=s.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?e.uid=parseInt(t.uid,10):"number"==typeof t.uid?e.uid=t.uid:"object"==_typeof(t.uid)&&(e.uid=new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},L.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.uid=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.uid=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?r.uid=e.longs===String?String(t.uid):t.uid:r.uid=e.longs===String?s.Long.prototype.toString.call(t.uid):e.longs===Number?new s.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),r},L.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},L),a.GetCosKey=(O.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,O.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),e},O.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.GetCosKey;t.pos<n;){var i=t.uint32();i>>>3==1?r.sign=t.int64():t.skipType(7&i)}return r},O.fromObject=function(t){if(t instanceof a.GetCosKey)return t;var e=new a.GetCosKey;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),e},O.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),r},O.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},O),a.CosKey=(T.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,T.prototype.token="",T.prototype.id="",T.prototype.key="",T.prototype.bucket="",T.prototype.region="",T.prototype.startTime=s.Long?s.Long.fromBits(0,0,!1):0,T.prototype.expTime=s.Long?s.Long.fromBits(0,0,!1):0,T.prototype.path="",T.prototype.pathDemo="",T.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&e.uint32(18).string(t.token),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(26).string(t.id),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(34).string(t.key),null!=t.bucket&&Object.hasOwnProperty.call(t,"bucket")&&e.uint32(42).string(t.bucket),null!=t.region&&Object.hasOwnProperty.call(t,"region")&&e.uint32(50).string(t.region),null!=t.startTime&&Object.hasOwnProperty.call(t,"startTime")&&e.uint32(56).int64(t.startTime),null!=t.expTime&&Object.hasOwnProperty.call(t,"expTime")&&e.uint32(64).int64(t.expTime),null!=t.path&&Object.hasOwnProperty.call(t,"path")&&e.uint32(74).string(t.path),null!=t.pathDemo&&Object.hasOwnProperty.call(t,"pathDemo")&&e.uint32(82).string(t.pathDemo),e},T.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.CosKey;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.token=t.string();break;case 3:r.id=t.string();break;case 4:r.key=t.string();break;case 5:r.bucket=t.string();break;case 6:r.region=t.string();break;case 7:r.startTime=t.int64();break;case 8:r.expTime=t.int64();break;case 9:r.path=t.string();break;case 10:r.pathDemo=t.string();break;default:t.skipType(7&i)}}return r},T.fromObject=function(t){if(t instanceof a.CosKey)return t;var e=new a.CosKey;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(e.token=String(t.token)),null!=t.id&&(e.id=String(t.id)),null!=t.key&&(e.key=String(t.key)),null!=t.bucket&&(e.bucket=String(t.bucket)),null!=t.region&&(e.region=String(t.region)),null!=t.startTime&&(s.Long?(e.startTime=s.Long.fromValue(t.startTime)).unsigned=!1:"string"==typeof t.startTime?e.startTime=parseInt(t.startTime,10):"number"==typeof t.startTime?e.startTime=t.startTime:"object"==_typeof(t.startTime)&&(e.startTime=new s.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber())),null!=t.expTime&&(s.Long?(e.expTime=s.Long.fromValue(t.expTime)).unsigned=!1:"string"==typeof t.expTime?e.expTime=parseInt(t.expTime,10):"number"==typeof t.expTime?e.expTime=t.expTime:"object"==_typeof(t.expTime)&&(e.expTime=new s.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber())),null!=t.path&&(e.path=String(t.path)),null!=t.pathDemo&&(e.pathDemo=String(t.pathDemo)),e},T.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,r.token="",r.id="",r.key="",r.bucket="",r.region="",s.Long?(n=new s.Long(0,0,!1),r.startTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.startTime=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.expTime=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.expTime=e.longs===String?"0":0,r.path="",r.pathDemo=""),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(r.token=t.token),null!=t.id&&t.hasOwnProperty("id")&&(r.id=t.id),null!=t.key&&t.hasOwnProperty("key")&&(r.key=t.key),null!=t.bucket&&t.hasOwnProperty("bucket")&&(r.bucket=t.bucket),null!=t.region&&t.hasOwnProperty("region")&&(r.region=t.region),null!=t.startTime&&t.hasOwnProperty("startTime")&&("number"==typeof t.startTime?r.startTime=e.longs===String?String(t.startTime):t.startTime:r.startTime=e.longs===String?s.Long.prototype.toString.call(t.startTime):e.longs===Number?new s.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber():t.startTime),null!=t.expTime&&t.hasOwnProperty("expTime")&&("number"==typeof t.expTime?r.expTime=e.longs===String?String(t.expTime):t.expTime:r.expTime=e.longs===String?s.Long.prototype.toString.call(t.expTime):e.longs===Number?new s.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber():t.expTime),null!=t.path&&t.hasOwnProperty("path")&&(r.path=t.path),null!=t.pathDemo&&t.hasOwnProperty("pathDemo")&&(r.pathDemo=t.pathDemo),r},T.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},T),a.UpdatePushToken=(I.prototype.sign=s.Long?s.Long.fromBits(0,0,!1):0,I.prototype.pushChannel=s.Long?s.Long.fromBits(0,0,!1):0,I.prototype.pushToken="",I.encode=function(t,e){return e=e||i.create(),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&e.uint32(16).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&e.uint32(26).string(t.pushToken),e},I.decode=function(t,e){t instanceof o||(t=o.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new a.UpdatePushToken;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.sign=t.int64();break;case 2:r.pushChannel=t.int64();break;case 3:r.pushToken=t.string();break;default:t.skipType(7&i)}}return r},I.fromObject=function(t){if(t instanceof a.UpdatePushToken)return t;var e=new a.UpdatePushToken;return null!=t.sign&&(s.Long?(e.sign=s.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?e.sign=parseInt(t.sign,10):"number"==typeof t.sign?e.sign=t.sign:"object"==_typeof(t.sign)&&(e.sign=new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.pushChannel&&(s.Long?(e.pushChannel=s.Long.fromValue(t.pushChannel)).unsigned=!1:"string"==typeof t.pushChannel?e.pushChannel=parseInt(t.pushChannel,10):"number"==typeof t.pushChannel?e.pushChannel=t.pushChannel:"object"==_typeof(t.pushChannel)&&(e.pushChannel=new s.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(e.pushToken=String(t.pushToken)),e},I.toObject=function(t,e){var n,r={};return(e=e||{}).defaults&&(s.Long?(n=new s.Long(0,0,!1),r.sign=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.sign=e.longs===String?"0":0,s.Long?(n=new s.Long(0,0,!1),r.pushChannel=e.longs===String?n.toString():e.longs===Number?n.toNumber():n):r.pushChannel=e.longs===String?"0":0,r.pushToken=""),null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?r.sign=e.longs===String?String(t.sign):t.sign:r.sign=e.longs===String?s.Long.prototype.toString.call(t.sign):e.longs===Number?new s.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"==typeof t.pushChannel?r.pushChannel=e.longs===String?String(t.pushChannel):t.pushChannel:r.pushChannel=e.longs===String?s.Long.prototype.toString.call(t.pushChannel):e.longs===Number?new s.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(r.pushToken=t.pushToken),r},I.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},I),t.exports=a},100:function(t,e,n){t.exports=n(482)},482:function(t,e,n){var r=e;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(173),r.BufferWriter=n(155),r.Reader=n(408),r.BufferReader=n(593),r.util=n(693),r.rpc=n(994),r.roots=n(54),r.configure=o,o()},408:function(t,e,n){t.exports=u;var r,o=n(693),i=o.LongBits,s=o.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}function l(){return o.Buffer?function(t){return(u.create=function(t){return o.Buffer.isBuffer(t)?new r(t):g(t)})(t)}:g}var c,g="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")};function h(){var t=new i(0,0),e=0;if(!(4<this.len-this.pos)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,4<this.len-this.pos){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=l(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return s.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){r=t,u.create=l(),r._configure();var e=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},593:function(t,e,n){t.exports=i;var r=n(408);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(693);function i(t){r.call(this,t)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},54:function(t){t.exports={}},994:function(t,e,n){e.Service=n(948)},948:function(t,e,n){t.exports=o;var r=n(693);function o(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}((o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o).prototype.rpcCall=function t(e,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(t,a,e,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,n){if(t)return a.emit("error",t,e),s(t);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),s(t)}return a.emit("data",n,e),s(null,n)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){s(t)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},630:function(t,e,n){t.exports=o;var r=n(693);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1},o.zeroHash="\0\0\0\0\0\0\0\0",o.fromNumber=function(t){if(0===t)return i;var e=t<0,n=(t=e?-t:t)>>>0;return t=(t-n)/4294967296>>>0,e&&(t=~t>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++t&&(t=0))),new o(n,t)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(r.isString(t)){if(!r.Long)return o.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):i},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0;return t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;o.fromHash=function(t){return"\0\0\0\0\0\0\0\0"===t?i:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},693:function(t,e,n){var r=e;function o(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function i(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(537),r.base64=n(419),r.EventEmitter=n(211),r.float=n(945),r.inquire=n(199),r.utf8=n(997),r.pool=n(662),r.LongBits=n(630),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==_typeof(t)},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=_typeof(n)||0<(Array.isArray(n)?n:Object.keys(n)).length)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){return t=r.LongBits.fromHash(t),r.Long?r.Long.fromBits(t.lo,t.hi,e):t.toNumber(Boolean(e))},r.merge=o,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;-1<n;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},173:function(t,e,n){t.exports=g;var r,o=n(693),i=o.LongBits,s=o.base64,a=o.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function l(){}function c(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function g(){this.len=0,this.head=new u(l,0,0),this.tail=this.head,this.states=null}function h(){return o.Buffer?function(){return(g.create=function(){return new r})()}:function(){return new g}}function d(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function p(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;127<t.lo;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function m(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}g.create=h(),g.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(g.alloc=o.pool(g.alloc,o.Array.prototype.subarray)),g.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},(f.prototype=Object.create(u.prototype)).fn=function(t,e,n){for(;127<t;)e[n++]=127&t|128,t>>>=7;e[n]=t},g.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},g.prototype.int32=function(t){return t<0?this._push(p,10,i.fromNumber(t)):this.uint32(t)},g.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},g.prototype.int64=g.prototype.uint64=function(t){return t=i.from(t),this._push(p,t.length(),t)},g.prototype.sint64=function(t){return t=i.from(t).zzEncode(),this._push(p,t.length(),t)},g.prototype.bool=function(t){return this._push(d,1,t?1:0)},g.prototype.sfixed32=g.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},g.prototype.sfixed64=g.prototype.fixed64=function(t){return t=i.from(t),this._push(m,4,t.lo)._push(m,4,t.hi)},g.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},g.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var b=o.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};g.prototype.bytes=function(t){var e,n=t.length>>>0;return n?(o.isString(t)&&(e=g.alloc(n=s.length(t)),s.decode(t,e,0),t=e),this.uint32(n)._push(b,n,t)):this._push(d,1,0)},g.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(d,1,0)},g.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new u(l,0,0),this.len=0,this},g.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(l,0,0),this.len=0),this},g.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},g.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},g._configure=function(t){r=t,g.create=h(),r._configure()}},155:function(t,e,n){t.exports=i;var r=n(173);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(693);function i(){r.call(this)}function s(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},i.prototype.bytes=function(t){var e=(t=o.isString(t)?o._Buffer_from(t,"base64"):t).length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(s,e,t),this},i._configure()}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];return void 0!==e||(e=__webpack_module_cache__[t]={exports:{}},__webpack_modules__[t].call(e.exports,e,e.exports,__webpack_require__)),e.exports}__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==("undefined"===typeof globalThis?"undefined":_typeof(globalThis)))return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==("undefined"===typeof window?"undefined":_typeof(window)))return window}}(),__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var __webpack_exports__={};return function(){__webpack_require__.d(__webpack_exports__,{default:function(){return mu}});var t=0,e=1,n=2,r=3,o=4,i=5,s=6,a=7,u=8,l=9,c=10,g=11,h=12,d=13,f=14,p=15,m=20,b=21,y=22,w="online",_="offline",v="updateChat",S="receivedMessage",k="notificationMsg",L="deleteMsg",O="errorType",T="syncChatsChange",I="syncMsgs",E="wsStateChange",N="im_onMessage_",C="im_onWebsocket_",B="login",j="logout",A="getConversationList",U="getConversationProvider",P="updateConversationProvider",x="deleteConversation",M="getMessageList",D="setMessageRead",R="sendMessage",z="resendMessage",K="revokeMessage",F="getCosKey",q="getAllUnreadCount",G={NET_STATE_DISCONNECTED:"disconnect",NET_STATE_CONNECTING:"connecting",NET_STATE_CONNECTED:"connected"},V={NOT_LOGIN:"notLogin",LOGGING:"logging",LOGGED:"logged"},H={NOT_SYNC_CHAT:"NotSyncChat",SYNC_CHAT_START:"syncChatStart",SYNC_CHAT_SUCCESS:"syncChatSuccess",SYNC_CHAT_FAILED:"syncChatFailed"},Z={BFIM_MSG_STATUS_SENDING:0,BFIM_MSG_STATUS_SEND_SUCC:1,BFIM_MSG_STATUS_SEND_FAIL:2},J=0,Y=1,W=2,$={SUCCESS:0,ERROR:1,TOKEN_NOT_FOUND:4,NO_REGISTER:9,SIGNED:11,KICKED_OUT:2008,TIMEOUT:3e3,DISCONNECT:3001,CONNECTERR:3002,CONNECTING:3003,EXITING:3333,LOGGING:3334,DBERR:6005,NOLOGIN:6014,PARAMETER:9001},X={Text:0,Img:1,Audio:2,Video:3,Location:4,Card:5,Revoked:31,Matched:33,Recall:64,Unmatch:65,SysDelete:66,Deleted:67,Notification:100},Q=0,tt=1,et=2,nt=3,rt={CONNECT_CHANGE:"onConnectChange",LOGIN:"onLogin",LOGOUT:"onLogout",SYNC_CHATS_CHANGE:"onSyncChatsChange",MESSAGE_RECEIVED:"onReceivedMessage",MESSAGE_REVOKED:"onRevokedMessage",MESSAGE_NOTIFICATION:"onNotificationMessage",MESSAGE_DELETE:"onDeleteMessage",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",KICKED_OUT:"onKickedOut",TOKEN_NOT_FOUND:"onTokenNotFound"},ot="WsStateChange",it="SyncChatsChange",st="SyncMsgs",at="ImLogin",ut="ImLogout",lt="ChatItemUpdate",ct="ResultError",gt="ChatR",ht=__webpack_require__(128);function dt(t){for(var e=t.length;0<=--e;)t[e]=0}var ft=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),pt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),mt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yt=new Array(576);dt(yt);var wt=new Array(60);dt(wt);var _t=new Array(512);dt(_t);var vt=new Array(256);dt(vt);var St=new Array(29);dt(St);var kt,Lt,Ot,Tt=new Array(30);function It(t,e,n,r,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=t&&t.length}function Et(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}dt(Tt);var Nt=function(t){return t<256?_t[t]:_t[256+(t>>>7)]},Ct=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},Bt=function(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,Ct(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},jt=function(t,e,n){Bt(t,n[2*e],n[2*e+1])},At=function(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1},Ut=function(t,e,n){var r,o,i=new Array(16),s=0;for(r=1;r<=15;r++)i[r]=s=s+n[r-1]<<1;for(o=0;o<=e;o++){var a=t[2*o+1];0!==a&&(t[2*o]=At(i[a]++,a))}},Pt=function(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},xt=function(t){8<t.bi_valid?Ct(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Mt=function(t,e,n,r){var o=2*e,i=2*n;return t[o]<t[i]||t[o]===t[i]&&r[e]<=r[n]},Dt=function(t,e,n){for(var r=t.heap[n],o=n<<1;o<=t.heap_len&&(o<t.heap_len&&Mt(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!Mt(e,r,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=r},Rt=function(t,e,n){var r,o,i,s,a=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0==r?jt(t,o,e):(i=vt[o],jt(t,i+256+1,e),s=ft[i],0!==s&&(o-=St[i],Bt(t,o,s)),r--,i=Nt(r),jt(t,i,n),s=pt[i],0!==s&&(r-=Tt[i],Bt(t,r,s))),a<t.last_lit;);jt(t,256,e)},zt=function(t,e){var n,r,o,i=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==i[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):i[2*n+1]=0;for(;t.heap_len<2;)o=t.heap[++t.heap_len]=l<2?++l:0,i[2*o]=1,t.depth[o]=0,t.opt_len--,a&&(t.static_len-=s[2*o+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)Dt(t,i,n);for(o=u;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Dt(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,i[2*o]=i[2*n]+i[2*r],t.depth[o]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,i[2*n+1]=i[2*r+1]=o,t.heap[1]=o++,Dt(t,i,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,o,i,s,a,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,g=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,f=e.stat_desc.max_length,p=0;for(s=0;s<=15;s++)t.bl_count[s]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)o=t.heap[r],s=u[2*u[2*o+1]+1]+1,s>f&&(s=f,p++),u[2*o+1]=s,o>l||(t.bl_count[s]++,a=0,o>=d&&(a=h[o-d]),n=u[2*o],t.opt_len+=n*(s+a),g&&(t.static_len+=n*(c[2*o+1]+a)));if(0!==p){do{for(s=f-1;0===t.bl_count[s];)s--}while(t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[f]--,p-=2,0<p);for(s=f;0!==s;s--)for(o=t.bl_count[s];0!==o;)l<(i=t.heap[--r])||(u[2*i+1]!==s&&(t.opt_len+=(s-u[2*i+1])*u[2*i],u[2*i+1]=s),o--)}}(t,e),Ut(i,l,t.bl_count)},Kt=function(t,e,n){var r,o,i=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)o=s,s=e[2*(r+1)+1],++a<u&&o===s||(a<l?t.bl_tree[2*o]+=a:0!==o?(o!==i&&t.bl_tree[2*o]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,i=o,l=0===s?(u=138,3):o===s?(u=6,3):(u=7,4))},Ft=function(t,e,n){var r,o,i=-1,s=e[1],a=0,u=7,l=4;for(0===s&&(u=138,l=3),r=0;r<=n;r++)if(o=s,s=e[2*(r+1)+1],!(++a<u&&o===s)){if(a<l)for(;jt(t,o,t.bl_tree),0!=--a;);else 0!==o?(o!==i&&(jt(t,o,t.bl_tree),a--),jt(t,16,t.bl_tree),Bt(t,a-3,2)):a<=10?(jt(t,17,t.bl_tree),Bt(t,a-3,3)):(jt(t,18,t.bl_tree),Bt(t,a-11,7));a=0,i=o,l=0===s?(u=138,3):o===s?(u=6,3):(u=7,4)}},qt=!1,Gt=function(t,e,n,r){Bt(t,0+(r?1:0),3),r=t,t=e,e=n,n=!0,xt(r),n&&(Ct(r,e),Ct(r,~e)),r.pending_buf.set(r.window.subarray(t,t+e),r.pending),r.pending+=e},Vt={_tr_init:function(t){qt||(function(){var t,e,n,r,o,i=new Array(16);for(n=0,r=0;r<28;r++)for(St[r]=n,t=0;t<1<<ft[r];t++)vt[n++]=r;for(vt[n-1]=r,o=0,r=0;r<16;r++)for(Tt[r]=o,t=0;t<1<<pt[r];t++)_t[o++]=r;for(o>>=7;r<30;r++)for(Tt[r]=o<<7,t=0;t<1<<pt[r]-7;t++)_t[256+o++]=r;for(e=0;e<=15;e++)i[e]=0;for(t=0;t<=143;)yt[2*t+1]=8,t++,i[8]++;for(;t<=255;)yt[2*t+1]=9,t++,i[9]++;for(;t<=279;)yt[2*t+1]=7,t++,i[7]++;for(;t<=287;)yt[2*t+1]=8,t++,i[8]++;for(Ut(yt,287,i),t=0;t<30;t++)wt[2*t+1]=5,wt[2*t]=At(t,5);kt=new It(yt,ft,257,286,15),Lt=new It(wt,pt,0,30,15),Ot=new It(new Array(0),mt,0,19,7)}(),qt=!0),t.l_desc=new Et(t.dyn_ltree,kt),t.d_desc=new Et(t.dyn_dtree,Lt),t.bl_desc=new Et(t.bl_tree,Ot),t.bi_buf=0,t.bi_valid=0,Pt(t)},_tr_stored_block:Gt,_tr_flush_block:function(t,e,n,r){var o,i,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),zt(t,t.l_desc),zt(t,t.d_desc),s=function(t){var e;for(Kt(t,t.dyn_ltree,t.l_desc.max_code),Kt(t,t.dyn_dtree,t.d_desc.max_code),zt(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*bt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),o=t.opt_len+3+7>>>3,i=t.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==e?Gt(t,e,n,r):4===t.strategy||i===o?(Bt(t,2+(r?1:0),3),Rt(t,yt,wt)):(Bt(t,4+(r?1:0),3),function(t,e,n,r){var o;for(Bt(t,e-257,5),Bt(t,n-1,5),Bt(t,r-4,4),o=0;o<r;o++)Bt(t,t.bl_tree[2*bt[o]+1],3);Ft(t,t.dyn_ltree,e-1),Ft(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Rt(t,t.dyn_ltree,t.dyn_dtree)),Pt(t),r&&xt(t)},_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(vt[n]+256+1)]++,t.dyn_dtree[2*Nt(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){Bt(t,2,3),jt(t,256,yt),16===(t=t).bi_valid?(Ct(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},Ht=function(t,e,n,r){for(var o=65535&t|0,i=t>>>16&65535|0,s=0;0!==n;){for(s=2e3<n?2e3:n,n-=s;o=o+e[r++]|0,i=i+o|0,--s;);o%=65521,i%=65521}return o|i<<16|0},Zt=new Uint32Array(function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}()),Jt=function(t,e,n,r){var o=Zt,i=r+n;t^=-1;for(var s=r;s<i;s++)t=t>>>8^o[255&(t^e[s])];return-1^t},Yt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},$t=Vt,Xt=$t._tr_init,Qt=$t._tr_stored_block,te=$t._tr_flush_block,ee=$t._tr_tally,ne=$t._tr_align,re=Wt,oe=re.Z_NO_FLUSH,ie=re.Z_PARTIAL_FLUSH,se=re.Z_FULL_FLUSH,ae=re.Z_FINISH,ue=re.Z_BLOCK,le=re.Z_OK,ce=re.Z_STREAM_END,ge=re.Z_STREAM_ERROR,he=re.Z_DATA_ERROR,de=re.Z_BUF_ERROR,fe=re.Z_DEFAULT_COMPRESSION,pe=re.Z_FILTERED,me=re.Z_HUFFMAN_ONLY,be=re.Z_RLE,ye=re.Z_FIXED,we=(re.Z_DEFAULT_STRATEGY,re.Z_UNKNOWN),_e=re.Z_DEFLATED,ve=258,Se=262,ke=function(t,e){return t.msg=Yt[e],e},Le=function(t){return(t<<1)-(4<t?9:0)},Oe=function(t){for(var e=t.length;0<=--e;)t[e]=0},Te=function(t,e,n){return(e<<t.hash_shift^n)&t.hash_mask},Ie=function(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},Ee=function(t,e){te(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Ie(t.strm)},Ne=function(t,e){t.pending_buf[t.pending++]=e},Ce=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Be=function(t,e){var n,r,o=t.max_chain_length,i=t.strstart,s=t.prev_length,a=t.nice_match,u=t.strstart>t.w_size-Se?t.strstart-(t.w_size-Se):0,l=t.window,c=t.w_mask,g=t.prev,h=t.strstart+ve,d=l[i+s-1],f=l[i+s];t.prev_length>=t.good_match&&(o>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,l[n+s]===f&&l[n+s-1]===d&&l[n]===l[i]&&l[++n]===l[i+1]){for(i+=2,n++;l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<h;);if(r=ve-(h-i),i=h-ve,r>s){if(t.match_start=e,(s=r)>=a)break;d=l[i+s-1],f=l[i+s]}}}while((e=g[e&c])>u&&0!=--o);return s<=t.lookahead?s:t.lookahead},je=function(t){var e,n,r,o,i,s=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-Se)){for(t.window.set(t.window.subarray(s,s+s),0),t.match_start-=s,t.strstart-=s,t.block_start-=s,n=t.hash_size,e=n;r=t.head[--e],t.head[e]=r>=s?r-s:0,--n;);for(n=s,e=n;r=t.prev[--e],t.prev[e]=r>=s?r-s:0,--n;);o+=s}if(0===t.strm.avail_in)break;if(n=function(t,e,n,r){var o=t.avail_in;return o>r&&(o=r),0===o?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),n),1===t.state.wrap?t.adler=Ht(t.adler,e,o,n):2===t.state.wrap&&(t.adler=Jt(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)}(t.strm,t.window,t.strstart+t.lookahead,o),t.lookahead+=n,3<=t.lookahead+t.insert)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=Te(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=Te(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Se&&0!==t.strm.avail_in)},Ae=function(t,e){for(var n,r;;){if(t.lookahead<Se){if(je(t),t.lookahead<Se&&e===oe)return 1;if(0===t.lookahead)break}if(n=0,3<=t.lookahead&&(t.ins_h=Te(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Se&&(t.match_length=Be(t,n)),3<=t.match_length)if(r=ee(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&3<=t.lookahead){for(t.match_length--;t.strstart++,t.ins_h=Te(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=Te(t,t.ins_h,t.window[t.strstart+1]);else r=ee(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(Ee(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===ae?(Ee(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ee(t,!1),0===t.strm.avail_out)?1:2},Ue=function(t,e){for(var n,r,o;;){if(t.lookahead<Se){if(je(t),t.lookahead<Se&&e===oe)return 1;if(0===t.lookahead)break}if(n=0,3<=t.lookahead&&(t.ins_h=Te(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Se&&(t.match_length=Be(t,n),t.match_length<=5&&(t.strategy===pe||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),3<=t.prev_length&&t.match_length<=t.prev_length){for(o=t.strstart+t.lookahead-3,r=ee(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=o&&(t.ins_h=Te(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(Ee(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=ee(t,0,t.window[t.strstart-1]),r&&Ee(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=ee(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===ae?(Ee(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ee(t,!1),0===t.strm.avail_out)?1:2};function Pe(t,e,n,r,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=o}var xe=[new Pe(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(je(t),0===t.lookahead&&e===oe)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,Ee(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Se&&(Ee(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ae?(Ee(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(Ee(t,!1),t.strm.avail_out),1)})),new Pe(4,4,8,4,Ae),new Pe(4,5,16,8,Ae),new Pe(4,6,32,32,Ae),new Pe(4,4,16,16,Ue),new Pe(8,16,32,32,Ue),new Pe(8,16,128,128,Ue),new Pe(8,32,128,256,Ue),new Pe(32,128,258,1024,Ue),new Pe(32,258,258,4096,Ue)];function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_e,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var De=function(t){if(!t||!t.state)return ke(t,ge);t.total_in=t.total_out=0,t.data_type=we;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=oe,Xt(e),le},Re=function(t){var e=De(t);return e===le&&((t=t.state).window_size=2*t.w_size,Oe(t.head),t.max_lazy_match=xe[t.level].max_lazy,t.good_match=xe[t.level].good_length,t.nice_match=xe[t.level].nice_length,t.max_chain_length=xe[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),e},ze=function(t,e,n,r,o,i){if(!t)return ge;var s=1;if(e===fe&&(e=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||n!==_e||r<8||15<r||e<0||9<e||i<0||i>ye)return ke(t,ge);8===r&&(r=9);var a=new Me;return t.state=a,a.strm=t,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=o+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<o+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=+a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=e,a.strategy=i,a.method=n,Re(t)},Ke=ze,Fe=function(t,e){return t&&t.state&&2===t.state.wrap?(t.state.gzhead=e,le):ge},qe=function(t,e){var n,r;if(!t||!t.state||e>ue||e<0)return t?ke(t,ge):ge;var o=t.state;if(!t.output||!t.input&&0!==t.avail_in||666===o.status&&e!==ae)return ke(t,0===t.avail_out?de:ge);o.strm=t;var i=o.last_flush;if(o.last_flush=e,42===o.status)if(2===o.wrap)t.adler=0,Ne(o,31),Ne(o,139),Ne(o,8),o.gzhead?(Ne(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),Ne(o,255&o.gzhead.time),Ne(o,o.gzhead.time>>8&255),Ne(o,o.gzhead.time>>16&255),Ne(o,o.gzhead.time>>24&255),Ne(o,9===o.level?2:o.strategy>=me||o.level<2?4:0),Ne(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(Ne(o,255&o.gzhead.extra.length),Ne(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=Jt(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=69):(Ne(o,0),Ne(o,0),Ne(o,0),Ne(o,0),Ne(o,0),Ne(o,9===o.level?2:o.strategy>=me||o.level<2?4:0),Ne(o,3),o.status=113);else{var s=_e+(o.w_bits-8<<4)<<8,a=-1;a=o.strategy>=me||o.level<2?0:o.level<6?1:6===o.level?2:3,s|=a<<6,0!==o.strstart&&(s|=32),s+=31-s%31,o.status=113,Ce(o,s),0!==o.strstart&&(Ce(o,t.adler>>>16),Ce(o,65535&t.adler)),t.adler=1}if(69===o.status)if(o.gzhead.extra){for(n=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),Ie(t),n=o.pending,o.pending!==o.pending_buf_size));)Ne(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=73)}else o.status=73;if(73===o.status)if(o.gzhead.name){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),Ie(t),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}}while(r=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,Ne(o,r),0!==r);o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.gzindex=0,o.status=91)}else o.status=91;if(91===o.status)if(o.gzhead.comment){n=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),Ie(t),n=o.pending,o.pending===o.pending_buf_size)){r=1;break}}while(r=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,Ne(o,r),0!==r);o.gzhead.hcrc&&o.pending>n&&(t.adler=Jt(t.adler,o.pending_buf,o.pending-n,n)),0===r&&(o.status=103)}else o.status=103;if(103===o.status&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&Ie(t),o.pending+2<=o.pending_buf_size&&(Ne(o,255&t.adler),Ne(o,t.adler>>8&255),t.adler=0,o.status=113)):o.status=113),0!==o.pending){if(Ie(t),0===t.avail_out)return o.last_flush=-1,le}else if(0===t.avail_in&&Le(e)<=Le(i)&&e!==ae)return ke(t,de);if(666===o.status&&0!==t.avail_in)return ke(t,de);if(0!==t.avail_in||0!==o.lookahead||e!==oe&&666!==o.status){if(3!==(i=o.strategy===me?function(t,e){for(var n;;){if(0===t.lookahead&&(je(t),0===t.lookahead)){if(e===oe)return 1;break}if(t.match_length=0,n=ee(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(Ee(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ae?(Ee(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ee(t,!1),0===t.strm.avail_out)?1:2}(o,e):o.strategy===be?function(t,e){for(var n,r,o,i,s=t.window;;){if(t.lookahead<=ve){if(je(t),t.lookahead<=ve&&e===oe)return 1;if(0===t.lookahead)break}if(t.match_length=0,3<=t.lookahead&&0<t.strstart&&(o=t.strstart-1,(r=s[o])===s[++o]&&r===s[++o]&&r===s[++o])){for(i=t.strstart+ve;r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&r===s[++o]&&o<i;);t.match_length=ve-(i-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(3<=t.match_length?(n=ee(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ee(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(Ee(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===ae?(Ee(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(Ee(t,!1),0===t.strm.avail_out)?1:2}(o,e):xe[o.level].func(o,e))&&4!==i||(o.status=666),1===i||3===i)return 0===t.avail_out&&(o.last_flush=-1),le;if(2===i&&(e===ie?ne(o):e!==ue&&(Qt(o,0,0,!1),e===se&&(Oe(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),Ie(t),0===t.avail_out))return o.last_flush=-1,le}return e!==ae?le:o.wrap<=0?ce:(2===o.wrap?(Ne(o,255&t.adler),Ne(o,t.adler>>8&255),Ne(o,t.adler>>16&255),Ne(o,t.adler>>24&255),Ne(o,255&t.total_in),Ne(o,t.total_in>>8&255),Ne(o,t.total_in>>16&255),Ne(o,t.total_in>>24&255)):(Ce(o,t.adler>>>16),Ce(o,65535&t.adler)),Ie(t),0<o.wrap&&(o.wrap=-o.wrap),0!==o.pending?le:ce)},Ge=function(t){if(!t||!t.state)return ge;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?ke(t,ge):(t.state=null,113===e?ke(t,he):le)},Ve=function(t,e){var n=e.length;if(!t||!t.state)return ge;var r=t.state,o=r.wrap;if(2===o||1===o&&42!==r.status||r.lookahead)return ge;if(1===o&&(t.adler=Ht(t.adler,e,n,0)),r.wrap=0,n>=r.w_size){0===o&&(Oe(r.head),r.strstart=0,r.block_start=0,r.insert=0);var i=new Uint8Array(r.w_size);i.set(e.subarray(n-r.w_size,n),0),e=i,n=r.w_size}var s=t.avail_in,a=t.next_in,u=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,je(r);3<=r.lookahead;){for(var l=r.strstart,c=r.lookahead-2;r.ins_h=Te(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++,--c;);r.strstart=l,r.lookahead=2,je(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=a,t.input=u,t.avail_in=s,r.wrap=o,le},He=function(t){for(var e,n,r=Array.prototype.slice.call(arguments,1);r.length;){var o=r.shift();if(o){if("object"!=_typeof(o))throw new TypeError(o+"must be non-object");for(var i in o)e=o,n=i,Object.prototype.hasOwnProperty.call(e,n)&&(t[i]=o[i])}}return t},Ze=function(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=t[n].length;for(var o=new Uint8Array(e),i=0,s=0,a=t.length;i<a;i++){var u=t[i];o.set(u,s),s+=u.length}return o},Je=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(dt){Je=!1}for(var Ye=new Uint8Array(256),We=0;We<256;We++)Ye[We]=252<=We?6:248<=We?5:240<=We?4:224<=We?3:192<=We?2:1;Ye[254]=Ye[254]=1;var $e=function(t){var e,n,r,o,i,s=t.length,a=0;for(o=0;o<s;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=t.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),i=0,o=0;i<a;o++)n=t.charCodeAt(o),55296==(64512&n)&&o+1<s&&(r=t.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?e[i++]=n:(n<2048?e[i++]=192|n>>>6:(n<65536?e[i++]=224|n>>>12:(e[i++]=240|n>>>18,e[i++]=128|n>>>12&63),e[i++]=128|n>>>6&63),e[i++]=128|63&n);return e},Xe=function(t,e){var n,r,o=e||t.length,i=new Array(2*o);for(r=0,n=0;n<o;){var s=t[n++];if(s<128)i[r++]=s;else{var a=Ye[s];if(4<a)i[r++]=65533,n+=a-1;else{for(s&=2===a?31:3===a?15:7;1<a&&n<o;)s=s<<6|63&t[n++],a--;1<a?i[r++]=65533:s<65536?i[r++]=s:(s-=65536,i[r++]=55296|s>>10&1023,i[r++]=56320|1023&s)}}}return function(t,e){if(e<65534&&t.subarray&&Je)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));for(var n="",r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n}(i,r)},Qe=function(t,e){for(var n=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=n&&128==(192&t[n]);)n--;return!(n<0)&&0!==n&&n+Ye[t[n]]>e?n:e},tn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,nn=Wt,rn=nn.Z_NO_FLUSH,on=nn.Z_SYNC_FLUSH,sn=nn.Z_FULL_FLUSH,an=nn.Z_FINISH,un=nn.Z_OK,ln=nn.Z_STREAM_END,cn=nn.Z_DEFAULT_COMPRESSION,gn=nn.Z_DEFAULT_STRATEGY,hn=nn.Z_DEFLATED;function dn(t){this.options=He({level:cn,method:hn,chunkSize:16384,windowBits:15,memLevel:8,strategy:gn},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tn,this.strm.avail_out=0;var n=Ke(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==un)throw new Error(Yt[n]);if(e.header&&Fe(this.strm,e.header),e.dictionary){var r;if(r="string"==typeof e.dictionary?$e(e.dictionary):"[object ArrayBuffer]"===en.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=Ve(this.strm,r),n!==un)throw new Error(Yt[n]);this._dict_set=!0}}function fn(t,e){var n=new dn(e);if(n.push(t,!0),n.err)throw n.msg||Yt[n.err];return n.result}dn.prototype.push=function(t,e){var n,r,o=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=e===~~e?e:!0===e?an:rn,"string"==typeof t?o.input=$e(t):"[object ArrayBuffer]"===en.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;;)if(0===o.avail_out&&(o.output=new Uint8Array(i),o.next_out=0,o.avail_out=i),(r===on||r===sn)&&o.avail_out<=6)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else{if(qe(o,r)===ln)return 0<o.next_out&&this.onData(o.output.subarray(0,o.next_out)),n=Ge(this.strm),this.onEnd(n),this.ended=!0,n===un;if(0!==o.avail_out){if(0<r&&0<o.next_out)this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;else if(0===o.avail_in)break}else this.onData(o.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===un&&(this.result=Ze(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var pn={Deflate:dn,deflate:fn,deflateRaw:function(t,e){return(e=e||{}).raw=!0,fn(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,fn(t,e)},constants:Wt},mn=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),bn=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),yn=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),wn=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),_n=function(t,e,n,r,o,i,s,a){var u,l,c,g,h,d,f,p,m,b=a.bits,y=0,w=0,_=0,v=0,S=0,k=0,L=0,O=0,T=0,I=0,E=null,N=0,C=new Uint16Array(16),B=new Uint16Array(16),j=null,A=0;for(y=0;y<=15;y++)C[y]=0;for(w=0;w<r;w++)C[e[n+w]]++;for(S=b,v=15;1<=v&&0===C[v];v--);if(S>v&&(S=v),0===v)return o[i++]=20971520,o[i++]=20971520,a.bits=1,0;for(_=1;_<v&&0===C[_];_++);for(S<_&&(S=_),O=1,y=1;y<=15;y++)if(O<<=1,O-=C[y],O<0)return-1;if(0<O&&(0===t||1!==v))return-1;for(B[1]=0,y=1;y<15;y++)B[y+1]=B[y]+C[y];for(w=0;w<r;w++)0!==e[n+w]&&(s[B[e[n+w]]++]=w);if(d=0===t?(E=j=s,19):1===t?(E=mn,N-=257,j=bn,A-=257,256):(E=yn,j=wn,-1),I=0,w=0,y=_,h=i,k=S,L=0,g=-1,T=1<<S,u=T-1,1===t&&852<T||2===t&&592<T)return 1;for(;;){for(f=y-L,m=s[w]<d?(p=0,s[w]):s[w]>d?(p=j[A+s[w]],E[N+s[w]]):(p=96,0),l=1<<y-L,c=1<<k,_=c;c-=l,o[h+(I>>L)+c]=f<<24|p<<16|m|0,0!==c;);for(l=1<<y-1;I&l;)l>>=1;if(0!==l?(I&=l-1,I+=l):I=0,w++,0==--C[y]){if(y===v)break;y=e[n+s[w]]}if(y>S&&(I&u)!==g){for(0===L&&(L=S),h+=_,k=y-L,O=1<<k;k+L<v&&(O-=C[k+L],!(O<=0));)k++,O<<=1;if(T+=1<<k,1===t&&852<T||2===t&&592<T)return 1;g=I&u,o[g]=S<<24|k<<16|h-i|0}}return 0!==I&&(o[h+I]=y-L<<24|64<<16|0),a.bits=S,0},vn=Wt,Sn=vn.Z_FINISH,kn=vn.Z_BLOCK,Ln=vn.Z_TREES,On=vn.Z_OK,Tn=vn.Z_STREAM_END,In=vn.Z_NEED_DICT,En=vn.Z_STREAM_ERROR,Nn=vn.Z_DATA_ERROR,Cn=vn.Z_MEM_ERROR,Bn=vn.Z_BUF_ERROR,jn=vn.Z_DEFLATED,An=function(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)};function Un(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var Pn,xn,Mn=function(t){if(!t||!t.state)return En;var e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,On},Dn=function(t){if(!t||!t.state)return En;var e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,Mn(t)},Rn=function(t,e){var n;if(!t||!t.state)return En;var r=t.state;return e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?En:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,Dn(t))},zn=function(t,e){if(!t)return En;var n=new Un;return t.state=n,n.window=null,(e=Rn(t,e))!==On&&(t.state=null),e},Kn=!0,Fn=function(t,e,n,r){var o,i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(e.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(e.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(e.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0},qn=Dn,Gn=zn,Vn=function(t,e){var n,r,o,i,s,a,u,l,c,g,h,d,f,p,m,b,y,w,_,v,S,k,L,O,T=0,I=new Uint8Array(4),E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return En;n=t.state,12===n.mode&&(n.mode=13),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,l=n.hold,c=n.bits,g=a,h=u,k=On;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(2&n.wrap&&35615===l){n.check=0,I[0]=255&l,I[1]=l>>>8&255,n.check=Jt(n.check,I,2,0),l=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",n.mode=30;break}if((15&l)!==jn){t.msg="unknown compression method",n.mode=30;break}if(l>>>=4,c-=4,S=8+(15&l),0===n.wbits)n.wbits=S;else if(S>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<n.wbits,t.adler=n.check=1,n.mode=512&l?10:12,l=0,c=0;break;case 2:for(;c<16;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(n.flags=l,(255&n.flags)!==jn){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=l>>8&1),512&n.flags&&(I[0]=255&l,I[1]=l>>>8&255,n.check=Jt(n.check,I,2,0)),l=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.head&&(n.head.time=l),512&n.flags&&(I[0]=255&l,I[1]=l>>>8&255,I[2]=l>>>16&255,I[3]=l>>>24&255,n.check=Jt(n.check,I,4,0)),l=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&n.flags&&(I[0]=255&l,I[1]=l>>>8&255,n.check=Jt(n.check,I,2,0)),l=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.length=l,n.head&&(n.head.extra_len=l),512&n.flags&&(I[0]=255&l,I[1]=l>>>8&255,n.check=Jt(n.check,I,2,0)),l=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d=n.length,d>a&&(d=a),d&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+d),S)),512&n.flags&&(n.check=Jt(n.check,r,d,i)),a-=d,i+=d,n.length-=d),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;for(d=0;S=r[i+d++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S)),S&&d<a;);if(512&n.flags&&(n.check=Jt(n.check,r,d,i)),a-=d,i+=d,S)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;for(d=0;S=r[i+d++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S)),S&&d<a;);if(512&n.flags&&(n.check=Jt(n.check,r,d,i)),a-=d,i+=d,S)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(l!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}l=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}t.adler=n.check=An(l),l=0,c=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=l,n.bits=c,In;t.adler=n.check=1,n.mode=12;case 12:if(e===kn||e===Ln)break t;case 13:if(n.last){l>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}switch(n.last=1&l,l>>>=1,--c,3&l){case 0:n.mode=14;break;case 1:if(function(t){if(Kn){Pn=new Int32Array(512),xn=new Int32Array(32);for(var e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(_n(1,t.lens,0,288,Pn,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;_n(2,t.lens,0,32,xn,0,t.work,{bits:5}),Kn=!1}t.lencode=Pn,t.lenbits=9,t.distcode=xn,t.distbits=5}(n),n.mode=20,e!==Ln)break;l>>>=2,c-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}l>>>=2,c-=2;break;case 14:for(l>>>=7&c,c-=7&c;c<32;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&l,l=0,c=0,n.mode=15,e===Ln)break t;case 15:n.mode=16;case 16:if(d=n.length,d){if(d>a&&(d=a),d>u&&(d=u),0===d)break t;o.set(r.subarray(i,i+d),s),a-=d,i+=d,u-=d,s+=d,n.length-=d;break}n.mode=12;break;case 17:for(;c<14;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(n.nlen=257+(31&l),l>>>=5,c-=5,n.ndist=1+(31&l),l>>>=5,c-=5,n.ncode=4+(15&l),l>>>=4,c-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.lens[E[n.have++]]=7&l,l>>>=3,c-=3}for(;n.have<19;)n.lens[E[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},k=_n(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[l&(1<<n.lenbits)-1],m=T>>>24,b=T>>>16&255,y=65535&T,!(m<=c);){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(y<16)l>>>=m,c-=m,n.lens[n.have++]=y;else{if(16===y){for(O=m+2;c<O;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(l>>>=m,c-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}S=n.lens[n.have-1],d=3+(3&l),l>>>=2,c-=2}else if(17===y){for(O=m+3;c<O;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}l>>>=m,c-=m,S=0,d=3+(7&l),l>>>=3,c-=3}else{for(O=m+7;c<O;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}l>>>=m,c-=m,S=0,d=11+(127&l),l>>>=7,c-=7}if(n.have+d>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;d--;)n.lens[n.have++]=S}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},k=_n(1,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},k=_n(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,e===Ln)break t;case 20:n.mode=21;case 21:if(6<=a&&258<=u){t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=l,n.bits=c,function(t,e){var n,r,o,i,s,a,u,l,c,g,h,d,f,p,m,b,y,w,_,v,S,k,L,O,T=t.state;n=t.next_in,L=t.input,r=n+(t.avail_in-5),m=t.next_out,O=t.output,o=m-(e-t.avail_out),i=m+(t.avail_out-257),s=T.dmax,a=T.wsize,u=T.whave,l=T.wnext,c=T.window,b=T.hold,y=T.bits,g=T.lencode,h=T.distcode,d=(1<<T.lenbits)-1,f=(1<<T.distbits)-1;e:do{y<15&&(b+=L[n++]<<y,y+=8,b+=L[n++]<<y,y+=8),w=g[b&d];n:for(;;){if(_=w>>>24,b>>>=_,y-=_,_=w>>>16&255,0===_)O[m++]=65535&w;else{if(!(16&_)){if(0==(64&_)){w=g[(65535&w)+(b&(1<<_)-1)];continue n}if(32&_){T.mode=12;break e}t.msg="invalid literal/length code",T.mode=30;break e}v=65535&w,_&=15,_&&(y<_&&(b+=L[n++]<<y,y+=8),v+=b&(1<<_)-1,b>>>=_,y-=_),y<15&&(b+=L[n++]<<y,y+=8,b+=L[n++]<<y,y+=8),w=h[b&f];r:for(;;){if(_=w>>>24,b>>>=_,y-=_,_=w>>>16&255,!(16&_)){if(0==(64&_)){w=h[(65535&w)+(b&(1<<_)-1)];continue r}t.msg="invalid distance code",T.mode=30;break e}if(p=65535&w,_&=15,y<_&&(b+=L[n++]<<y,y+=8,y<_&&(b+=L[n++]<<y,y+=8)),s<(p+=b&(1<<_)-1)){t.msg="invalid distance too far back",T.mode=30;break e}if(b>>>=_,y-=_,_=m-o,p>_){if(_=p-_,_>u&&T.sane){t.msg="invalid distance too far back",T.mode=30;break e}if(S=0,k=c,0===l){if(S+=a-_,_<v){for(v-=_;O[m++]=c[S++],--_;);S=m-p,k=O}}else if(l<_){if(S+=a+l-_,_-=l,_<v){for(v-=_;O[m++]=c[S++],--_;);if(S=0,l<v){for(_=l,v-=_;O[m++]=c[S++],--_;);S=m-p,k=O}}}else if(S+=l-_,_<v){for(v-=_;O[m++]=c[S++],--_;);S=m-p,k=O}for(;2<v;)O[m++]=k[S++],O[m++]=k[S++],O[m++]=k[S++],v-=3;v&&(O[m++]=k[S++],1<v&&(O[m++]=k[S++]))}else{for(S=m-p;O[m++]=O[S++],O[m++]=O[S++],O[m++]=O[S++],v-=3,2<v;);v&&(O[m++]=O[S++],1<v&&(O[m++]=O[S++]))}break}}break}}while(n<r&&m<i);v=y>>3,n-=v,y-=v<<3,b&=(1<<y)-1,t.next_in=n,t.next_out=m,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=m<i?i-m+257:257-(m-i),T.hold=b,T.bits=y}(t,h),s=t.next_out,o=t.output,u=t.avail_out,i=t.next_in,r=t.input,a=t.avail_in,l=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;T=n.lencode[l&(1<<n.lenbits)-1],m=T>>>24,b=T>>>16&255,y=65535&T,!(m<=c);){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(b&&0==(240&b)){for(w=m,_=b,v=y;T=n.lencode[v+((l&(1<<w+_)-1)>>w)],m=T>>>24,b=T>>>16&255,y=65535&T,!(w+m<=c);){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=m,c-=m,n.back+=m,n.length=y,0===b){n.mode=26;break}if(32&b){n.back=-1,n.mode=12;break}if(64&b){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&b,n.mode=22;case 22:if(n.extra){for(O=n.extra;c<O;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;T=n.distcode[l&(1<<n.distbits)-1],m=T>>>24,b=T>>>16&255,y=65535&T,!(m<=c);){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(0==(240&b)){for(w=m,_=b,v=y;T=n.distcode[v+((l&(1<<w+_)-1)>>w)],m=T>>>24,b=T>>>16&255,y=65535&T,!(w+m<=c);){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}l>>>=w,c-=w,n.back+=w}if(l>>>=m,c-=m,n.back+=m,64&b){t.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&b,n.mode=24;case 24:if(n.extra){for(O=n.extra;c<O;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===u)break t;if(d=h-u,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}f=d>n.wnext?(d-=n.wnext,n.wsize-d):n.wnext-d,d>n.length&&(d=n.length),p=n.window}else p=o,f=s-n.offset,d=n.length;for(d>u&&(d=u),u-=d,n.length-=d;o[s++]=p[f++],--d;);0===n.length&&(n.mode=21);break;case 26:if(0===u)break t;o[s++]=n.length,u--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===a)break t;a--,l|=r[i++]<<c,c+=8}if(h-=u,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=(n.flags?Jt:Ht)(n.check,o,h,s-h)),h=u,(n.flags?l:An(l))!==n.check){t.msg="incorrect data check",n.mode=30;break}l=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===a)break t;a--,l+=r[i++]<<c,c+=8}if(l!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}l=0,c=0}n.mode=29;case 29:k=Tn;break t;case 30:k=Nn;break t;case 31:return Cn;case 32:default:return En}return t.next_out=s,t.avail_out=u,t.next_in=i,t.avail_in=a,n.hold=l,n.bits=c,(n.wsize||h!==t.avail_out&&n.mode<30&&(n.mode<27||e!==Sn))&&Fn(t,t.output,t.next_out,h-t.avail_out),g-=t.avail_in,h-=t.avail_out,t.total_in+=g,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=(n.flags?Jt:Ht)(n.check,o,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==g&&0===h||e===Sn)&&k===On&&(k=Bn),k},Hn=function(t){if(!t||!t.state)return En;var e=t.state;return e.window&&(e.window=null),t.state=null,On},Zn=function(t,e){if(!t||!t.state)return En;var n=t.state;return 0==(2&n.wrap)?En:((n.head=e).done=!1,On)},Jn=function(t,e){var n,r=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?En:11===n.mode&&Ht(1,e,r,0)!==n.check?Nn:Fn(t,e,r,r)?(n.mode=31,Cn):(n.havedict=1,On)):En},Yn=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Wn=Object.prototype.toString,$n=Wt,Xn=$n.Z_NO_FLUSH,Qn=$n.Z_FINISH,tr=$n.Z_OK,er=$n.Z_STREAM_END,nr=$n.Z_NEED_DICT,rr=$n.Z_STREAM_ERROR,or=$n.Z_DATA_ERROR,ir=$n.Z_MEM_ERROR;function sr(t){this.options=He({chunkSize:65536,windowBits:15,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tn,this.strm.avail_out=0;var n=Gn(this.strm,e.windowBits);if(n!==tr)throw new Error(Yt[n]);if(this.header=new Yn,Zn(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=$e(e.dictionary):"[object ArrayBuffer]"===Wn.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=Jn(this.strm,e.dictionary),n!==tr)))throw new Error(Yt[n])}function ar(t,e){var n=new sr(e);if(n.push(t),n.err)throw n.msg||Yt[n.err];return n.result}sr.prototype.push=function(t,e){var n,r,o,i,s,a,u=this.strm,l=this.options.chunkSize,c=this.options.dictionary;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Qn:Xn,"[object ArrayBuffer]"===Wn.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;;){for(0===u.avail_out&&(u.output=new Uint8Array(l),u.next_out=0,u.avail_out=l),i=Vn(u,s),i===nr&&c&&(i=Jn(u,c),i===tr?i=Vn(u,s):i===or&&(i=nr));0<u.avail_in&&i===er&&0<u.state.wrap&&0!==t[u.next_in];)qn(u),i=Vn(u,s);switch(i){case rr:case or:case nr:case ir:return this.onEnd(i),!(this.ended=!0)}if(a=u.avail_out,u.next_out&&(0!==u.avail_out&&i!==er||("string"===this.options.to?(n=Qe(u.output,u.next_out),r=u.next_out-n,o=Xe(u.output,n),u.next_out=r,u.avail_out=l-r,r&&u.output.set(u.output.subarray(n,n+r),0),this.onData(o)):this.onData(u.output.length===u.next_out?u.output:u.output.subarray(0,u.next_out)))),i!==tr||0!==a){if(i===er)return i=Hn(this.strm),this.onEnd(i),this.ended=!0;if(0===u.avail_in)break}}return!0},sr.prototype.onData=function(t){this.chunks.push(t)},sr.prototype.onEnd=function(t){t===tr&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ze(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var ur=pn,lr=ur.Deflate,cr=ur.deflate,gr=ur.deflateRaw,hr=ur.gzip,dr={Inflate:sr,inflate:ar,inflateRaw:function(t,e){return(e=e||{}).raw=!0,ar(t,e)},ungzip:ar,constants:Wt},fr=(Vt=dr.Inflate,Ae=dr.inflate,Ue=dr.inflateRaw,pn=dr.ungzip,{Deflate:lr,deflate:cr,deflateRaw:gr,gzip:hr,Inflate:Vt,inflate:Ae,inflateRaw:Ue,ungzip:pn,constants:Wt}),pr=function(t,e){var n=t,r=0;return 10<t.length&&(r=1,n=fr.deflate(t,{level:5,to:"Uint8Array"})),new Uint8Array([e,r].concat(_toConsumableArray(n)))},mr=function(t,e,n){return ht.ImLogin.encode(ht.ImLogin.fromObject({sign:t,token:e,subApp:n})).finish()},br=function(t){return ht.ImLogout.encode(ht.ImLogout.fromObject({sign:t})).finish()},yr=function(t,e){return ht.GetChatList.encode(ht.GetChatList.fromObject({sign:t,updateTime:e})).finish()},wr=function(t,e){return ht.DelChat.encode(ht.DelChat.fromObject({sign:t,toUid:e})).finish()},_r=function(){return ht.Ping.encode(ht.Ping.fromObject({type:0})).finish()},vr=function(t){return t.offset=t.pageSize||20,ht.GetHistory.encode(ht.GetHistory.fromObject(t)).finish()},Sr=function(t){return ht.ChatS.encode(ht.ChatS.fromObject(t)).finish()},kr=function(t,e,n){return ht.Revoke.encode(ht.Revoke.fromObject({sign:t,toUid:e,msgId:n})).finish()},Lr=function(t,e){return ht.MsgRead.encode(ht.MsgRead.fromObject({sign:t,toUid:e})).finish()},Or=function(t,e){return ht.GetChat.encode(ht.GetChat.fromObject({sign:t,uid:e})).finish()},Tr=function(t){return ht.GetCosKey.encode(ht.GetCosKey.fromObject({sign:t})).finish()},Ir={ws:null,Global:null,heartRate:3e4,heartBeatTime:null,reconnectNum:0,closeState:!1,reconnectTimer:null,wsStatus:!1,chatListEvent:null,chatFormatList:[]},Er=[$.SUCCESS,$.TOKEN_NOT_FOUND,$.KICKED_OUT];function Nr(t,e){Ar(),Ir.closeState=!0,Ir.Global=t,Ur(e),window.removeEventListener("online",Cr(e)),window.addEventListener("online",Cr(e)),window.addEventListener("offline",(function(){Ir.ws.close()}))}function Cr(t){Ir.closeState||1===Ir.ws.readyState||(Ir.wsStatus=!1,Ir.ws?Ir.ws.close():Pr(t))}function Br(t,e){Ir.heartBeatTime=(new Date).getTime(),t=pr(t,e),null!==(e=Ir.ws)&&void 0!==e&&e.send(t)}function jr(){Ir.ws&&(console.warn("手动关闭连接"),Ir.closeState=!0,Ir.ws.close()),Ar()}function Ar(){Ir.reconnectTimer&&clearTimeout(Ir.reconnectTimer),Ir.reconnectTimer=null,Ir.ws=null,Ir.Global=null,Ir.heartBeatTime=null,Ir.chatListEvent=null,Ir.wsStatus=!1,Ir.chatFormatList=[],Ir.reconnectNum=0}function Ur(t){Ir.Global.onConn();var e=new WebSocket(t.wsUrl);e.binaryType="arraybuffer",e.onopen=function(e){Ir.reconnectNum=0,Ir.closeState=!1,Ir.heartBeatTime=(new Date).getTime(),t.connSuc(t)},e.onmessage=xr,e.onclose=function(e){console.log("Connection closed.",e),Pr(t),t.connErr(t,e)},e.onerror=function(e){console.log("Connection Error",e),Pr(t)},Ir.ws=e}function Pr(t){Ir.wsStatus||Ir.closeState||(Ir.wsStatus=!0,Ir.reconnectTimer=setTimeout((function(){0===Ir.reconnectNum?Ir.reconnectNum=250:Ir.reconnectNum*=2,Ur(t),Ir.wsStatus=!1}),Ir.reconnectNum))}function xr(t){var e=new Uint8Array(t.data.slice(0,1))[0],n=t.data.slice(2);switch(1===new Uint8Array(t.data.slice(1,2))[0]&&(n=fr.inflate(n,{to:"Uint8Array"})),n=new Uint8Array(n),e){case r:!function(t){var e=Mr(ht.Result,t);t=e.code;var n=Dr(e);if((null==n?void 0:n.type)!==B||Er.includes(t))switch(t){case $.SUCCESS:if(!n)return;n.type===A?(Ir.chatListEvent=n,Ir.chatFormatList=[]):null!=n&&n.callSuc&&n.callSuc({data:e});break;case $.ERROR:null!=n&&n.callErr&&n.callErr(e);break;case $.TOKEN_NOT_FOUND:case $.KICKED_OUT:Ir.closeState=!0,Ir.ws.close(),Ir.Global.handleMessage({type:ct,data:e}),null!=n&&n.callErr&&n.callErr(e);break;case 12:null!=n&&n.callSuc&&n.callSuc({chats:[],hasMore:!1});break;default:null!=n&&n.callErr&&n.callErr(e)}else null!==(t=Ir.ws)&&void 0!==t&&t.close()}(n);break;case p:!function(t){var e,n;t=Mr(ht.ChatList,t),(e=Ir.chatFormatList).push.apply(e,_toConsumableArray(t.chatItems)),t.updateTime&&null!==(n=Ir.chatListEvent)&&void 0!==n&&n.callSuc&&(Ir.chatListEvent.callSuc({chats:Ir.chatFormatList,updateTime:t.updateTime}),Ir.chatListEvent=null,Ir.chatFormatList=[])}(n);break;case a:!function(t){var e=Mr(ht.ChatRBatch,t),n=Dr(e);null!=n&&n.callSuc&&n.callSuc({messages:e.msgs})}(n);break;case s:!function(t){var e=Mr(ht.ChatR,t),n=Dr(e);n?null!=n&&n.callSuc&&n.callSuc({data:e}):Ir.Global.handleMessage({type:gt,data:e})}(n);break;case i:!function(t){var e=Mr(ht.ChatSR,t),n=Dr(e);null!=n&&n.callSuc&&n.callSuc({data:e})}(n);break;case f:!function(t){t=Mr(ht.ChatItemUpdate,t),Ir.Global.handleMessage({type:lt,data:t});var e=Dr(t);null!=e&&e.callSuc&&e.callSuc({data:t})}(n);break;case d:!function(t){var e=Mr(ht.ChatItem,t),n=Dr(e);null!=n&&n.callSuc&&n.callSuc({data:e})}(n);break;case y:!function(t){var e=Mr(ht.CosKey,t),n=Dr(e);null!=n&&n.callSuc&&n.callSuc({data:e})}(n)}}function Mr(t,e){return t.toObject(t.decode(e),{defaults:!0})}function Dr(t){var e=Ir.Global.callEvents,n=null;return Object.prototype.hasOwnProperty.call(t,"sign")?e[t.sign]:n}var Rr=[];function zr(t,e){Rr.push(t),window.localStorage.setItem(t,JSON.stringify(e))}function Kr(t){window.localStorage.removeItem(t),Rr=Rr.filter((function(e){return e!==t}))}function Fr(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=_typeof(e)||!e)&&e}catch(t){return!1}}var qr=function(t){for(;0<Rr.length;){var e=Rr.pop();window.localStorage.removeItem(e)}t&&(window.localStorage.removeItem("im_windowHeartBeat"),window.localStorage.removeItem("im_wsCurId"),window.localStorage.removeItem("im_wsTabs"),window.localStorage.removeItem("im_wsConnTab"))},Gr=function(t,e,n){if(t.key&&t.newValue)if("im_wsCurId"!==t.key){if("im_getSdkState"===t.key&&n.curTab&&window.localStorage.setItem("im_setSdkState",JSON.stringify({tabId:t.newValue,sdkState:n.sdkState})),"im_setSdkState"===t.key){var r=Fr(t.newValue);if(r.tabId===n.tabId)for(var o in window.localStorage.removeItem("im_setSdkState"),n.stateCallEvents)n.stateCallEvents[o].callSuc(r.sdkState)}0===t.key.indexOf("im_update_tabs_")&&n.curTab&&n.updateTabs&&(n.updateTabs.push(t.newValue),window.localStorage.setItem("im_wsTabs",JSON.stringify(n.updateTabs))),"im_wsConnTab"!==t.key||t.newValue!==n.tabId?0!==t.key.indexOf(N)?0!==t.key.indexOf(C)||function(t,e,n){var r=Fr(t.newValue);if(!1!==r)if(n.curTab&&r.state===J){var o=t.key.split("_")[2],i=function(t,e,n){switch(t){case j:return e.logout();case U:return e.getConversationProvider(n.options);case x:return e.deleteConversation(n.options);case M:return n.options.tabId=n.tabId,e.getMessageList(n.options);case D:return e.setMessageRead(n.options);case R:return e.sendMessage(n.options);case z:return e.resendMessage(n.options);case K:return e.revokeMessage(n.options);case F:return e.getCosKey();case q:return e.getAllUnreadCount();default:return!1}}(o,e,r);i&&i.then((function(e){var n,i;o===M?(r.state=Y,r.hasMore=e.data.hasMore,r.messages=e.data.messages,zr(t.key,r)):(n=e.data,i=t.key,(e=r).state=Y,e.data=n,zr(i,e))})).catch((function(e){var n,o;n=e,o=t.key,(e=r).state=W,e.err=n,zr(o,e)}))}else r.tabId===n.tabId&&function(t,e,n){Kr(t);var r=e.callEvents[n.callSign];n.state===Y?r&&r.callSuc(n):n.state===W&&r&&r.callErr(n.err)}(t.key,n,r)}(t,e,n):(e=JSON.parse(t.newValue),n.handleMessage(e)):(n.reconnection(),window.localStorage.removeItem("im_wsConnTab"))}else t.newValue===n.tabId?n.globalTimer():n.curTab&&n.clearTimer()},Vr=function(t,e){zr(t=N+t,e),Kr(t)},Hr=function(t,e){zr(t="".concat(C+t,"_").concat(e.tabId,"_").concat(e.callSign,";"),e)};function Zr(t,e){return e?"string"!=typeof t:"string"!=typeof t||""===t}function Jr(t,e){return e?"number"!=typeof t||0===t:"number"!=typeof t}function Yr(t){return null==t}function Wr(t){return"string"!=typeof t||0!==t.indexOf("http://")&&0!==t.indexOf("https://")}function $r(t){return"string"!=typeof t||0!==t.indexOf("ws://")&&0!==t.indexOf("wss://")}function Xr(t){return"".concat(t," parameter type is wrong or does not exist")}function Qr(t,e){return"".concat(t,"_").concat(e)}function to(t){return Math.round(1e3*(t||(new Date).getTime()+Math.random()))}function eo(t,e,n){return{name:e,code:n||$.ERROR,msg:t}}function no(t){return"C2C_"+t}var ro={getPageSize:function(t,e,n,r){if(!t)return n;if(null==n||!n.length)return[];var o=n.findIndex((function(n){return n[e]===t}));return-1!==o&&o!==n.length-1?n.slice(o+1,o+1+r):[]},sort:function(t,e){return t.sort((function(t,n){return n[e]-t[e]}))},uuid:function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},isNotString:Zr,isNotNumer:Jr,isNotObject:function(t,e,n){if("object"!=_typeof(t))return!0;if(e)switch(n){case"string":return Zr(t[e]);case"number":return Jr(t[e]);case"http":return Wr(t[e]);case"ws":return $r(t[e]);default:return Yr(t[e])}},isNotEmpty:Yr,isNotSize:function(t,e){return(e||3072)<new Blob([t],{type:"application/json"}).size},isNotHttp:Wr,isNotWs:$r,createOnlyId:Qr,createSign:to,resultErr:eo,serverErr:function(t,e){return{name:e,code:t.code||$.ERROR,msg:t.msg}},parameterErr:function(t){return{code:$.PARAMETER,name:t.name,msg:t.msg||Xr(t.key)}},resultSuc:function(t,e){return{code:$.SUCCESS,name:t,data:JSON.parse(JSON.stringify(e))}},resultNotice:function(t,e,n){return{name:t,code:n||$.SUCCESS,data:JSON.parse(JSON.stringify(e))}},msgBase:function(t,e){var n=(new Date).getTime(),r=to(n),o=no(t);return{onlyId:Qr(o,r),conversationID:o,toUid:t,fromUid:e,msgId:0,showMsgTime:n,sendStatus:Z.BFIM_MSG_STATUS_SENDING}},splicingC2CId:no,reformatC2CId:function(t){return t.slice(4)},formatMsg:function(t,e){var n={conversationID:e,fromUid:t.fromUid,toUid:t.toUid,type:t.type,msgId:t.msgId,newMsg:t.newMsg,msgTime:t.msgTime,sendStatus:Z.BFIM_MSG_STATUS_SEND_SUCC};switch(n.onlyId=t.onlyId||Qr(e,t.sign||t.msgTime),n.showMsgTime=parseInt(t.msgTime/1e3)||t.showMsgTime,n.type){case X.Recall:case X.Revoked:case X.Text:n.text=t.body;break;case X.Img:n.url=t.body,n.height=t.height,n.width=t.width;break;case X.Audio:n.url=t.body,n.duration=t.duration;break;case X.Video:n.url=t.body,n.thumb=t.thumb,n.height=t.height,n.width=t.width,n.duration=t.duration;break;case X.Location:n.title=t.title,n.lat=t.lat,n.lng=t.lng,n.zoom=t.zoom;break;default:n.content=t.body,n.title=t.title,n.lat=t.lat,n.lng=t.lng,n.zoom=t.zoom,n.thumb=t.thumb,n.height=t.height,n.width=t.width,n.duration=t.duration}return n},formatChat:function(t,e){var n=_objectSpread({},t);return delete n.sign,n.showTime=parseInt(t.showMsgTime/1e3),n.conversationID=no(t.uid),t.msgEnd&&(n.showMsgFromUid=t.myMove?t.uid:e),n},emptyTip:Xr,createCallEvent:function(t,e){t.callEvents[e.callSign]={tabId:t.tabId,type:e.type,timeOut:(new Date).getTime()+t.timeOut,callSuc:function(n){delete t.callEvents[e.callSign],e.callSuc&&e.callSuc(n)},callErr:function(n){delete t.callEvents[e.callSign],e.callErr&&e.callErr(n)}}},preJudge:function(t,e,n){return t.sdkState.loginState===V.NOT_LOGIN?(e(eo("Imsdk is not logged",n,$.NOLOGIN)),!1):!t.curTab||t.sdkState.connState===G.NET_STATE_CONNECTED||(e(eo("disconnected",n,$.DISCONNECT)),!1)}},oo=function(){return(oo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function io(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}var so=Object.keys,ao=Array.isArray,uo="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function lo(t,e){return"object"!=_typeof(e)||so(e).forEach((function(n){t[n]=e[n]})),t}"undefined"==typeof Promise||uo.Promise||(uo.Promise=Promise);var co=Object.getPrototypeOf,go={}.hasOwnProperty;function ho(t,e){return go.call(t,e)}function fo(t,e){"function"==typeof e&&(e=e(co(t))),so(e).forEach((function(n){mo(t,n,e[n])}))}var po=Object.defineProperty;function mo(t,e,n,r){po(t,e,lo(n&&ho(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function bo(t){return{from:function(e){return t.prototype=Object.create(e.prototype),mo(t.prototype,"constructor",t),{extend:fo.bind(null,t.prototype)}}}}var yo=Object.getOwnPropertyDescriptor;function wo(t,e){return yo(t,e)||(t=co(t))&&wo(t,e)}var _o=[].slice;function vo(t,e,n){return _o.call(t,e,n)}function So(t,e){return e(t)}function ko(t){if(!t)throw new Error("Assertion Failed")}function Lo(t){uo.setImmediate?setImmediate(t):setTimeout(t,0)}function Oo(t,e){return t.reduce((function(t,n,r){return(r=e(n,r))&&(t[r[0]]=r[1]),t}),{})}function To(t,e){if(ho(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,o=e.length;r<o;++r){var i=To(t,e[r]);n.push(i)}return n}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return void 0===a?void 0:To(a,e.substr(s+1))}}function Io(t,e,n){if(t&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){ko("string"!=typeof n&&"length"in n);for(var r=0,o=e.length;r<o;++r)Io(t,e[r],n[r])}else{var i,s=e.indexOf(".");-1!==s?(i=e.substr(0,s),""===(s=e.substr(s+1))?void 0===n?ao(t)&&!isNaN(parseInt(i))?t.splice(i,1):delete t[i]:t[i]=n:Io(t[i]||(t[i]={}),s,n)):void 0===n?ao(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Eo(t,e){"string"==typeof e?Io(t,e,void 0):"length"in e&&[].map.call(e,(function(e){Io(t,e,void 0)}))}function No(t){var e,n={};for(e in t)ho(t,e)&&(n[e]=t[e]);return n}var Co=[].concat;function Bo(t){return Co.apply([],t)}var jo=(Ue="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(Bo([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return uo[t]}))).map((function(t){return uo[t]})),Ao=Oo(Ue,(function(t){return[t,!0]}));function Uo(t){if(!t||"object"!=_typeof(t))return t;if(ao(t))for(var e=[],n=0,r=t.length;n<r;++n)e.push(Uo(t[n]));else if(0<=jo.indexOf(t.constructor))e=t;else for(var o in e=t.constructor?Object.create(t.constructor.prototype):{},t)ho(t,o)&&(e[o]=Uo(t[o]));return e}var Po={}.toString;function xo(t){return Po.call(t).slice(8,-1)}var Mo=function t(e,n){return"Array"===n?""+e.map((function(e){return t(e,xo(e))})):"ArrayBuffer"===n?""+new Uint8Array(e):"Date"===n?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function Do(t,e,n,r){return n=n||{},r=r||"",so(t).forEach((function(o){var i,s,a,u;ho(e,o)?(i=t[o],s=e[o],"object"==_typeof(i)&&"object"==_typeof(s)&&i&&s?(a=xo(i))===(u=xo(s))?Ao[a]?Mo(i,a)!==Mo(s,u)&&(n[r+o]=e[o]):Do(i,s,n,r+o+"."):n[r+o]=e[o]:i!==s&&(n[r+o]=e[o])):n[r+o]=void 0})),so(e).forEach((function(o){ho(t,o)||(n[r+o]=e[o])})),n}var Ro="undefined"!=typeof Symbol&&Symbol.iterator,zo=Ro?function(t){var e;return null!=t&&(e=t[Ro])&&e.apply(t)}:function(){return null},Ko={};function Fo(t){var e,n,r,o;if(1===arguments.length){if(ao(t))return t.slice();if(this===Ko&&"string"==typeof t)return[t];if(o=zo(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"!=typeof(e=t.length))return[t];for(n=new Array(e);e--;)n[e]=t[e];return n}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var qo="undefined"!=typeof Symbol?function(t){return"AsyncFunction"===t[Symbol.toStringTag]}:function(){return!1},Go="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Vo(t,e){Go=t,Ho=e}var Ho=function(){return!0},Zo=!new Error("").stack;function Jo(){if(Zo)try{throw new Error}catch(t){return t}return new Error}function Yo(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(Ho).map((function(t){return"\n"+t})).join("")):""}Wt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(pn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]);var Wo={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function $o(t,e){this._e=Jo(),this.name=t,this.message=e}function Xo(t,e){return t+". Errors: "+Object.keys(e).map((function(t){return e[t].toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}function Qo(t,e,n,r){this._e=Jo(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Xo(t,e)}function ti(t,e){this._e=Jo(),this.name="BulkError",this.failures=e,this.message=Xo(t,e)}bo($o).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Yo(this._e,2))}},toString:function(){return this.name+": "+this.message}}),bo(Qo).from($o),bo(ti).from($o),Ue=Wt.reduce((function(t,e){return t[e]=e+"Error",t}),{});var ei=$o,ni=Wt.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=Jo(),this.name=n,t?"string"==typeof t?(this.message=t+(r?"\n "+r:""),this.inner=r||null):"object"==_typeof(t)&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=Wo[e]||n,this.inner=null)}return bo(r).from(ei),t[e]=r,t}),{});ni.Syntax=SyntaxError,ni.Type=TypeError,ni.Range=RangeError;var ri=pn.reduce((function(t,e){return t[e+"Error"]=ni[e],t}),{});function oi(){}function ii(t){return t}function si(t,e){return null==t||t===ii?e:function(n){return e(t(n))}}function ai(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function ui(t,e){return t===oi?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ai(r,this.onsuccess):r),o&&(this.onerror=this.onerror?ai(o,this.onerror):o),void 0!==i?i:n}}function li(t,e){return t===oi?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ai(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ai(r,this.onerror):r)}}function ci(t,e){return t===oi?e:function(n){var r=t.apply(this,arguments);lo(n,r);var o=this.onsuccess,i=this.onerror;return this.onsuccess=null,this.onerror=null,n=e.apply(this,arguments),o&&(this.onsuccess=this.onsuccess?ai(o,this.onsuccess):o),i&&(this.onerror=this.onerror?ai(i,this.onerror):i),void 0===r?void 0===n?void 0:n:lo(r,n)}}function gi(t,e){return t===oi?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function hi(t,e){return t===oi?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return n.then((function(){return e.apply(r,i)}))}return e.apply(this,arguments)}}(pn=Wt.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=ni[e]),t}),{})).ModifyError=Qo,pn.DexieError=$o,pn.BulkError=ti;var di={},fi=(Wt="undefined"==typeof Promise?[]:function(){var t=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[t,t.__proto__,t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,e.__proto__,t]}())[0],pi=Wt[1],mi=Wt[2],bi=pi&&pi.then,yi=fi&&fi.constructor,wi=!!mi,_i=!1,vi=mi?function(){mi.then(Fi)}:uo.setImmediate?setImmediate.bind(null,Fi):uo.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){Fi(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Fi,0)},Si=function(t,e){Bi.push([t,e]),Li&&(vi(),Li=!1)},ki=!0,Li=!0,Oi=[],Ti=[],Ii=null,Ei=ii,Ni={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:hs,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{hs(t[0],t[1])}catch(t){}}))}},Ci=Ni,Bi=[],ji=0,Ai=[];function Ui(t){if("object"!=_typeof(this))throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=oi,this._lib=!1;var e=this._PSD=Ci;if(Go&&(this._stackHolder=Jo(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==di)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Mi(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,n){try{n((function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&qi();n&&"function"==typeof n.then?t(e,(function(t,e){n instanceof Ui?n._then(t,e):n.then(t,e)})):(e._state=!0,e._value=n,Di(e)),r&&Gi()}}),Mi.bind(null,e))}catch(n){Mi(e,n)}}(this,t)}var Pi={get:function(){var t=Ci,e=Xi;function n(n,r){var o=this,i=!t.global&&(t!==Ci||e!==Xi),s=i&&!ns(),a=new Ui((function(e,a){Ri(o,new xi(ls(n,t,i,s),ls(r,t,i,s),e,a,t))}));return Go&&Ki(a,this),a}return n.prototype=di,n},set:function(t){mo(this,"then",t&&t.prototype===di?Pi:{get:function(){return t},set:Pi.set})}};function xi(t,e,n,r,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=o}function Mi(t,e){var n,r;Ti.push(e),null===t._state&&(n=t._lib&&qi(),e=Ei(e),t._state=!1,t._value=e,Go&&null!==e&&"object"==_typeof(e)&&!e._promise&&function(t,e,n){try{t.apply(null,void 0)}catch(t){}}((function(){var n=wo(e,"stack");e._promise=t,mo(e,"stack",{get:function(){return _i?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),r=t,Oi.some((function(t){return t._value===r._value}))||Oi.push(r),Di(t),n&&Gi())}function Di(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Ri(t,e[n]);var o=t._PSD;--o.ref||o.finalize(),0===ji&&(++ji,Si((function(){0==--ji&&Vi()}),[]))}function Ri(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++ji,Si(zi,[n,t,e])}else t._listeners.push(e)}function zi(t,e,n){try{var r,o=(Ii=e)._value;e._state?r=t(o):(Ti.length&&(Ti=[]),r=t(o),-1===Ti.indexOf(o)&&function(t){for(var e=Oi.length;e;)if(Oi[--e]._value===t._value)return Oi.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{Ii=null,0==--ji&&Vi(),--n.psd.ref||n.psd.finalize()}}function Ki(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Fi(){qi()&&Gi()}function qi(){var t=ki;return Li=ki=!1,t}function Gi(){var t,e,n;do{for(;0<Bi.length;)for(t=Bi,Bi=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(0<Bi.length);Li=ki=!0}function Vi(){var t=Oi;Oi=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=Ai.slice(0),n=e.length;n;)e[--n]()}function Hi(t){return new Ui(di,!1,t)}function Zi(t,e){var n=Ci;return function(){var r=qi(),o=Ci;try{return is(n,!0),t.apply(this,arguments)}catch(r){e&&e(r)}finally{is(o,!1),r&&Gi()}}}fo(Ui.prototype,{then:Pi,_then:function(t,e){Ri(this,new xi(null,null,t,e,Ci))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=t,n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return(t instanceof e?n:Hi)(t)})):this.then(null,(function(t){return(t&&t.name===e?n:Hi)(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),Hi(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{_i=!0;var t=function t(e,n,r){if(n.length===r)return n;var o,i,s,a="";return!1===e._state&&(null!=(o=e._value)?(i=o.name||"Error",s=o.message||o,a=Yo(o,0)):(i=o,s=""),n.push(i+(s?": "+s:"")+a)),Go&&((a=Yo(e._stackHolder,2))&&-1===n.indexOf(a)&&n.push(a),e._prev&&t(e._prev,n,r)),n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{_i=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Ui((function(r,o){var i=setTimeout((function(){return o(new ni.Timeout(e))}),t);n.then(r,o).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&mo(Ui.prototype,Symbol.toStringTag,"Dexie.Promise"),Ni.env=ss(),fo(Ui,{all:function(){var t=Fo.apply(null,arguments).map(rs);return new Ui((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(o,i){return Ui.resolve(o).then((function(n){t[i]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof Ui)return t;if(t&&"function"==typeof t.then)return new Ui((function(e,n){t.then(e,n)}));var e=new Ui(di,!0,t);return Ki(e,Ii),e},reject:Hi,race:function(){var t=Fo.apply(null,arguments).map(rs);return new Ui((function(e,n){t.map((function(t){return Ui.resolve(t).then(e,n)}))}))},PSD:{get:function(){return Ci},set:function(t){return Ci=t}},totalEchoes:{get:function(){return Xi}},newPSD:ts,usePSD:as,scheduler:{get:function(){return Si},set:function(t){Si=t}},rejectionMapper:{get:function(){return Ei},set:function(t){Ei=t}},follow:function(t,e){return new Ui((function(n,r){return ts((function(e,n){var r=Ci;r.unhandleds=[],r.onunhandled=n,r.finalize=ai((function(){var t,r=this;t=function(){0===r.unhandleds.length?e():n(r.unhandleds[0])},Ai.push((function e(){t(),Ai.splice(Ai.indexOf(e),1)})),++ji,Si((function(){0==--ji&&Vi()}),[])}),r.finalize),t()}),e,n,r)}))}}),yi&&(yi.allSettled&&mo(Ui,"allSettled",(function(){var t=Fo.apply(null,arguments).map(rs);return new Ui((function(e){0===t.length&&e([]);var n=t.length,r=new Array(n);t.forEach((function(t,o){return Ui.resolve(t).then((function(t){return r[o]={status:"fulfilled",value:t}}),(function(t){return r[o]={status:"rejected",reason:t}})).then((function(){return--n||e(r)}))}))}))})),yi.any&&"undefined"!=typeof AggregateError&&mo(Ui,"any",(function(){var t=Fo.apply(null,arguments).map(rs);return new Ui((function(e,n){0===t.length&&n(new AggregateError([]));var r=t.length,o=new Array(r);t.forEach((function(t,i){return Ui.resolve(t).then((function(t){return e(t)}),(function(t){o[i]=t,--r||n(new AggregateError(o))}))}))}))})));var Ji={awaits:0,echoes:0,id:0},Yi=0,Wi=[],$i=0,Xi=0,Qi=0;function ts(t,e,n,r){var o=Ci,i=Object.create(o);i.parent=o,i.ref=0,i.global=!1,i.id=++Qi;var s=Ni.env;return i.env=wi?{Promise:Ui,PromiseProp:{value:Ui,configurable:!0,writable:!0},all:Ui.all,race:Ui.race,allSettled:Ui.allSettled,any:Ui.any,resolve:Ui.resolve,reject:Ui.reject,nthen:cs(s.nthen,i),gthen:cs(s.gthen,i)}:{},e&&lo(i,e),++o.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()},r=as(i,t,n,r),0===i.ref&&i.finalize(),r}function es(){return Ji.id||(Ji.id=++Yi),++Ji.awaits,Ji.echoes+=100,Ji.id}function ns(){return!!Ji.awaits&&(0==--Ji.awaits&&(Ji.id=0),Ji.echoes=100*Ji.awaits,!0)}function rs(t){return Ji.echoes&&t&&t.constructor===yi?(es(),t.then((function(t){return ns(),t}),(function(t){return ns(),ds(t)}))):t}function os(){var t=Wi[Wi.length-1];Wi.pop(),is(t,!1)}function is(t,e){var n,r=Ci;(e?!Ji.echoes||$i++&&t===Ci:!$i||--$i&&t===Ci)||us(e?function(t){++Xi,Ji.echoes&&0!=--Ji.echoes||(Ji.echoes=Ji.id=0),Wi.push(Ci),is(t,!0)}.bind(null,t):os),t!==Ci&&(Ci=t,r===Ni&&(Ni.env=ss()),wi&&(n=Ni.env.Promise,e=t.env,pi.then=e.nthen,n.prototype.then=e.gthen,(r.global||t.global)&&(Object.defineProperty(uo,"Promise",e.PromiseProp),n.all=e.all,n.race=e.race,n.resolve=e.resolve,n.reject=e.reject,e.allSettled&&(n.allSettled=e.allSettled),e.any&&(n.any=e.any))))}function ss(){var t=uo.Promise;return wi?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(uo,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:pi.then,gthen:t.prototype.then}:{}}function as(t,e,n,r,o){var i=Ci;try{return is(t,!0),e(n,r,o)}finally{is(i,!1)}}function us(t){bi.call(fi,t)}function ls(t,e,n,r){return"function"!=typeof t?t:function(){var o=Ci;n&&es(),is(e,!0);try{return t.apply(this,arguments)}finally{is(o,!1),r&&us(ns)}}}function cs(t,e){return function(n,r){return t.call(this,ls(n,e),ls(r,e))}}-1===(""+bi).indexOf("[native code]")&&(es=ns=oi);var gs="unhandledrejection";function hs(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,o={promise:e,reason:t};if(uo.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(gs,!0,!0),lo(r,o)):uo.CustomEvent&&lo(r=new CustomEvent(gs,{detail:o}),o),r&&uo.dispatchEvent&&(dispatchEvent(r),!uo.PromiseRejectionEvent&&uo.onunhandledrejection))try{uo.onunhandledrejection(r)}catch(t){}Go&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var ds=Ui.reject;function fs(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)}var ps=String.fromCharCode(65535),ms="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bs="String expected.",ys=[],ws="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),_s=ws,vs=ws,Ss="__dbnames",ks="readonly",Ls="readwrite";function Os(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Ts={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Is(t){return function(e){return void 0===To(e,t)&&Eo(e=Uo(e),t),e}}var Es=(Ns.prototype._trans=function(t,e,n){var r=this._tx||Ci.trans,o=this.name;function i(t,n,r){if(!r.schema[o])throw new ni.NotFound("Table "+o+" not part of transaction");return e(r.idbtrans,r)}var s=qi();try{return r&&r.db===this.db?r===Ci.trans?r._promise(t,i,n):ts((function(){return r._promise(t,i,n)}),{trans:r,transless:Ci.transless||Ci}):function t(e,n,r,o){if(e._state.openComplete||Ci.letThrough){var i=e._createTransaction(n,r,e._dbSchema);try{i.create()}catch(t){return ds(t)}return i._promise(n,(function(t,e){return ts((function(){return Ci.trans=i,o(t,e,i)}))})).then((function(t){return i._completion.then((function(){return t}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ds(new ni.DatabaseClosed);e.open().catch(oi)}return e._state.dbReadyPromise.then((function(){return t(e,n,r,o)}))}(this.db,t,[this.name],i)}finally{s&&Gi()}},Ns.prototype.get=function(t,e){var n=this;return t&&t.constructor===Object?this.where(t).first(e):this._trans("readonly",(function(e){return n.core.get({trans:e,key:t}).then((function(t){return n.hook.reading.fire(t)}))})).then(e)},Ns.prototype.where=function(t){if("string"==typeof t)return new this.db.WhereClause(this,t);if(ao(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var e=so(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&e.every((function(e){return 0<=t.keyPath.indexOf(e)}))&&t.keyPath.every((function(t){return 0<=e.indexOf(t)}))}))[0];if(n&&this.db._maxKey!==ps)return this.where(n.name).equals(n.keyPath.map((function(e){return t[e]})));!n&&Go&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var r=this.schema.idxByName,o=this.db._deps.indexedDB;function i(t,e){try{return 0===o.cmp(t,e)}catch(t){return!1}}var s=(a=e.reduce((function(e,n){var o=e[0],s=e[1],a=(e=r[n],t[n]);return[o||e,o||!e?Os(s,e&&e.multi?function(t){return t=To(t,n),ao(t)&&t.some((function(t){return i(a,t)}))}:function(t){return i(a,To(t,n))}):s]}),[null,null]))[0],a=a[1];return s?this.where(s.name).equals(t[s.keyPath]).filter(a):n?this.filter(a):this.where(e).equals("")},Ns.prototype.filter=function(t){return this.toCollection().and(t)},Ns.prototype.count=function(t){return this.toCollection().count(t)},Ns.prototype.offset=function(t){return this.toCollection().offset(t)},Ns.prototype.limit=function(t){return this.toCollection().limit(t)},Ns.prototype.each=function(t){return this.toCollection().each(t)},Ns.prototype.toArray=function(t){return this.toCollection().toArray(t)},Ns.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ns.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ao(t)?"["+t.join("+")+"]":t))},Ns.prototype.reverse=function(){return this.toCollection().reverse()},Ns.prototype.mapToClass=function(t){function e(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(ho(e,n))try{r[n]=e[n]}catch(e){}return r}return this.schema.mappedClass=t,this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=e,this.hook("reading",e),t},Ns.prototype.defineClass=function(){return this.mapToClass((function(t){lo(this,t)}))},Ns.prototype.add=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,s=t;return i&&o&&(s=Is(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"add",keys:null!=e?[e]:null,values:[s]})})).then((function(t){return t.numFailures?Ui.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{Io(t,i,e)}catch(e){}return e}))},Ns.prototype.update=function(t,e){if("object"!=_typeof(e)||ao(e))throw new ni.InvalidArgument("Modifications must be an object.");if("object"!=_typeof(t)||ao(t))return this.where(":id").equals(t).modify(e);so(e).forEach((function(n){Io(t,n,e[n])}));var n=To(t,this.schema.primKey.keyPath);return void 0===n?ds(new ni.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)},Ns.prototype.put=function(t,e){var n=this,r=this.schema.primKey,o=r.auto,i=r.keyPath,s=t;return i&&o&&(s=Is(i)(t)),this._trans("readwrite",(function(t){return n.core.mutate({trans:t,type:"put",values:[s],keys:null!=e?[e]:null})})).then((function(t){return t.numFailures?Ui.reject(t.failures[0]):t.lastResult})).then((function(e){if(i)try{Io(t,i,e)}catch(e){}return e}))},Ns.prototype.delete=function(t){var e=this;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:[t]})})).then((function(t){return t.numFailures?Ui.reject(t.failures[0]):void 0}))},Ns.prototype.clear=function(){var t=this;return this._trans("readwrite",(function(e){return t.core.mutate({trans:e,type:"deleteRange",range:Ts})})).then((function(t){return t.numFailures?Ui.reject(t.failures[0]):void 0}))},Ns.prototype.bulkGet=function(t){var e=this;return this._trans("readonly",(function(n){return e.core.getMany({keys:t,trans:n}).then((function(t){return t.map((function(t){return e.hook.reading.fire(t)}))}))}))},Ns.prototype.bulkAdd=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0,i=(n=n||(o?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(a=r.schema.primKey).auto;if((a=a.keyPath)&&o)throw new ni.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new ni.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,a=a&&n?t.map(Is(a)):t;return r.core.mutate({trans:e,type:"add",keys:o,values:a,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult,a=t.failures;if(0===e)return i?n:o;throw new ti(r.name+".bulkAdd(): "+e+" of "+s+" operations failed",Object.keys(a).map((function(t){return a[t]})))}))}))},Ns.prototype.bulkPut=function(t,e,n){var r=this,o=Array.isArray(e)?e:void 0,i=(n=n||(o?void 0:e))?n.allKeys:void 0;return this._trans("readwrite",(function(e){var n=(a=r.schema.primKey).auto;if((a=a.keyPath)&&o)throw new ni.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==t.length)throw new ni.InvalidArgument("Arguments objects and keys must have the same length");var s=t.length,a=a&&n?t.map(Is(a)):t;return r.core.mutate({trans:e,type:"put",keys:o,values:a,wantResults:i}).then((function(t){var e=t.numFailures,n=t.results,o=t.lastResult,a=t.failures;if(0===e)return i?n:o;throw new ti(r.name+".bulkPut(): "+e+" of "+s+" operations failed",Object.keys(a).map((function(t){return a[t]})))}))}))},Ns.prototype.bulkDelete=function(t){var e=this,n=t.length;return this._trans("readwrite",(function(n){return e.core.mutate({trans:n,type:"delete",keys:t})})).then((function(t){var r=t.numFailures,o=t.lastResult;if(t=t.failures,0===r)return o;throw new ti(e.name+".bulkDelete(): "+r+" of "+n+" operations failed",t)}))},Ns);function Ns(){}function Cs(t){var e={},n=function(n,r){if(r){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return e[n].subscribe.apply(null,i),t}if("string"==typeof n)return e[n]};n.addEventType=i;for(var r=1,o=arguments.length;r<o;++r)i(arguments[r]);return n;function i(t,r,o){if("object"!=_typeof(t)){var s;r=r||gi;var a={subscribers:[],fire:o=o||oi,subscribe:function(t){-1===a.subscribers.indexOf(t)&&(a.subscribers.push(t),a.fire=r(a.fire,t))},unsubscribe:function(t){a.subscribers=a.subscribers.filter((function(e){return e!==t})),a.fire=a.subscribers.reduce(r,o)}};return e[t]=n[t]=a}so(s=t).forEach((function(t){var e=s[t];if(ao(e))i(t,s[t][0],s[t][1]);else{if("asap"!==e)throw new ni.InvalidArgument("Invalid event config");var n=i(t,ii,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];n.subscribers.forEach((function(t){Lo((function(){t.apply(null,e)}))}))}))}}))}}function Bs(t,e){return bo(e).from({prototype:t}),e}function js(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function As(t,e){t.filter=Os(t.filter,e)}function Us(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Os(r(),e())}:e,t.justLimit=n&&!r}function Ps(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new ni.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function xs(t,e,n){var r=Ps(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:"prev"===t.dir,unique:!!t.unique,query:{index:r,range:t.range}})}function Ms(t,e,n,r){var o=t.replayFilter?Os(t.filter,t.replayFilter()):t.filter;if(t.or){var i={},s=function(t,n,r){var s,a;o&&!o(n,r,(function(t){return n.stop(t)}),(function(t){return n.fail(t)}))||("[object ArrayBuffer]"==(a=""+(s=n.primaryKey))&&(a=""+new Uint8Array(s)),ho(i,a)||(i[a]=!0,e(t,n,r)))};return Promise.all([t.or._iterate(s,n),Ds(xs(t,r,n),t.algorithm,s,!t.keysOnly&&t.valueMapper)])}return Ds(xs(t,r,n),Os(t.algorithm,o),e,!t.keysOnly&&t.valueMapper)}function Ds(t,e,n,r){var o=Zi(r?function(t,e,o){return n(r(t),e,o)}:n);return t.then((function(t){if(t)return t.start((function(){var n=function(){return t.continue()};e&&!e(t,(function(t){return n=t}),(function(e){t.stop(e),n=oi}),(function(e){t.fail(e),n=oi}))||o(t.value,t,(function(t){return n=t})),n()}))}))}var Rs=(zs.prototype._read=function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ds.bind(null,n.error)):n.table._trans("readonly",t).then(e)},zs.prototype._write=function(t){var e=this._ctx;return e.error?e.table._trans(null,ds.bind(null,e.error)):e.table._trans("readwrite",t,"locked")},zs.prototype._addAlgorithm=function(t){var e=this._ctx;e.algorithm=Os(e.algorithm,t)},zs.prototype._iterate=function(t,e){return Ms(this._ctx,t,e,this._ctx.table.core)},zs.prototype.clone=function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&lo(n,t),e._ctx=n,e},zs.prototype.raw=function(){return this._ctx.valueMapper=null,this},zs.prototype.each=function(t){var e=this._ctx;return this._read((function(n){return Ms(e,t,n,e.table.core)}))},zs.prototype.count=function(t){var e=this;return this._read((function(t){var n=e._ctx,r=n.table.core;if(js(n,!0))return r.count({trans:t,query:{index:Ps(n,r.schema),range:n.range}}).then((function(t){return Math.min(t,n.limit)}));var o=0;return Ms(n,(function(){return++o,!1}),t,r).then((function(){return o}))})).then(t)},zs.prototype.sortBy=function(t,e){var n=t.split(".").reverse(),r=n[0],o=n.length-1;function i(t,e){return e?i(t[n[e]],e-1):t[r]}var s="next"===this._ctx.dir?1:-1;function a(t,e){return(t=i(t,o))<(e=i(e,o))?-s:e<t?s:0}return this.toArray((function(t){return t.sort(a)})).then(e)},zs.prototype.toArray=function(t){var e=this;return this._read((function(t){var n=e._ctx;if("next"===n.dir&&js(n,!0)&&0<n.limit){var r=n.valueMapper,o=Ps(n,n.table.core.schema);return n.table.core.query({trans:t,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then((function(t){return t=t.result,r?t.map(r):t}))}var i=[];return Ms(n,(function(t){return i.push(t)}),t,n.table.core).then((function(){return i}))}),t)},zs.prototype.offset=function(t){var e=this._ctx;return t<=0||(e.offset+=t,js(e)?Us(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?--e:n((function(){t.advance(e),e=0})),!1)}})):Us(e,(function(){var e=t;return function(){return--e<0}}))),this},zs.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Us(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),0<=e}}),!0),this},zs.prototype.until=function(t,e){return As(this._ctx,(function(n,r,o){return!t(n.value)||(r(o),e)})),this},zs.prototype.first=function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},zs.prototype.last=function(t){return this.reverse().first(t)},zs.prototype.filter=function(t){var e;return As(this._ctx,(function(e){return t(e.value)})),(e=this._ctx).isMatch=Os(e.isMatch,t),this},zs.prototype.and=function(t){return this.filter(t)},zs.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},zs.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},zs.prototype.desc=function(){return this.reverse()},zs.prototype.eachKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},zs.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},zs.prototype.eachPrimaryKey=function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},zs.prototype.keys=function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},zs.prototype.primaryKeys=function(t){var e=this._ctx;if("next"===e.dir&&js(e,!0)&&0<e.limit)return this._read((function(t){var n=Ps(e,e.table.core.schema);return e.table.core.query({trans:t,values:!1,limit:e.limit,query:{index:n,range:e.range}})})).then((function(t){return t.result})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},zs.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},zs.prototype.firstKey=function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},zs.prototype.lastKey=function(t){return this.reverse().firstKey(t)},zs.prototype.distinct=function(){var t;if(!(t=(t=this._ctx).index&&t.table.schema.idxByName[t.index])||!t.multi)return this;var e={};return As(this._ctx,(function(t){var n=t.primaryKey.toString();return t=ho(e,n),e[n]=!0,!t})),this},zs.prototype.modify=function(t){var e=this,n=this._ctx;return this._write((function(r){var o,i,s;function a(t,e){var n=e.failures;e=e.numFailures,p+=t-e;for(var r=0,o=so(n);r<o.length;r++){var i=o[r];f.push(n[i])}}s="function"==typeof t?t:(o=so(t),i=o.length,function(e){for(var n=!1,r=0;r<i;++r){var s=o[r],a=t[s];To(e,s)!==a&&(Io(e,s,a),n=!0)}return n});var u=n.table.core,l=u.schema.primaryKey,c=l.outbound,g=l.extractKey,h="testmode"in Na?1:2e3,d=e.db.core.cmp,f=[],p=0,m=[];return e.clone().primaryKeys().then((function(t){var e=function e(n){var o=Math.min(h,t.length-n);return u.getMany({trans:r,keys:t.slice(n,n+o)}).then((function(i){for(var l=[],f=[],p=c?[]:null,m=[],b=0;b<o;++b){var y=i[b],w={value:Uo(y),primKey:t[n+b]};!1!==s.call(w,w.value,w)&&(null==w.value?m.push(t[n+b]):c||0===d(g(y),g(w.value))?(f.push(w.value),c&&p.push(t[n+b])):(m.push(t[n+b]),l.push(w.value)))}return Promise.resolve(0<l.length&&u.mutate({trans:r,type:"add",values:l}).then((function(t){for(var e in t.failures)m.splice(parseInt(e),1);a(l.length,t)}))).then((function(t){return 0<f.length&&u.mutate({trans:r,type:"put",keys:p,values:f}).then((function(t){return a(f.length,t)}))})).then((function(){return 0<m.length&&u.mutate({trans:r,type:"delete",keys:m}).then((function(t){return a(m.length,t)}))})).then((function(){return t.length>n+o&&e(n+h)}))}))};return e(0).then((function(){if(0<f.length)throw new Qo("Error modifying one or more objects",f,p,m);return t.length}))}))}))},zs.prototype.delete=function(){var t=this._ctx,e=t.range;return js(t)&&(t.isPrimKey&&!vs||3===e.type)?this._write((function(n){var r=t.table.core.schema.primaryKey,o=e;return t.table.core.count({trans:n,query:{index:r,range:o}}).then((function(e){return t.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((function(t){var n=t.failures;if(t.lastResult,t.results,t=t.numFailures)throw new Qo("Could not delete some values",Object.keys(n).map((function(t){return n[t]})),e-t);return e-t}))}))})):this.modify((function(t,e){return e.value=null}))},zs);function zs(){}function Ks(t,e){return t<e?-1:t===e?0:1}function Fs(t,e){return e<t?-1:t===e?0:1}function qs(t,e,n){return(t=t instanceof Js?new t.Collection(t):t)._ctx.error=new(n||TypeError)(e),t}function Gs(t){return new t.Collection(t,(function(){return Zs("")})).limit(0)}function Vs(t,e,n,r){var o,i,s,a,u,l,c,g=n.length;if(!n.every((function(t){return"string"==typeof t})))return qs(t,bs);function h(t){o="next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()},i="next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()},s="next"===t?Ks:Fs;var e=n.map((function(t){return{lower:i(t),upper:o(t)}})).sort((function(t,e){return s(t.lower,e.lower)}));a=e.map((function(t){return t.upper})),u=e.map((function(t){return t.lower})),c="next"===(l=t)?"":r}h("next"),(t=new t.Collection(t,(function(){return Hs(a[0],u[g-1]+r)})))._ondirectionchange=function(t){h(t)};var d=0;return t._addAlgorithm((function(t,n,r){var o=t.key;if("string"!=typeof o)return!1;var h=i(o);if(e(h,u,d))return!0;for(var f=null,p=d;p<g;++p){var m=function(t,e,n,r,o,i){for(var s=Math.min(t.length,r.length),a=-1,u=0;u<s;++u){var l=e[u];if(l!==r[u])return o(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):o(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):0<=a?t.substr(0,a)+e[a]+n.substr(a+1):null;o(t[u],l)<0&&(a=u)}return s<r.length&&"next"===i?t+n.substr(t.length):s<t.length&&"prev"===i?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}(o,h,a[p],u[p],s,l);null===m&&null===f?d=p+1:(null===f||0<s(f,m))&&(f=m)}return n(null!==f?function(){t.continue(f+c)}:r),!1})),t}function Hs(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Zs(t){return{type:1,lower:t,upper:t}}var Js=(Object.defineProperty(Ys.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),Ys.prototype.between=function(t,e,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(t,e)||0===this._cmp(t,e)&&(n||r)&&(!n||!r)?Gs(this):new this.Collection(this,(function(){return Hs(t,e,!n,!r)}))}catch(t){return qs(this,ms)}},Ys.prototype.equals=function(t){return null==t?qs(this,ms):new this.Collection(this,(function(){return Zs(t)}))},Ys.prototype.above=function(t){return null==t?qs(this,ms):new this.Collection(this,(function(){return Hs(t,void 0,!0)}))},Ys.prototype.aboveOrEqual=function(t){return null==t?qs(this,ms):new this.Collection(this,(function(){return Hs(t,void 0,!1)}))},Ys.prototype.below=function(t){return null==t?qs(this,ms):new this.Collection(this,(function(){return Hs(void 0,t,!1,!0)}))},Ys.prototype.belowOrEqual=function(t){return null==t?qs(this,ms):new this.Collection(this,(function(){return Hs(void 0,t)}))},Ys.prototype.startsWith=function(t){return"string"!=typeof t?qs(this,bs):this.between(t,t+ps,!0,!0)},Ys.prototype.startsWithIgnoreCase=function(t){return""===t?this.startsWith(t):Vs(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],ps)},Ys.prototype.equalsIgnoreCase=function(t){return Vs(this,(function(t,e){return t===e[0]}),[t],"")},Ys.prototype.anyOfIgnoreCase=function(){var t=Fo.apply(Ko,arguments);return 0===t.length?Gs(this):Vs(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},Ys.prototype.startsWithAnyOfIgnoreCase=function(){var t=Fo.apply(Ko,arguments);return 0===t.length?Gs(this):Vs(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,ps)},Ys.prototype.anyOf=function(){var t=this,e=Fo.apply(Ko,arguments),n=this._cmp;try{e.sort(n)}catch(r){return qs(this,ms)}if(0===e.length)return Gs(this);var r=new this.Collection(this,(function(){return Hs(e[0],e[e.length-1])}));r._ondirectionchange=function(r){n="next"===r?t._ascending:t._descending,e.sort(n)};var o=0;return r._addAlgorithm((function(t,r,i){for(var s=t.key;0<n(s,e[o]);)if(++o===e.length)return r(i),!1;return 0===n(s,e[o])||(r((function(){t.continue(e[o])})),!1)})),r},Ys.prototype.notEqual=function(t){return this.inAnyRange([[-1/0,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ys.prototype.noneOf=function(){var t=Fo.apply(Ko,arguments);if(0===t.length)return new this.Collection(this);try{t.sort(this._ascending)}catch(t){return qs(this,ms)}var e=t.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return e.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},Ys.prototype.inAnyRange=function(t,e){var n=this,r=this._cmp,o=this._ascending,i=this._descending,s=this._min,a=this._max;if(0===t.length)return Gs(this);if(!t.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&o(t[0],t[1])<=0})))return qs(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ni.InvalidArgument);var u,l=!e||!1!==e.includeLowers,c=e&&!0===e.includeUppers,g=o;function h(t,e){return g(t[0],e[0])}try{(u=t.reduce((function(t,e){for(var n=0,o=t.length;n<o;++n){var i=t[n];if(r(e[0],i[1])<0&&0<r(e[1],i[0])){i[0]=s(i[0],e[0]),i[1]=a(i[1],e[1]);break}}return n===o&&t.push(e),t}),[])).sort(h)}catch(t){return qs(this,ms)}var d=0,f=c?function(t){return 0<o(t,u[d][1])}:function(t){return 0<=o(t,u[d][1])},p=l?function(t){return 0<i(t,u[d][0])}:function(t){return 0<=i(t,u[d][0])},m=f;return(t=new this.Collection(this,(function(){return Hs(u[0][0],u[u.length-1][1],!l,!c)})))._ondirectionchange=function(t){g="next"===t?(m=f,o):(m=p,i),u.sort(h)},t._addAlgorithm((function(t,e,r){for(var i,s=t.key;m(s);)if(++d===u.length)return e(r),!1;return!f(i=s)&&!p(i)||(0===n._cmp(s,u[d][1])||0===n._cmp(s,u[d][0])||e((function(){g===o?t.continue(u[d][0]):t.continue(u[d][1])})),!1)})),t},Ys.prototype.startsWithAnyOf=function(){var t=Fo.apply(Ko,arguments);return t.every((function(t){return"string"==typeof t}))?0===t.length?Gs(this):this.inAnyRange(t.map((function(t){return[t,t+ps]}))):qs(this,"startsWithAnyOf() only works with strings")},Ys);function Ys(){}function Ws(t){return 1===t.length?t[0]:t}function $s(t){try{return t.only([[]]),[[]]}catch(t){return ps}}function Xs(t){return Zi((function(e){return Qs(e),t(e.target.error),!1}))}function Qs(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ta=(ea.prototype._lock=function(){return ko(!Ci.global),++this._reculock,1!==this._reculock||Ci.global||(Ci.lockOwnerFor=this),this},ea.prototype._unlock=function(){if(ko(!Ci.global),0==--this._reculock)for(Ci.global||(Ci.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var t=this._blockedFuncs.shift();try{as(t[1],t[0])}catch(t){}}return this},ea.prototype._locked=function(){return this._reculock&&Ci.lockOwnerFor!==this},ea.prototype.create=function(t){var e=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(ko(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ni.DatabaseClosed(r);case"MissingAPIError":throw new ni.MissingAPI(r.message,r);default:throw new ni.OpenFailed(r)}if(!this.active)throw new ni.TransactionInactive;return ko(null===this._completion._state),(t=this.idbtrans=t||n.transaction(Ws(this.storeNames),this.mode)).onerror=Zi((function(n){Qs(n),e._reject(t.error)})),t.onabort=Zi((function(n){Qs(n),e.active&&e._reject(new ni.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=Zi((function(){e.active=!1,e._resolve()})),this},ea.prototype._promise=function(t,e,n){var r=this;if("readwrite"===t&&"readwrite"!==this.mode)return ds(new ni.ReadOnly("Transaction is readonly"));if(!this.active)return ds(new ni.TransactionInactive);if(this._locked())return new Ui((function(o,i){r._blockedFuncs.push([function(){r._promise(t,e,n).then(o,i)},Ci])}));if(n)return ts((function(){var t=new Ui((function(t,n){r._lock();var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var o=new Ui((function(t,n){var o=e(t,n,r);o&&o.then&&o.then(t,n)}));return o._lib=!0,o},ea.prototype._root=function(){return this.parent?this.parent._root():this},ea.prototype.waitFor=function(t){var e,n=this._root(),r=Ui.resolve(t);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],e=n.idbtrans.objectStore(n.storeNames[0]),function t(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(e.get(-1/0).onsuccess=t)}());var o=n._waitingFor;return new Ui((function(t,e){r.then((function(e){return n._waitingQueue.push(Zi(t.bind(null,e)))}),(function(t){return n._waitingQueue.push(Zi(e.bind(null,t)))})).finally((function(){n._waitingFor===o&&(n._waitingFor=null)}))}))},ea.prototype.abort=function(){this.active&&this._reject(new ni.Abort),this.active=!1},ea.prototype.table=function(t){var e=this._memoizedTables||(this._memoizedTables={});if(ho(e,t))return e[t];var n=this.schema[t];if(!n)throw new ni.NotFound("Table "+t+" not part of transaction");return(n=new this.db.Table(t,n,this)).core=this.db.core.table(t),e[t]=n},ea);function ea(){}function na(t,e,n,r,o,i,s){return{name:t,keyPath:e,unique:n,multi:r,auto:o,compound:i,src:(n&&!s?"&":"")+(r?"*":"")+(o?"++":"")+ra(e)}}function ra(t){return"string"==typeof t?t:t?"["+[].join.call(t,"+")+"]":""}function oa(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Oo(n,(function(t){return[t.name,t]}))}}function ia(t){return null==t?function(){}:"string"==typeof t?1===(e=t).split(".").length?function(t){return t[e]}:function(t){return To(t,e)}:function(e){return To(e,t)};var e}function sa(t,e){return"delete"===e.type?e.keys:e.keys||e.values.map(t.extractKey)}function aa(t){return[].slice.call(t)}var ua=0;function la(t){return null==t?":id":"string"==typeof t?t:"["+t.join("+")+"]"}function ca(t,e,n,r){var o=e.cmp.bind(e);function i(t){if(3===t.type)return null;if(4===t.type)throw new Error("Cannot convert never type to IDBKeyRange");var e=t.lower,r=t.upper,o=t.lowerOpen;return t=t.upperOpen,void 0===e?void 0===r?null:n.upperBound(r,!!t):void 0===r?n.lowerBound(e,!!o):n.bound(e,r,!!o,!!t)}r=(a=r,u=aa((s=t).objectStoreNames),e={schema:{name:s.name,tables:u.map((function(t){return a.objectStore(t)})).map((function(t){var e=t.keyPath,n=t.autoIncrement,r=ao(e),o={};return n={name:t.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==e,compound:r,keyPath:e,autoIncrement:n,unique:!0,extractKey:ia(e)},indexes:aa(t.indexNames).map((function(e){return t.index(e)})).map((function(t){var e=t.name,n=t.unique,r=t.multiEntry;return t=t.keyPath,r={name:e,compound:ao(t),keyPath:t,unique:n,multiEntry:r,extractKey:ia(t)},o[la(t)]=r})),getIndexByKeyPath:function(t){return o[la(t)]}},o[":id"]=n.primaryKey,null!=e&&(o[la(e)]=n.primaryKey),n}))},hasGetAll:0<u.length&&"getAll"in a.objectStore(u[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var s,a,u,l=e.hasGetAll,c=(e=r.tables.map((function(t){var e,n=t.name;return{name:n,schema:t,mutate:function(e){var r=e.trans,o=e.type,s=e.keys,a=e.values,u=e.range,l=e.wantResults;return new Promise((function(e,c){e=Zi(e);var g=r.objectStore(n),h=null==g.keyPath,d="put"===o||"add"===o;if(!d&&"delete"!==o&&"deleteRange"!==o)throw new Error("Invalid operation type: "+o);var f=(s||a||{length:1}).length;if(s&&a&&s.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(t){++_,Qs(t),y&&(y[t.target._reqno]=void 0),w[t.target._reqno]=t.target.error}function m(t){t=t.target,y[t._reqno]=t.result}var b,y=l&&io(s||sa(t.primaryKey,{type:o,keys:s,values:a})),w=[],_=0;if("deleteRange"===o){if(4===u.type)return e({numFailures:_,failures:w,results:y,lastResult:void 0});b=3===u.type?g.clear():g.delete(i(u))}else{var v=(h=d?h?[a,s]:[a,null]:[s,null])[0],S=h[1];if(d)for(var k=0;k<f;++k)(b=S&&void 0!==S[k]?g[o](v[k],S[k]):g[o](v[k]))._reqno=k,y&&void 0===y[k]&&(b.onsuccess=m),b.onerror=p;else for(k=0;k<f;++k)(b=g[o](v[k]))._reqno=k,b.onerror=p}function L(t){t=t.target.result,y&&(y[f-1]=t),e({numFailures:_,failures:w,results:y,lastResult:t})}b.onerror=function(t){p(t),L(t)},b.onsuccess=L}))},getMany:function(t){var e=t.trans,r=t.keys;return new Promise((function(t,o){t=Zi(t);for(var i,s=e.objectStore(n),a=r.length,u=new Array(a),l=0,c=0,g=function(e){e=e.target,u[e._pos]=e.result,++c===l&&t(u)},h=Xs(o),d=0;d<a;++d)null!=r[d]&&((i=s.get(r[d]))._pos=d,i.onsuccess=g,i.onerror=h,++l);0===l&&t(u)}))},get:function(t){var e=t.trans,r=t.key;return new Promise((function(t,o){t=Zi(t);var i=e.objectStore(n).get(r);i.onsuccess=function(e){return t(e.target.result)},i.onerror=Xs(o)}))},query:(e=l,function(t){return new Promise((function(r,o){r=Zi(r);var s,a,u,l=t.trans,c=t.values,g=t.limit,h=t.query,d=g===1/0?void 0:g,f=h.index;if(h=h.range,l=l.objectStore(n),f=f.isPrimaryKey?l:l.index(f.name),h=i(h),0===g)return r({result:[]});e?((d=c?f.getAll(h,d):f.getAllKeys(h,d)).onsuccess=function(t){return r({result:t.target.result})},d.onerror=Xs(o)):(s=0,a=!c&&"openKeyCursor"in f?f.openKeyCursor(h):f.openCursor(h),u=[],a.onsuccess=function(t){var e=a.result;return e?(u.push(c?e.value:e.primaryKey),++s===g?r({result:u}):void e.continue()):r({result:u})},a.onerror=Xs(o))}))}),openCursor:function(t){var e=t.trans,r=t.values,o=t.query,s=t.reverse,a=t.unique;return new Promise((function(t,u){t=Zi(t);var l=o.index,c=o.range,g=e.objectStore(n),h=(g=l.isPrimaryKey?g:g.index(l.name),l=s?a?"prevunique":"prev":a?"nextunique":"next",!r&&"openKeyCursor"in g?g.openKeyCursor(i(c),l):g.openCursor(i(c),l));h.onerror=Xs(u),h.onsuccess=Zi((function(n){var r,o,i,s,a=h.result;a?(a.___id=++ua,a.done=!1,r=a.continue.bind(a),o=(o=a.continuePrimaryKey)&&o.bind(a),i=a.advance.bind(a),s=function(){throw new Error("Cursor not stopped")},a.trans=e,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw new Error("Cursor not started")},a.fail=Zi(u),a.next=function(){var t=this,e=1;return this.start((function(){return e--?t.continue():t.stop()})).then((function(){return t}))},a.start=function(t){function e(){if(h.result)try{t()}catch(t){a.fail(t)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()}var n=new Promise((function(t,e){t=Zi(t),h.onerror=Xs(e),a.fail=e,a.stop=function(e){a.stop=a.continue=a.continuePrimaryKey=a.advance=s,t(e)}}));return h.onsuccess=Zi((function(t){h.onsuccess=e,e()})),a.continue=r,a.continuePrimaryKey=o,a.advance=i,e(),n},t(a)):t(null)}),u)}))},count:function(t){var e=t.query,r=t.trans,o=e.index,s=e.range;return new Promise((function(t,e){var a=r.objectStore(n),u=o.isPrimaryKey?a:a.index(o.name);(u=(a=i(s))?u.count(a):u.count()).onsuccess=Zi((function(e){return t(e.target.result)})),u.onerror=Xs(e)}))}}})),{});return e.forEach((function(t){return c[t.name]=t})),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(t){if(!c[t])throw new Error("Table '"+t+"' not found");return c[t]},cmp:o,MIN_KEY:-1/0,MAX_KEY:$s(n),schema:r}}function ga(t,e){var n=e.db;e=function(t,e,n,r){var o=n.IDBKeyRange;return{dbcore:(r=ca(e,n=n.indexedDB,o,r),t.dbcore.reduce((function(t,e){return e=e.create,oo(oo({},t),e(t))}),r))}}(t._middlewares,n,t._deps,e),t.core=e.dbcore,t.tables.forEach((function(e){var n=e.name;t.core.schema.tables.some((function(t){return t.name===n}))&&(e.core=t.core.table(n),t[n]instanceof t.Table&&(t[n].core=e.core))}))}function ha(t,e,n,r){n.forEach((function(n){var o=r[n];e.forEach((function(e){var r=wo(e,n);(!r||"value"in r&&void 0===r.value)&&(e===t.Transaction.prototype||e instanceof t.Transaction?mo(e,n,{get:function(){return this.table(n)},set:function(t){po(this,n,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):e[n]=new t.Table(n,o))}))}))}function da(t,e){e.forEach((function(e){for(var n in e)e[n]instanceof t.Table&&delete e[n]}))}function fa(t,e){return t._cfg.version-e._cfg.version}function pa(t,e){var n,r={del:[],add:[],change:[]};for(n in t)e[n]||r.del.push(n);for(n in e){var o=t[n],i=e[n];if(o){var s={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||o.primKey.auto!==i.primKey.auto&&!ws)s.recreate=!0,r.change.push(s);else{var a=o.idxByName,u=i.idxByName,l=void 0;for(l in a)u[l]||s.del.push(l);for(l in u){var c=a[l],g=u[l];c?c.src!==g.src&&s.change.push(g):s.add.push(g)}(0<s.del.length||0<s.add.length||0<s.change.length)&&r.change.push(s)}}else r.add.push([n,i])}return r}function ma(t,e,n,r){var o=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){return ba(o,t)})),o}function ba(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ya(t,e,n){var r={};return vo(e.objectStoreNames,0).forEach((function(t){for(var e=n.objectStore(t),o=na(ra(a=e.keyPath),a||"",!1,!1,!!e.autoIncrement,a&&"string"!=typeof a,!0),i=[],s=0;s<e.indexNames.length;++s){var a=(u=e.index(e.indexNames[s])).keyPath,u=na(u.name,a,!!u.unique,!!u.multiEntry,!1,a&&"string"!=typeof a,!1);i.push(u)}r[t]=oa(t,o,i)})),r}function wa(t,e,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],s=n.objectStore(i);t._hasGetAll="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var u=s.indexNames[a],l=s.index(u).keyPath,c="string"==typeof l?l:"["+vo(l).join("+")+"]";!e[i]||(l=e[i].idxByName[c])&&(l.name=u,delete e[i].idxByName[c],e[i].idxByName[u]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&uo.WorkerGlobalScope&&uo instanceof uo.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}var _a,va=(Sa.prototype._parseStoresSpec=function(t,e){so(t).forEach((function(n){if(null!==t[n]){var r=t[n].split(",").map((function(t,e){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return na(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ao(r),0===e)})),o=r.shift();if(o.multi)throw new ni.Schema("Primary key cannot be multi-valued");r.forEach((function(t){if(t.auto)throw new ni.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new ni.Schema("Index must have a name and cannot be an empty string")})),e[n]=oa(n,o,r)}}))},Sa.prototype.stores=function(t){var e=this.db;this._cfg.storesSource=this._cfg.storesSource?lo(this._cfg.storesSource,t):t,t=e._versions;var n={},r={};return t.forEach((function(t){lo(n,t._cfg.storesSource),r=t._cfg.dbschema={},t._parseStoresSpec(n,r)})),e._dbSchema=r,da(e,[e._allTables,e,e.Transaction.prototype]),ha(e,[e._allTables,e,e.Transaction.prototype,this._cfg.tables],so(r),r),e._storeNames=so(r),this},Sa.prototype.upgrade=function(t){return this._cfg.contentUpgrade=t,this},Sa);function Sa(){}function ka(t){return ts((function(){return Ci.letThrough=!0,t()}))}function La(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then((function(){return e.dbOpenError?ds(e.dbOpenError):t}));Go&&(e.openCanceller._stackHolder=Jo()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.dbReadyResolve,o=null;return Ui.race([e.openCanceller,new Ui((function(r,i){if(!n)throw new ni.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var s=t.name,a=e.autoSchema?n.open(s):n.open(s,Math.round(10*t.verno));if(!a)throw new ni.MissingAPI("IndexedDB API not available");a.onerror=Xs(i),a.onblocked=Zi(t._fireOnBlocked),a.onupgradeneeded=Zi((function(r){var u;o=a.transaction,e.autoSchema&&!t._options.allowEmptyDB?(a.onerror=Qs,o.abort(),a.result.close(),(u=n.deleteDatabase(s)).onsuccess=u.onerror=Zi((function(){i(new ni.NoSuchDatabase("Database "+s+" doesnt exist"))}))):(o.onerror=Xs(i),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,t.idbdb=a.result,function(t,e,n,r){var o=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,o);i.create(n),i._completion.catch(r);var s=i._reject.bind(i),a=Ci.transless||Ci;ts((function(){var r,u,l,c,g,h,d,f;Ci.trans=i,Ci.transless=a,0===e?(so(o).forEach((function(t){ma(n,t,o[t].primKey,o[t].indexes)})),ga(t,n),Ui.follow((function(){return t.on.populate.fire(i)})).catch(s)):(u=e,l=i,c=n,g=[],h=(r=t)._versions,d=r._dbSchema=ya(0,r.idbdb,c),f=!1,h.filter((function(t){return t._cfg.version>=u})).forEach((function(t){g.push((function(){var e=d,n=t._cfg.dbschema;wa(r,e,c),wa(r,n,c),d=r._dbSchema=n;var o=pa(e,n);o.add.forEach((function(t){ma(c,t[0],t[1].primKey,t[1].indexes)})),o.change.forEach((function(t){if(t.recreate)throw new ni.Upgrade("Not yet support for changing primary key");var e=c.objectStore(t.name);t.add.forEach((function(t){return ba(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),ba(e,t)})),t.del.forEach((function(t){return e.deleteIndex(t)}))}));var i=t._cfg.contentUpgrade;if(i&&t._cfg.version>u){ga(r,c),l._memoizedTables={},f=!0;var s=No(n);o.del.forEach((function(t){s[t]=e[t]})),da(r,[r.Transaction.prototype]),ha(r,[r.Transaction.prototype],so(s),s),l.schema=s;var a,g=qo(i);return g&&es(),o=Ui.follow((function(){var t;(a=i(l))&&g&&(t=ns.bind(null,null),a.then(t,t))})),a&&"function"==typeof a.then?Ui.resolve(a):o.then((function(){return a}))}})),g.push((function(e){f&&_s||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e),da(r,[r.Transaction.prototype]),ha(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),l.schema=r._dbSchema}))})),function t(){return g.length?Ui.resolve(g.shift()(l.idbtrans)).then(t):Ui.resolve()}().then((function(){var t,e;e=c,so(t=d).forEach((function(n){e.db.objectStoreNames.contains(n)||ma(e,n,t[n].primKey,t[n].indexes)}))})).catch(s))}))}(t,r/10,o,i))}),i),a.onsuccess=Zi((function(){o=null;var n,i,u,l,c=t.idbdb=a.result,g=vo(c.objectStoreNames);if(0<g.length)try{var h=c.transaction(Ws(g),"readonly");e.autoSchema?(u=c,l=h,(i=t).verno=u.version/10,l=i._dbSchema=ya(0,u,l),i._storeNames=vo(u.objectStoreNames,0),ha(i,[i._allTables],so(l),l)):(wa(t,t._dbSchema,h),((n=pa(ya(0,(n=t).idbdb,h),n._dbSchema)).add.length||n.change.some((function(t){return t.add.length||t.change.length})))&&console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),ga(t,h)}catch(n){}ys.push(t),c.onversionchange=Zi((function(n){e.vcFired=!0,t.on("versionchange").fire(n)})),_a.add(s),r()}),i)}))]).then((function(){return e.onReadyBeingFired=[],Ui.resolve(ka(t.on.ready.fire)).then((function t(){if(0<e.onReadyBeingFired.length){var n=e.onReadyBeingFired.reduce(hi,oi);return e.onReadyBeingFired=[],Ui.resolve(ka(n)).then(t)}}))})).finally((function(){e.onReadyBeingFired=null})).then((function(){return e.isBeingOpened=!1,t})).catch((function(n){try{o&&o.abort()}catch(n){}return e.isBeingOpened=!1,t.close(),e.dbOpenError=n,ds(e.dbOpenError)})).finally((function(){e.openComplete=!0,r()}))}function Oa(t){function e(e){return t.next(e)}var n=o(e),r=o((function(e){return t.throw(e)}));function o(t){return function(e){var o=t(e);return e=o.value,o.done?e:e&&"function"==typeof e.then?e.then(n,r):ao(e)?Promise.all(e).then(n,r):n(e)}}return o(e)()}function Ta(t,e,n){for(var r=ao(t)?t.slice():[t],o=0;o<n;++o)r.push(e);return r}var Ia={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return oo(oo({},t),{table:function(e){var n=t.table(e),r=n.schema,o={},i=[];function s(t,e,n){var r=la(t),a=o[r]=o[r]||[],u=null==t?0:"string"==typeof t?1:t.length;return r=0<e,r=oo(oo({},n),{isVirtual:r,isPrimaryKey:!r&&n.isPrimaryKey,keyTail:e,keyLength:u,extractKey:ia(t),unique:!r&&n.unique}),a.push(r),r.isPrimaryKey||i.push(r),1<u&&s(2===u?t[0]:t.slice(0,u-1),e+1,n),a.sort((function(t,e){return t.keyTail-e.keyTail})),r}e=s(r.primaryKey.keyPath,0,r.primaryKey),o[":id"]=[e];for(var a=0,u=r.indexes;a<u.length;a++){var l=u[a];s(l.keyPath,0,l)}function c(e){var n,r=e.query.index;return r.isVirtual?oo(oo({},e),{query:{index:r,range:(n=e.query.range,r=r.keyTail,{type:1===n.type?2:n.type,lower:Ta(n.lower,n.lowerOpen?t.MAX_KEY:t.MIN_KEY,r),lowerOpen:!0,upper:Ta(n.upper,n.upperOpen?t.MIN_KEY:t.MAX_KEY,r),upperOpen:!0})}}):e}return oo(oo({},n),{schema:oo(oo({},r),{primaryKey:e,indexes:i,getIndexByKeyPath:function(t){return(t=o[la(t)])&&t[0]}}),count:function(t){return n.count(c(t))},query:function(t){return n.query(c(t))},openCursor:function(e){var r=e.query.index,o=r.keyTail,i=r.isVirtual,s=r.keyLength;return i?n.openCursor(c(e)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Ta(r,e.reverse?t.MAX_KEY:t.MIN_KEY,o)):e.unique?n.continue(Ta(n.key,e.reverse?t.MIN_KEY:t.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(e,r){n.continuePrimaryKey(Ta(e,t.MAX_KEY,o),r)}},key:{get:function(){var t=n.key;return 1===s?t[0]:t.slice(0,s)}},value:{get:function(){return n.value}}})}(n)})):n.openCursor(e)}})}})}},Ea={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return oo(oo({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey;return oo(oo({},n),{mutate:function(t){var o=Ci.trans,i=o.table(e).hook,s=i.deleting,a=i.creating,u=i.updating;switch(t.type){case"add":if(a.fire===oi)break;return o._promise("readwrite",(function(){return l(t)}),!0);case"put":if(a.fire===oi&&u.fire===oi)break;return o._promise("readwrite",(function(){return l(t)}),!0);case"delete":if(s.fire===oi)break;return o._promise("readwrite",(function(){return l(t)}),!0);case"deleteRange":if(s.fire===oi)break;return o._promise("readwrite",(function(){return function t(e,o,i){return n.query({trans:e,values:!1,query:{index:r,range:o},limit:i}).then((function(n){var r=n.result;return l({type:"delete",keys:r,trans:e}).then((function(n){return 0<n.numFailures?Promise.reject(n.failures[0]):r.length<i?{failures:[],numFailures:0,lastResult:void 0}:t(e,oo(oo({},o),{lower:r[r.length-1],lowerOpen:!0}),i)}))}))}(t.trans,t.range,1e4)}),!0)}return n.mutate(t);function l(t){var e,o,i,l=Ci.trans,c=t.keys||sa(r,t);if(!c)throw new Error("Keys missing");return"delete"!==(t="add"===t.type||"put"===t.type?oo(oo({},t),{keys:c,wantResults:!0}):oo({},t)).type&&(t.values=io(t.values)),t.keys&&(t.keys=io(t.keys)),e=n,i=c,("add"===(o=t).type?Promise.resolve(new Array(o.values.length)):e.getMany({trans:o.trans,keys:i})).then((function(e){var o=c.map((function(n,o){var i,c,g,h=e[o],d={onerror:null,onsuccess:null};return"delete"===t.type?s.fire.call(d,n,h,l):"add"===t.type||void 0===h?(i=a.fire.call(d,n,t.values[o],l),null==n&&null!=i&&(t.keys[o]=n=i,r.outbound||Io(t.values[o],r.keyPath,n))):(i=Do(h,t.values[o]),(c=u.fire.call(d,i,n,h,l))&&(g=t.values[o],Object.keys(c).forEach((function(t){ho(g,t)?g[t]=c[t]:Io(g,t,c[t])})))),d}));return n.mutate(t).then((function(n){for(var r=n.failures,i=n.results,s=n.numFailures,a=(n=n.lastResult,0);a<c.length;++a){var u=(i||c)[a],l=o[a];null==u?l.onerror&&l.onerror(r[a]):l.onsuccess&&l.onsuccess("put"===t.type&&e[a]?t.values[a]:u)}return{failures:r,results:i,numFailures:s,lastResult:n}})).catch((function(t){return o.forEach((function(e){return e.onerror&&e.onerror(t)})),Promise.reject(t)}))}))}}})}})}},Na=(Ca.prototype.version=function(t){if(isNaN(t)||t<.1)throw new ni.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ni.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=this._versions,n=e.filter((function(e){return e._cfg.version===t}))[0];return n||(n=new this.Version(t),e.push(n),e.sort(fa),n.stores({}),this._state.autoSchema=!1,n)},Ca.prototype._whenReady=function(t){var e=this;return this._state.openComplete||Ci.letThrough?t():new Ui((function(t,n){if(!e._state.isBeingOpened){if(!e._options.autoOpen)return void n(new ni.DatabaseClosed);e.open().catch(oi)}e._state.dbReadyPromise.then(t,n)})).then(t)},Ca.prototype.use=function(t){var e=t.stack,n=t.create,r=t.level,o=t.name;return o&&this.unuse({stack:e,name:o}),(t=this._middlewares[e]||(this._middlewares[e]=[])).push({stack:e,create:n,level:null==r?10:r,name:o}),t.sort((function(t,e){return t.level-e.level})),this},Ca.prototype.unuse=function(t){var e=t.stack,n=t.name,r=t.create;return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((function(t){return r?t.create!==r:!!n&&t.name!==n}))),this},Ca.prototype.open=function(){return La(this)},Ca.prototype.close=function(){var t=ys.indexOf(this),e=this._state;if(0<=t&&ys.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}this._options.autoOpen=!1,e.dbOpenError=new ni.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError),e.dbReadyPromise=new Ui((function(t){e.dbReadyResolve=t})),e.openCanceller=new Ui((function(t,n){e.cancelOpen=n}))},Ca.prototype.delete=function(){var t=this,e=0<arguments.length,n=this._state;return new Ui((function(r,o){function i(){t.close();var e=t._deps.indexedDB.deleteDatabase(t.name);e.onsuccess=Zi((function(){_a.remove(t.name),r()})),e.onerror=Xs(o),e.onblocked=t._fireOnBlocked}if(e)throw new ni.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()}))},Ca.prototype.backendDB=function(){return this.idbdb},Ca.prototype.isOpen=function(){return null!==this.idbdb},Ca.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&"DatabaseClosed"===t.name},Ca.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Ca.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ca.prototype,"tables",{get:function(){var t=this;return so(this._allTables).map((function(e){return t._allTables[e]}))},enumerable:!0,configurable:!0}),Ca.prototype.transaction=function(){var t=function(t,e,n){var r=arguments.length;if(r<2)throw new ni.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return n=o.pop(),[t,Bo(o),n]}.apply(this,arguments);return this._transaction.apply(this,t)},Ca.prototype._transaction=function(t,e,n){var r=this,o=Ci.trans;o&&o.db===this&&-1===t.indexOf("!")||(o=null);var i,s,a=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{if(s=e.map((function(t){if("string"!=typeof(t=t instanceof r.Table?t.name:t))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==t||t===ks)i=ks;else{if("rw"!=t&&t!=Ls)throw new ni.InvalidArgument("Invalid transaction mode: "+t);i=Ls}if(o){if(o.mode===ks&&i===Ls){if(!a)throw new ni.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&s.forEach((function(t){if(o&&-1===o.storeNames.indexOf(t)){if(!a)throw new ni.SubTransaction("Table "+t+" not included in parent transaction.");o=null}})),a&&o&&!o.active&&(o=null)}}catch(n){return o?o._promise(null,(function(t,e){e(n)})):ds(n)}var u=function(t,e,n,r,o){return Ui.resolve().then((function(){var i=Ci.transless||Ci,s=t._createTransaction(e,n,t._dbSchema,r);i={trans:s,transless:i},r?s.idbtrans=r.idbtrans:s.create();var a,u=qo(o);return u&&es(),i=Ui.follow((function(){var t;(a=o.call(s,s))&&(u?(t=ns.bind(null,null),a.then(t,t)):"function"==typeof a.next&&"function"==typeof a.throw&&(a=Oa(a)))}),i),(a&&"function"==typeof a.then?Ui.resolve(a).then((function(t){return s.active?t:ds(new ni.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):i.then((function(){return a}))).then((function(t){return r&&s._resolve(),s._completion.then((function(){return t}))})).catch((function(t){return s._reject(t),ds(t)}))}))}.bind(null,this,i,s,o,n);return o?o._promise(i,u,"lock"):Ci.trans?as(Ci.transless,(function(){return r._whenReady(u)})):this._whenReady(u)},Ca.prototype.table=function(t){if(!ho(this._allTables,t))throw new ni.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},Ca);function Ca(t,e){var n=this;this._middlewares={},this.verno=0;var r=Ca.dependencies;this._options=e=oo({addons:Ca.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},e),this._deps={indexedDB:e.indexedDB,IDBKeyRange:e.IDBKeyRange},r=e.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={};var o,i,s,a,u,l={dbOpenError:this.idbdb=null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oi,dbReadyPromise:null,cancelOpen:oi,openCanceller:null,autoSchema:!0};l.dbReadyPromise=new Ui((function(t){l.dbReadyResolve=t})),l.openCanceller=new Ui((function(t,e){l.cancelOpen=e})),this._state=l,this.name=t,this.on=Cs(this,"populate","blocked","versionchange",{ready:[hi,oi]}),this.on.ready.subscribe=So(this.on.ready.subscribe,(function(t){return function(e,r){Ca.vip((function(){var o,i=n._state;i.openComplete?(i.dbOpenError||Ui.resolve().then(e),r&&t(e)):i.onReadyBeingFired?(i.onReadyBeingFired.push(e),r&&t(e)):(t(e),o=n,r||t((function t(){o.on.ready.unsubscribe(e),o.on.ready.unsubscribe(t)})))}))}})),this.Collection=(o=this,Bs(Rs.prototype,(function(t,e){this.db=o;var n=Ts,r=null;if(e)try{n=e()}catch(t){r=t}var i=t._ctx;t=(e=i.table).hook.reading.fire,this._ctx={table:e,index:i.index,isPrimKey:!i.index||e.schema.primKey.keyPath&&i.index===e.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:t!==ii?t:null}}))),this.Table=(i=this,Bs(Es.prototype,(function(t,e,n){this.db=i,this._tx=n,this.name=t,this.schema=e,this.hook=i._allTables[t]?i._allTables[t].hook:Cs(null,{creating:[ui,oi],reading:[si,ii],updating:[ci,oi],deleting:[li,oi]})}))),this.Transaction=(s=this,Bs(ta.prototype,(function(t,e,n,r){var o=this;this.db=s,this.mode=t,this.storeNames=e,this.schema=n,this.idbtrans=null,this.on=Cs(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ui((function(t,e){o._resolve=t,o._reject=e})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(t){var e=o.active;return o.active=!1,o.on.error.fire(t),o.parent?o.parent._reject(t):e&&o.idbtrans&&o.idbtrans.abort(),ds(t)}))}))),this.Version=(a=this,Bs(va.prototype,(function(t){this.db=a,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(u=this,Bs(Js.prototype,(function(t,e,n){this.db=u,this._ctx={table:t,index:":id"===e?null:e,or:n};var r=u._deps.indexedDB;if(!r)throw new ni.MissingAPI("indexedDB API missing");this._cmp=this._ascending=r.cmp.bind(r),this._descending=function(t,e){return r.cmp(e,t)},this._max=function(t,e){return 0<r.cmp(t,e)?t:e},this._min=function(t,e){return r.cmp(t,e)<0?t:e},this._IDBKeyRange=u._deps.IDBKeyRange}))),this.on("versionchange",(function(t){0<t.newVersion?console.warn("Another connection wants to upgrade database '"+n.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+n.name+"'. Closing db now to resume the delete request."),n.close()})),this.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+n.name+"') was blocked"):console.warn("Upgrade '"+n.name+"' blocked by other connection holding version "+t.oldVersion/10)})),this._maxKey=$s(e.IDBKeyRange),this._createTransaction=function(t,e,r,o){return new n.Transaction(t,e,r,o)},this._fireOnBlocked=function(t){n.on("blocked").fire(t),ys.filter((function(t){return t.name===n.name&&t!==n&&!t._state.vcFired})).map((function(e){return e.on("versionchange").fire(t)}))},this.use(Ia),this.use(Ea),r.forEach((function(t){return t(n)}))}var Ba=Na;fo(Ba,oo(oo({},pn),{delete:function(t){return new Ba(t).delete()},exists:function(t){return new Ba(t,{addons:[]}).open().then((function(t){return t.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(t){return _a?_a.getDatabaseNames().then(t):Ui.resolve([])},defineClass:function(){return function(t){lo(this,t)}},ignoreTransaction:function(t){return Ci.trans?as(Ci.transless,t):t()},vip:ka,async:function(t){return function(){try{var e=Oa(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Ui.resolve(e)}catch(e){return ds(e)}}},spawn:function(t,e,n){try{var r=Oa(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Ui.resolve(r)}catch(t){return ds(t)}},currentTransaction:{get:function(){return Ci.trans||null}},waitFor:function(t,e){return e=Ui.resolve("function"==typeof t?Ba.ignoreTransaction(t):t).timeout(e||6e4),Ci.trans?Ci.trans.waitFor(e):e},Promise:Ui,debug:{get:function(){return Go},set:function(t){Vo(t,"dexie"===t?function(){return!0}:fs)}},derive:bo,extend:lo,props:fo,override:So,Events:Cs,getByKeyPath:To,setByKeyPath:Io,delByKeyPath:Eo,shallowClone:No,deepClone:Uo,getObjectDiff:Do,asap:Lo,minKey:-1/0,addons:[],connections:ys,errnames:Ue,dependencies:function(){try{return{indexedDB:uo.indexedDB||uo.mozIndexedDB||uo.webkitIndexedDB||uo.msIndexedDB,IDBKeyRange:uo.IDBKeyRange||uo.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"3.0.3",version:"3.0.3".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:Ba,Dexie:Ba})),Ba.maxKey=$s(Ba.dependencies.IDBKeyRange),function(t){try{(o=(e=t)&&"function"==typeof e.databases)||((r=new Na(Ss,{addons:[]})).version(1).stores({dbnames:"name"}),n=r.table("dbnames")),_a={getDatabaseNames:function(){return o?Ui.resolve(e.databases()).then((function(t){return t.map((function(t){return t.name})).filter((function(t){return t!==Ss}))})):n.toCollection().primaryKeys()},add:function(t){return!o&&t!==Ss&&n.put({name:t}).catch(oi)},remove:function(t){return!o&&t!==Ss&&n.delete(t).catch(oi)}}}catch(t){}var e,n,r,o}(Na.dependencies.indexedDB),Ui.rejectionMapper=function(t,e){return!t||t instanceof $o||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ri[t.name]?t:(e=new ri[t.name](e||t.message,t),"stack"in t&&mo(e,"stack",{get:function(){return this.inner.stack}}),e)},Vo(Go,fs);var ja=Na,Aa=null,Ua=1,Pa="im_msimSdkInfo",xa="im_chatHistory",Ma="im_chatList",Da={chatList:["&conversationID","uid","msgEnd","msgLastRead","showMsgId","showMsgType","showMsg","showMsgTime","showTime","showMsgFromUid","unread","matched","newMsg","myMove","iceBreak","tipFree","topAlbum","iBlockU","iChatU","uChatI","deleted"].join(),msgList:["&onlyId","conversationID","fromUid","toUid","msgId","msgTime","showMsgTime","sendStatus","text","url","type","thumb","width","height","duration","title","lat","lng","zoom","content","sput","newMsg"].join(),chatHistory:["&conversationID"].join()},Ra={};function za(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ka(t,e){switch(t){case Pa:"Object"!==za(e)&&(e=null);break;case xa:case Ma:"Array"!==za(e)&&(e=[])}return e}function Fa(t){try{var e=window.localStorage.getItem(t);return Ka(t,e=JSON.parse(e))}catch(n){return Ka(t,null)}}function qa(t,e){window.localStorage.setItem(t,JSON.stringify(e))}Ra.initDB=function(t){window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB?((Aa=new ja("imWsDB")).version(Ua).stores(Da),Aa.open().then((function(e){Ua=Aa.verno,t()})).catch((function(e){Aa=null,t(),console.warn(e)}))):t()},Ra.deleteDB=function(){ja.delete("imWsDB"),window.localStorage.removeItem(Pa),window.localStorage.removeItem(xa),window.localStorage.removeItem(Ma)},Ra.clear=function(){null!=Aa&&Aa.isOpen&&Aa.isOpen()?Aa.transaction("rw",Aa.tables,(function(){Aa.tables.forEach((function(t){t.clear()}))})):(window.localStorage.removeItem(Pa),window.localStorage.removeItem(xa),window.localStorage.removeItem(Ma))},Ra.addChatList=function(t){if(null!=Aa&&Aa.isOpen&&Aa.isOpen())Aa.chatList.bulkPut(t);else{var e=Fa(Ma);e=e.concat(t),qa(Ma,e)}},Ra.updateChat=function(t){if(null!=Aa&&Aa.isOpen&&Aa.isOpen())return Aa.chatList.put(t);var e=Fa(Ma),n=t;return e=e.map((function(e){return e.conversationID===t.conversationID&&(n=Object.assign(e,t)),e})),qa(Ma,e),Promise.resolve(n)},Ra.getChatList=function(){if(null!=Aa&&Aa.isOpen&&Aa.isOpen())return Aa.chatList.toCollection().and((function(t){return!1===t.deleted})).toArray();var t=Fa(Ma);return t=t.filter((function(t){return!1===t.deleted})),Promise.resolve(t)},Ra.getChat=function(t){if(null!=Aa&&Aa.isOpen&&Aa.isOpen())return Aa.chatList.get({conversationID:t});var e=Fa(Ma).find((function(e){return e.conversationID===t}));return Promise.resolve(e)},Ra.addChatKey=function(t){if(null!=Aa&&Aa.isOpen&&Aa.isOpen())Aa.chatHistory.put({conversationID:t});else{var e=Fa(xa);e.find((function(e){return e.conversationID===t}))||(e.push({conversationID:t}),qa(xa,e))}},Ra.getChatKeys=function(){return null!=Aa&&Aa.isOpen&&Aa.isOpen()?Aa.chatHistory.toArray():Promise.resolve(Fa(xa))},Ra.addMsgList=function(t){null!=Aa&&Aa.msgList.bulkPut(t)},Ra.getMsgList=function(t){return!0!==((null==Aa?void 0:Aa.isOpen)&&Aa.isOpen())?Promise.resolve([]):(t.msgEnd?Aa.msgList.toCollection().and((function(e){return e.conversationID===t.conversationID&&e.msgId<t.msgEnd})):Aa.msgList.where({conversationID:t.conversationID})).sortBy("msgId")},Ra.addMsg=function(t){null!=Aa&&Aa.msgList.put(t)},Ra.updateMsg=function(t){null!=Aa&&Aa.msgList.where({conversationID:t.conversationID,msgId:t.msgId}).modify(t)},Ra.deleteMsgs=function(t,e){e?null!=Aa&&Aa.msgList.toCollection().and((function(n){return n.conversationID===t&&e.includes(n.msgId.toString())})).delete():null!=Aa&&Aa.msgList.where({conversationID:t}).delete()};var Ga,Va,Ha=Ra;function Za(t,e,n){var r=new Set;return e=e.map((function(e){var o=ro.formatChat(e,t.sdkState.uid),i=o.conversationID;return e=t.chatKeys[i],null!=n&&n.find((function(t){return t.conversationID===i}))&&function(t,e,n){var r=ro.createSign();ro.createCallEvent(t,{type:M,callSign:r,callSuc:function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function r(o){var i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:null!=o&&null!==(s=o.messages)&&void 0!==s&&s.length&&function(){var r=o.messages.length-1;o.messages[r].msgId>e+1&&Ha.deleteMsgs(n.conversationID);for(var a=[],u=[],l=[];0<=r;r--){var c=o.messages[r];c.type===X.Recall?(i={conversationID:c.conversationID,msgId:parseInt(c.body),type:X.Revoked},a.push(i),Ha.updateMsg(i)):c.type===X.SysDelete?c.content.split(",").forEach((function(t){l.push(Number(t))})):c.type<64&&(i=ro.formatMsg(c,n.conversationID),u.push(i))}0<l.length&&Ha.deleteMsgs(n.conversationID,l),s=a.concat(u),Ha.addMsgList(s),!0!==n.deleted&&t.handleMessage({type:st,conversationID:n.conversationID,revokeList:a,msgList:u,deleteMsgIds:l})}();case 1:case"end":return r.stop()}}),r)})));function o(t){return r.apply(this,arguments)}return o}(),callErr:function(t){}}),Br(r=vr({sign:r,toUid:n.uid,pageSize:100,msgStart:e}),u)}(t,e.msgEnd,o),o.deleted?e&&(r.add(i),delete t.chatKeys[i]):e?Object.assign(e,o):(t.chatKeys[i]=o,t.chatList.push(o)),o})),0<r.size&&(t.chatList=t.chatList.filter((function(t){return!r.has(t.conversationID)}))),null!=e&&e.length&&Ha.addChatList(e),t.handleMessage({type:it,state:H.SYNC_CHAT_SUCCESS,chats:e}),e}function Ja(t,e,n){var r=ro.sort(t.chatList,"showMsgTime");0<(null==e?void 0:e.pageSize)&&(r=ro.getPageSize(null==e?void 0:e.conversationID,"conversationID",t.chatList,null==e?void 0:e.pageSize)),n(ro.resultSuc(A,{chats:r,hasMore:0<(null==e?void 0:e.pageSize)&&r.length>(null==e?void 0:e.pageSize)}))}function Ya(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,U)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:U,key:"conversationID"});return r(o)}t.chatKeys.hasOwnProperty(e.conversationID)?(o=t.chatKeys[e.conversationID],o=ro.resultSuc(U,o),n(o)):Ha.getChat(e.conversationID).then((function(o){if(o){var i=ro.resultSuc(U,o);return n(i)}var s,a,u;s=t,o=e.conversationID,a=n,u=r,i=ro.createSign(),ro.createCallEvent(s,{type:U,callSign:i,callSuc:function(t){t.data&&(t=ro.formatChat(t.data,s.sdkState.uid),Ha.updateChat(t),t=ro.resultSuc(U,t),a(t))},callErr:function(t){t=ro.serverErr(t,U),u(t)}}),s.curTab?(o=ro.reformatC2CId(o),Br(Or(i,o),m)):Hr(U,{callSign:i,tabId:s.tabId,options:options,state:J})}))}}))}function Wa(t,e){switch(t.type){case X.Recall:!function(t,e){var n,r={conversationID:t.conversationID,msgId:parseInt(t.text),type:X.Revoked};Va[rt.MESSAGE_REVOKED]&&(n=ro.resultNotice(rt.MESSAGE_REVOKED,[r]),Va[rt.MESSAGE_REVOKED](n)),Ga.curTab&&(Vr(S,{type:gt,data:t}),Ha.updateMsg(r),Qa({conversationID:t.conversationID,msgEnd:t.msgId,showMsgId:r.msgId,showMsgTime:t.msgTime,showMsgType:X.Recall})),e()}(t,e);break;case X.Unmatch:n=t,r=e,Ga.chatKeys.hasOwnProperty(n.conversationID)&&(Ga.curTab&&Vr(S,{type:gt,data:n}),Qa({conversationID:n.conversationID,msgEnd:n.msgId,showMsgTime:n.msgTime,showMsgType:X.Unmatch}),r());break;case X.SysDelete:!function(t,e){Ga.curTab&&(n=t.content.split(",").map(Number),Ha.deleteMsgs(t.conversationID,n),t.content=n,Vr(L,{type:gt,data:t}));var n=Ga.chatKeys[t.conversationID];t.content.includes(null==n?void 0:n.showMsgId)&&Qa({conversationID:t.conversationID,showMsgType:X.Deleted,showMsg:""}),Va[rt.MESSAGE_DELETE]&&(t=ro.resultNotice(rt.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.content}),Va[rt.MESSAGE_DELETE](t)),e()}(t,e)}var n,r}function $a(t,e){Ga.curTab&&Vr(k,{type:gt,data:t}),Va[rt.MESSAGE_NOTIFICATION]&&(t=ro.resultNotice(rt.MESSAGE_NOTIFICATION,t),Va[rt.MESSAGE_NOTIFICATION](t)),e()}function Xa(t,e){if(Va[rt.MESSAGE_RECEIVED]&&(r=ro.resultNotice(rt.MESSAGE_RECEIVED,[t]),Va[rt.MESSAGE_RECEIVED](r)),Ga.curTab){var n;Vr(S,{type:gt,data:t}),Ha.addMsg(t),n=t.type===X.Text?t.text:t.content;var r=Ga.sdkState.uid,o={conversationID:t.conversationID,msgEnd:t.msgId,showMsgId:t.msgId,showMsgType:t.type,showMsg:n,showMsgTime:t.msgTime,myMove:t.fromUid!==r,showMsgFromUid:t.fromUid};t.fromUid!==r&&(o.unread=1),t.type===X.Matched&&(o.matched=!0),0<=t.type&&t.type<=30&&(t.fromUid!==r?o.uChatI=!0:o.iChatU=!0),Qa(o),e()}else e()}function Qa(t){return tu.apply(this,arguments)}function tu(){return tu=_asyncToGenerator(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.conversationID||ro.splicingC2CId(e.uid),o=e,t.t0=Ga.curTab,!t.t0){t.next=6;break}return t.next=6,Ya(Ga,{conversationID:n}).then((function(t){var e=t.data;o=e}));case 6:if(!e.event){t.next=10;break}r=function(t,e){var n=_objectSpread({},e);switch(t.event){case Q:n.msgLastRead=t.msgLastRead;break;case tt:n.unread=t.unread;break;case et:n.iBlockU=t.iBlockU;break;case nt:t.deleted&&(n.deleted=t.deleted,Ga.chatKeys.hasOwnProperty(e.conversationID)&&(delete Ga.chatKeys[e.conversationID],Ga.chatList=Ga.chatList.filter((function(t){return t.conversationID!=e.conversationID}))))}return t.updateTime>Ga.updateTime&&(Ga.updateTime=t.updateTime),n}(e,o),t.next=13;break;case 10:if(!(e.showMsgTime<o.showMsgTime)){t.next=12;break}return t.abrupt("return");case 12:r=function(t,e){var n=_objectSpread({},e);if(t.showMsgTime>Ga.updateTime&&(Ga.updateTime=t.showMsgTime),Ga.curTab)switch(t.showMsgType){case X.Recall:t.showMsgId===n.showMsgId?(n.msgEnd=t.msgEnd,n.showMsgType=X.Revoked,n.showMsg=""):n.msgEnd<t.msgEnd&&(n.msgEnd=t.msgEnd);break;case X.Unmatch:n.msgEnd=t.msgEnd,n.matched=!1;break;default:t.unread&&t.msgEnd>n.msgEnd&&(t.unread=(n.unread||0)+t.unread),Object.assign(n,t),n.showTime=parseInt(n.showMsgTime/1e3),n.deleted=!1}return n}(e,o);case 13:!function(t){var e;Ga.chatKeys.hasOwnProperty(t.conversationID)?(e=Ga.chatKeys[t.conversationID],Object.assign(e,t)):!0!==t.deleted&&(Ga.chatKeys[t.conversationID]=t,Ga.chatList.unshift(t)),Va[rt.CONVERSATION_LIST_UPDATED]&&(e=ro.resultNotice(rt.CONVERSATION_LIST_UPDATED,[t]),Va[rt.CONVERSATION_LIST_UPDATED](e)),Ga.curTab&&(Vr(v,{type:lt,data:t}),Ha.updateChat(t))}(r);case 14:case"end":return t.stop()}}),t)}))),tu.apply(this,arguments)}var eu=function(t,e,r){switch(Ga=t,Va=e,r.type){case ot:!function(t){Ga.sdkState.connState=t.state,Ga.curTab&&Vr(E,t),Va[rt.CONNECT_CHANGE]&&(t=ro.resultNotice(rt.CONNECT_CHANGE,{state:t.state}),Va[rt.CONNECT_CHANGE](t))}(r);break;case it:!function(t){if(Ga.curTab?Vr(T,t):t.state===H.SYNC_CHAT_SUCCESS&&t.chats.forEach((function(t){var e;Ga.chatKeys.hasOwnProperty(t.conversationID)?(e=Ga.chatKeys[t.conversationID],Object.assign(e,t)):(Ga.chatKeys[t.conversationID]=t,Ga.chatList.push(t))})),t.state!==H.SYNC_CHAT_START){for(var e in Ga.chatCallEvents)t.state===H.SYNC_CHAT_SUCCESS?Ga.chatCallEvents[e].callSuc():t.state===H.SYNC_CHAT_FAILED&&Ga.chatCallEvents[e].callErr(t.err);var n;Ga.sdkState.chatsSync===H.SYNC_CHAT_SUCCESS?Va[rt.CONVERSATION_LIST_UPDATED]&&0<(null===(n=t.chats)||void 0===n?void 0:n.length)&&(r=ro.resultNotice(rt.CONVERSATION_LIST_UPDATED,t.chats),Va[rt.CONVERSATION_LIST_UPDATED](r)):Ga.sdkState.chatsSync=t.state}var r;Va[rt.SYNC_CHATS_CHANGE]&&(r=ro.resultNotice(rt.SYNC_CHATS_CHANGE,{state:t.state}),Va[rt.SYNC_CHATS_CHANGE](r))}(r);break;case st:!function(t){var e;Ga.curTab&&Vr(I,t),0<t.msgList.length&&Va[rt.MESSAGE_RECEIVED]&&(e=ro.resultNotice(rt.MESSAGE_RECEIVED,t.msgList),Va[rt.MESSAGE_RECEIVED](e)),0<t.deleteMsgIds.length&&Va[rt.MESSAGE_DELETE]&&(e=ro.resultNotice(rt.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.deleteMsgIds}),Va[rt.MESSAGE_DELETE](e)),0<t.revokeList.length&&Va[rt.MESSAGE_REVOKED]&&(t=ro.resultNotice(rt.MESSAGE_REVOKED,t.revokeList),Va[rt.MESSAGE_REVOKED](t))}(r);break;case at:!function(t){var e;Object.assign(Ga.sdkState,t.data),Ga.curTab?(Ga.updateTabs=[Ga.tabId],window.localStorage.setItem("im_wsTabs",JSON.stringify(Ga.updateTabs)),Vr(w,t)):(e="im_update_tabs_"+Ga.tabId,window.localStorage.setItem(e,Ga.tabId),window.localStorage.removeItem(e)),Va[rt.LOGIN]&&(t=ro.resultNotice(rt.LOGIN,{code:$.SUCCESS,loginState:t.data.loginState,uid:t.data.uid}),Va[rt.LOGIN](t))}(r);break;case ut:!function(t){var e;Ga.curTab&&Ga.sdkState.loginState===V.LOGGED&&(e=ro.createSign(),Br(br(e),n)),Ga.clearData(t.data.isBroadcast),t.data.isBroadcast&&(t.data.isBroadcast=!1,Vr(_,t)),Va[rt.LOGOUT]&&(t=ro.resultNotice(rt.LOGOUT,{code:t.data.code,msg:t.data.msg}),Va[rt.LOGOUT](t))}(r);break;case lt:Qa(r.data);break;case ct:!function(t){switch(Ga.curTab&&Vr(O,t),Ga.clearData(Ga.curTab),t.data.code){case $.KICKED_OUT:case $.NO_REGISTER:Va[rt.KICKED_OUT]&&(e=ro.resultNotice(rt.KICKED_OUT,t.data),Va[rt.KICKED_OUT](e));break;case $.TOKEN_NOT_FOUND:var e;Va[rt.TOKEN_NOT_FOUND]&&(e=ro.resultNotice(rt.TOKEN_NOT_FOUND,t.data),Va[rt.TOKEN_NOT_FOUND](e))}}(r);break;case gt:!function(t){t.shift?Ga.msgHandleList.unshift(t):Ga.msgHandleList.push(t),Ga.handleMsgState||function t(){new Promise((function(t,e){try{var n=Ga.msgHandleList.shift().data;if(!n.onlyId){var r=Ga.sdkState.uid===n.fromUid?n.toUid:n.fromUid,o=ro.splicingC2CId(r);n=ro.formatMsg(n,o)}(n.type===X.Notification?$a:64<=n.type&&n.type<=99?Wa:Xa)(n,t)}catch(t){e(t)}})).finally((function(){0<Ga.msgHandleList.length?t():Ga.handleMsgState=!1}))}()}(r)}};function nu(t){return new Promise((function(e,n){if(t.sdkState.loginState===V.LOGGED||t.curTab)console.warn("本地状态",t.curTab,t.sdkState),e(t.sdkState);else{var r=ro.createSign();window.localStorage.setItem("im_getSdkState",t.tabId),window.localStorage.removeItem("im_getSdkState"),t.stateCallEvents[r]={timeOut:Date.now()+3e3,callSuc:function(n){delete t.stateCallEvents[r],console.warn("连接tab的状态",n),e(n)},callErr:function(n){delete t.stateCallEvents[r],console.warn("超时"),e({loginState:V.NOT_LOGIN,chatsSync:H.NOT_SYNC_CHAT,connState:G.NET_STATE_DISCONNECTED})}}}}))}function ru(t,e,n,r){window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),Object.assign(t.sdkState,{loginState:V.LOGGING,wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId}),r={wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId,resolve:n,reject:r,connSuc:function(e){return ou(t,e)},connErr:function(e,n){return iu(t,e)}},Nr(t,r)}function ou(t,n){var r,o;t.handleMessage({type:ot,state:G.NET_STATE_CONNECTED}),r=t,o=n,new Promise((function(t,n){console.warn("sdk开始登录");var i=ro.createSign();ro.createCallEvent(r,{type:B,callSign:i,callSuc:function(e){t(e)},callErr:function(t){jr(),o.isReconect&&(null==t?void 0:t.code)===$.NO_REGISTER&&wsConfig.Global.handleMessage({type:ct,data:t}),t=ro.serverErr(t,B),n(t)}}),Br(mr(i,o.imToken,o.subAppId),e)})).then((function(e){var r;!0!==n.isReconect?(n.isReconect=!0,t.sdkState.uid=e.data.uid,r=ro.resultSuc(B,{msg:e.data.msg,uid:e.data.uid}),n.resolve&&n.resolve(r),setTimeout((function(){t.handleMessage({type:at,data:{uid:e.data.uid,loginState:V.LOGGED,wsUrl:n.wsUrl,imToken:n.imToken,subAppId:n.subAppId}})}),0)):t.sdkState.uid=e.data.uid,function(t){t.handleMessage({type:it,state:H.SYNC_CHAT_START});var e=ro.createSign();ro.createCallEvent(t,{type:A,callSign:e,callSuc:function(e){var n,r;e.updateTime&&e.updateTime>t.updateTime&&(t.updateTime=e.updateTime),0<e.chats.length?t.sdkState.chatsSync===H.SYNC_CHAT_SUCCESS?(n=t,r=e.chats,Ha.getChatKeys().then((function(t){Za(n,r,t)}))):(e=e.chats,Za(t,e)):t.handleMessage({type:it,state:H.SYNC_CHAT_SUCCESS,chats:[]})},callErr:function(e){t.handleMessage({type:it,state:H.SYNC_CHAT_FAILED,err:e})}}),Br(yr(e,t.updateTime),h)}(t)})).catch((function(t){n.reject&&n.reject(t)}))}function iu(t,e){t.sdkState.connState!==G.NET_STATE_DISCONNECTED&&t.handleMessage({type:ot,state:G.NET_STATE_DISCONNECTED}),!0!==e.isReconect&&e.reject&&(t=ro.resultErr("Failed to establish websocket connection",B,$.CONNECTERR),e.reject(t))}function su(t){return new Promise((function(e,n){var r={code:$.SUCCESS,isBroadcast:!0,msg:"Success"};t.handleMessage({type:ut,data:r}),e(ro.resultSuc(j,r))}))}function au(t,e,n,r,o){var i=ro.createSign();if(ro.createCallEvent(t,{type:M,callSign:i,callSuc:function(r){!function(t,e,n,r,o){if(t.curTab){var i=[];n.messages.forEach((function(t){t.type<64&&(t=ro.formatMsg(t,e.conversationID),i.unshift(t))})),0<i.length&&Ha.addMsgList(i),null!=o&&o.length&&i.push.apply(i,_toConsumableArray(o)),uu(e,r,i)}else uu(e,r,n.messages)}(t,e,r,n,o)},callErr:function(t){t=ro.serverErr(t,M),r(t)}}),t.curTab){var s=ro.reformatC2CId(e.conversationID),a=e.msgEnd;null!=o&&o.length&&(a=o[0].msgId),Br(vr({sign:i,toUid:s,msgEnd:a}),u)}else Hr(M,{tabId:t.tabId,callSign:i,options:e,state:J})}function uu(t,e,n){var r=n.slice(0-t.pageSize);e(ro.resultSuc(M,{conversationID:t.conversationID,messages:r,hasMore:n.length>=t.pageSize}))}function lu(t,e,n){var r=null,o=null;if(!ro.preJudge(t,n,R))return!1;if(ro.isNotObject(e,"type","number"))r=ro.parameterErr({name:R,key:"type"});else switch(e.type){case X.Text:ro.isNotString(e.text)&&(r=ro.parameterErr({name:R,key:"text"})),o=e.text;break;case X.Img:ro.isNotHttp(e.url)?r=ro.parameterErr({name:R,key:"url"}):ro.isNotEmpty(e.height)?r=ro.parameterErr({name:R,key:"height"}):ro.isNotEmpty(e.width)&&(r=ro.parameterErr({name:R,key:"width"})),o=e.url;break;default:o=e.content}return r?(n(r),!1):o}Ue={TYPES:{WS_STATE:G,SYNC_CHAT:H,SEND_STATE:Z,ERROR_CODE:$,MSG_TYPE:X,IM_LOGIN_STATE:V},EVENT:rt,create:function(){return new Promise((function(t,e){console.warn("开始初始化"),null!==cu&&t(cu),gu={timeOut:2e4,tabId:null===(r=gu)||void 0===r?void 0:r.tabId,curTab:!1,uid:null,chatPageSize:20,maxChatPageSize:100,msgPageSize:20,maxMsgPageSize:100,heartBeatTimer:null,sdkState:{},callEvents:{},chatCallEvents:{},stateCallEvents:{},chatKeys:{},chatList:[],msgHandleList:[],handleMsgState:!1,updateTime:null,clearTimer:function(){var t;gu.curTab=!1,null!==(t=gu)&&void 0!==t&&t.heartBeatTimer&&clearInterval(gu.heartBeatTimer)},onConn:function(){gu.handleMessage({type:ot,state:G.NET_STATE_CONNECTING})},reconnection:function(){var t;t=gu,window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),nu(t).then((function(e){e.wsUrl&&e.imToken?(e={wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId,isReconect:!0,connSuc:function(e){return ou(t,e)},connErr:function(e,n){return iu(t,e)}},Nr(t,e)):su()}))},handleMessage:function(t){eu(gu,cu,t)},globalTimer:fu,clearData:hu,initChats:pu};var n=ro.uuid(),r=window.localStorage.getItem("im_windowHeartBeat"),i=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");i.push(n),window.localStorage.setItem("im_wsTabs",JSON.stringify(i)),gu.tabId=n,(r||0)<(new Date).getTime()-3e3&&(qr(),jr(),Ha.deleteDB(),window.localStorage.setItem("im_wsCurId",n),fu()),window.addEventListener("unload",du),Ha.initDB((function(){cu=function(){var t={login:function(t){return function(t,e){return new Promise((function(n,r){var o,i,s,a;return ro.isNotWs(e.wsUrl)?r(ro.parameterErr({name:B,key:"wsUrl"})):ro.isNotString(e.imToken)?r(ro.parameterErr({name:B,key:"imToken"})):ro.isNotEmpty(e.subAppId)?r(ro.parameterErr({name:B,key:"subAppId"})):(i=e,s=n,a=r,void nu(o=t).then((function(t){t.loginState&&t.loginState!==V.NOT_LOGIN?(null==t?void 0:t.imToken)!==i.imToken?su(o).then((function(){ru(o,i,s,a)})):t.loginState===V.LOGGED&&(t.chatsSync===H.SYNC_CHAT_SUCCESS&&(delete t.chatsSync,o.initChats()),Object.assign(o.sdkState,t),t=ro.resultSuc(B,{msg:"Logged in",uid:t.uid}),s(t)):ru(o,i,s,a)})))}))}(gu,t)},logout:function(){return su(gu)},sendMessage:function(t){return function(t,e){return new Promise((function(n,r){var i,s=lu(t,e,r);!1!==s&&(i=ro.createSign(e.showMsgTime),ro.createCallEvent(t,{type:R,callSign:i,callSuc:function(r){!function(t,e,n,r){if(t.curTab){var o=JSON.parse(JSON.stringify(e));o.msgId=n.data.msgId,o.msgTime=n.data.msgTime,o.sendStatus=Z.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:gt,shift:!0,data:o})}r(n=ro.resultSuc(R,{conversationID:e.conversationID,msgId:n.data.msgId,sendStatus:Z.BFIM_MSG_STATUS_SEND_SUCC}))}(t,e,r,n)},callErr:function(t){t=ro.serverErr(t,R),r(t)}}),t.curTab?Br(Sr(_objectSpread(_objectSpread({},e),{},{sign:i,body:s})),o):Hr(R,{callSign:i,tabId:t.tabId,options:e,state:J}))}))}(gu,t)},resendMessage:function(t){return function(t,e){return new Promise((function(n,r){var i,s=lu(t,e,r);!1!==s&&(i=ro.createSign(e.showMsgTime),ro.createCallEvent(t,{type:z,callSign:i,callSuc:function(r){!function(t,e,n,r){if(t.curTab){var o=JSON.parse(JSON.stringify(e));o.msgId=n.data.msgId,o.msgTime=n.data.msgTime,o.sendStatus=Z.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:gt,shift:!0,data:o})}r(n=ro.resultSuc(z,{conversationID:e.conversationID,msgId:n.data.msgId,sendStatus:Z.BFIM_MSG_STATUS_SEND_SUCC}))}(t,e,r,n)},callErr:function(t){t=ro.serverErr(t,z),r(t)}}),t.curTab?Br(Sr(_objectSpread(_objectSpread({},e),{},{sign:i,body:s})),o):Hr(z,{callSign:i,tabId:t.tabId,options:e,state:J}))}))}(gu,t)},revokeMessage:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,K)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:K,key:"conversationID"});return r(o)}if(ro.isNotNumer(e.msgId,!0)){var i=ro.parameterErr({name:K,key:"msgId"});return r(i)}o=ro.createSign(),ro.createCallEvent(t,{type:K,callSign:o,callSuc:function(r){!function(t,e,n,r){t.curTab&&t.handleMessage({type:gt,shift:!0,data:n.data}),r(e=ro.resultSuc(K,{conversationID:e.conversationID,msgId:e.msgId,type:X.Revoked}))}(t,e,r,n)},callErr:function(t){t=ro.serverErr(t,K),r(t)}}),t.curTab?(i=ro.reformatC2CId(e.conversationID),Br(kr(o,i,e.msgId),l)):Hr(K,{callSign:o,tabId:t.tabId,options:e,state:J})}}))}(gu,t)},getMessageList:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,M)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:M,key:"conversationID"});return r(o)}if(e.pageSize&&e.pageSize>t.maxMsgPageSize){var i=ro.parameterErr({name:M,msg:"The maximum number of entries cannot exceed ".concat(t.maxMsgPageSize)});return r(i)}if(1===e.msgEnd)return i=ro.resultSuc(M,{conversationID:e.conversationID,messages:[],hasMore:!1}),n(i);var s=_objectSpread({tabId:t.tabId,pageSize:t.msgPageSize},e);s.tabId!==t.tabId?au(t,s,n,r):(Ha.addChatKey(s.conversationID),Ha.getMsgList(s).then((function(e){var o;e.length>=s.pageSize||1===(null===(o=e[0])||void 0===o?void 0:o.msgId)?uu(s,n,e):au(t,s,n,r,e)})))}}))}(gu,t)},setMessageRead:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,D)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:D,key:"conversationID"});return r(o)}var i=ro.createSign();ro.createCallEvent(t,{type:D,callSign:i,callSuc:function(t){t=ro.resultSuc(D,{conversationID:t.conversationID,msgId:e.msgId,msgTime:t.updateTime}),n(t)},callErr:function(t){t=ro.serverErr(t,D),r(t)}}),t.curTab?(o=ro.reformatC2CId(e.conversationID),Br(Lr(i,o),c)):Hr(D,{callSign:i,tabId:t.tabId,options:e,state:J})}}))}(gu,t)},getConversationList:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,A)){if(null!=e&&e.pageSize&&ro.isNotNumer(null==e?void 0:e.pageSize)){var o=ro.parameterErr({name:A,key:"pageSize"});return r(o)}if(t.sdkState.chatsSync===H.SYNC_CHAT_SUCCESS)Ja(t,e,n);else{var i=ro.createSign();t.chatCallEvents.hasOwnProperty(i)&&(i+=1),t.chatCallEvents[i]={callSuc:function(){delete t.chatCallEvents[i],Ja(t,e,n)},callErr:function(e){delete t.chatCallEvents[i],e=ro.resultErr((null==e?void 0:e.msg)||"Failed to get the conversation list",A,(null==e?void 0:e.code)||$.ERROR),r(e)}}}}}))}(gu,t)},getConversationProvider:function(t){return Ya(gu,t)},updateConversationProvider:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,P)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:P,key:"conversationID"});return r(o)}t.chatKeys.hasOwnProperty(e.conversationID)?(o=t.chatKeys[e.conversationID],Object.assign(o,e),o=ro.resultSuc(P,o),n(o)):Ha.getChat(e.conversationID).then((function(t){var o;t?(o=Object.assign(t,e),o=ro.resultSuc(P,o),n(o)):(o=ro.resultErr("Failed to update local session information",P,$.ERROR),r(o))}))}}))}(gu,t)},deleteConversation:function(t){return function(t,e){return new Promise((function(n,r){if(ro.preJudge(t,r,x)){if(ro.isNotObject(e,"conversationID","string")){var o=ro.parameterErr({name:x,key:"conversationID"});return r(o)}var i=ro.createSign();ro.createCallEvent(t,{type:x,callSign:i,callSuc:function(t){return t=ro.resultSuc(x,{conversationID:e.conversationID,updateTime:t.data.updateTime,deleted:t.data.deleted}),n(t)},callErr:function(t){t=ro.serverErr(t,x),r(t)}}),t.curTab?(o=ro.reformatC2CId(e.conversationID),Br(wr(i,parseInt(o)),g)):Hr(x,{callSign:i,tabId:t.tabId,options:e,state:J})}}))}(gu,t)},createTextMessage:function(t){return function(t,e){var n;return null!=e&&e.to?null!==(n=e.payload)&&void 0!==n&&n.text?(t=ro.msgBase(e.to,t.sdkState.uid),Object.assign(t,{type:X.Text,text:e.payload.text}),{code:$.SUCCESS,message:t}):{code:$.PARAMETER,msg:"Parameter 'text' cann't be empty"}:{code:$.PARAMETER,msg:"Parameter 'to' cann't be empty"}}(gu,t)},createImageMessage:function(t){return function(t,e){var n;return null!=e&&e.to?null!==(n=e.payload)&&void 0!==n&&n.url?(t=ro.msgBase(e.to,t.sdkState.uid),Object.assign(t,{type:X.Img,url:e.payload.url,width:e.payload.width,height:e.payload.height}),{code:$.SUCCESS,message:t}):{code:$.PARAMETER,msg:"Parameter 'url' cann't be empty"}:{code:$.PARAMETER,msg:"Parameter 'to' cann't be empty"}}(gu,t)},createBusinessMessage:function(t){return function(t,e){var n;return null!=e&&e.to?30<(null===(n=e.payload)||void 0===n?void 0:n.type)||(null===(n=e.payload)||void 0===n?void 0:n.type)<11?{code:$.PARAMETER,msg:"Type can only use 11-30"}:(t=ro.msgBase(e.to,t.sdkState.uid),Object.assign(t,e.payload),{code:$.SUCCESS,message:t}):{code:$.PARAMETER,msg:"Parameter 'to' cann't be empty"}}(gu,t)},getCosKey:function(){return function(t){return new Promise((function(e,n){var r=ro.createSign();ro.createCallEvent(t,{type:F,callSign:r,callSuc:function(t){return t=ro.resultSuc(F,t.data),e(t)},callErr:function(t){t=ro.serverErr(t,F),n(t)}}),t.curTab?Br(Tr(r),b):Hr(F,{callSign:r,tabId:t.tabId,state:J})}))}(gu)},getAllUnreadCount:function(){return function(t){return new Promise((function(e,n){if(t.sdkState.chatsSync===H.SYNC_CHAT_SUCCESS){var r=t.chatList.reduce((function(t,e){return t+e.unread}),0);r=ro.resultSuc(q,{unread:r||0}),e(r)}else{var o=ro.createSign();t.chatCallEvents.hasOwnProperty(o)&&(o+=1),t.chatCallEvents[o]={callSuc:function(){delete t.chatCallEvents[o];var n=t.chatList.reduce((function(t,e){return t+e.unread}),0);n=ro.resultSuc(q,{unread:n}),e(n)},callErr:function(){delete t.chatCallEvents[o];var e=ro.resultErr("Failed to get no reading",q,$.ERROR);n(e)}}}}))}(gu)},on:function(e,n){return function(t,e,n){t[e]=n}(t,e,n)},off:function(e){t[e]=null}};return t}(),window.addEventListener("storage",(function(t){Gr(t,cu,gu)})),t(cu)}))}))}};var cu=null,gu=null;function hu(t){t&&Ha.clear(),qr(),jr(),gu.sdkState={loginState:V.NOT_LOGIN,chatsSync:H.NOT_SYNC_CHAT,connState:G.NET_STATE_DISCONNECTED},gu.callEvents={},gu.chatCallEvents={},gu.stateCallEvents={},gu.chatList=[],gu.chatKeys={},gu.msgHandleList=[],gu.handleMsgState=!1,gu.updateTime=null}function du(){var t=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");t=t.filter((function(t){return t!=gu.tabId})),window.localStorage.setItem("im_wsTabs",JSON.stringify(t)),qr(0===t.length),jr(),0===t.length?Ha.deleteDB():gu.curTab&&(gu.clearTimer(),gu.sdkState.loginState===V.LOGGED?window.localStorage.setItem("im_wsConnTab",t[0]):window.localStorage.setItem("im_wsCurId",t[0]))}function fu(){gu.curTab=!0;var e=0;gu.heartBeatTimer&&clearInterval(gu.heartBeatTimer),gu.heartBeatTimer=setInterval((function(){var n,r,o,i,s=(new Date).getTime();for(o in window.localStorage.setItem("im_windowHeartBeat",s),e+=1,e%20==0&&1===(null===(r=Ir.ws)||void 0===r?void 0:r.readyState)&&(n=(new Date).getTime(),Ir.heartBeatTime+Ir.heartRate<=n&&(r=pr(_r(),t),Ir.ws.send(r),Ir.heartBeatTime=n)),gu.callEvents)if(gu.callEvents[o].timeOut<=s){var a=gu.callEvents[o];delete gu.callEvents[o],a.callErr({code:$.TIMEOUT,msg:a.type+": connection timed out"})}for(i in gu.stateCallEvents)if(gu.stateCallEvents[i].timeOut<=s){var u=gu.stateCallEvents[i];delete gu.stateCallEvents[i],u.callErr()}}),50)}function pu(){return new Promise((function(t,e){Ha.getChatList().then((function(e){for(var n in e.forEach((function(t){var e;gu.chatKeys.hasOwnProperty(t.conversationID)?(e=gu.chatKeys[t.conversationID],Object.assign(e,t)):(gu.chatKeys[t.conversationID]=t,gu.chatList.push(t))})),gu.chatCallEvents)gu.chatCallEvents[n].callSuc();t()}))}))}var mu=Ue}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()}))}).call(this,__webpack_require__("c8ba"),__webpack_require__("62e4")(module))},"56d7":function(t,e,n){"use strict";n.r(e);n("e7e5");var r=n("d399"),o=(n("66cf"),n("343b")),i=(n("b000"),n("1a23")),s=(n("38d5"),n("772a")),a=(n("a52c"),n("2ed4")),u=(n("537a"),n("ac28")),l=(n("4467"),n("c36e")),c=(n("0653"),n("34e9")),g=(n("c194"),n("7744")),h=(n("ab71"),n("58e6")),d=(n("2994"),n("2bdd")),f=(n("e930"),n("8f80")),p=(n("0ec5"),n("21ab")),m=(n("3df5"),n("2830")),b=(n("5246"),n("6b41")),y=(n("66b9"),n("b650")),w=(n("be7f"),n("565f")),_=(n("4056"),n("44bf")),v=(n("c3a6"),n("ad06")),S=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("159b"),n("b0c0"),n("7a23"));function k(t,e,n,r,o,i){var s=Object(S["D"])("router-view");return r.data.isInit?(Object(S["w"])(),Object(S["f"])(s,{key:0})):Object(S["g"])("",!0)}n("d3b7");var L=n("5502"),O=n("6c02"),T={name:"App",setup:function(){var t=Object(S["k"])().appContext.config.globalProperties,e=t.$IM,n=t.$msim,r=t.$toast,o=Object(L["b"])(),i=Object(O["d"])(),s=Object(O["c"])(),a=Object(S["A"])({isInit:!1});function u(){n.on(e.EVENT.CONNECT_CHANGE,c),n.on(e.EVENT.LOGIN,g),n.on(e.EVENT.LOGOUT,h),n.on(e.EVENT.KICKED_OUT,d),n.on(e.EVENT.TOKEN_NOT_FOUND,f),n.on(e.EVENT.SYNC_CHATS_CHANGE,p),n.on(e.EVENT.CONVERSATION_LIST_UPDATED,m);var t=window.localStorage.getItem("userId")||null;if(t){a.isInit=!1;var u=window.localStorage.getItem("wsUrL"),l=window.localStorage.getItem("imToken"),b=r.loading({message:"登陆中...",forbidClick:!0,duration:0,loadingType:"spinner"});n.login({wsUrl:u,imToken:l,subAppId:1}).then((function(e){b.close(),o.commit("setUserId",t)})).catch((function(t){null!==t&&void 0!==t&&t.msg&&r(t.msg)})).finally((function(){a.isInit=!0}))}else"login"!==s.name&&i.push({name:"login"}),a.isInit=!0}function l(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("wsUrL"),window.localStorage.removeItem("imToken"),o.commit("clear"),i.push({name:"login"})}function c(t){console.log("连接状态变更",t)}function g(t){console.log("登录成功",t);var e=window.localStorage.getItem("userId");e&&(o.commit("setUserId",e),"login"===s.name&&i.push({name:"home"}))}function h(t){console.log("退出成功",t),l()}function d(t){console.log("被踢",t),l()}function f(t){console.log("token失效",t),l()}function p(t){console.log("同步会话",t)}function m(t){console.log("会话列表更新",t.data),o.commit("updateChats",t.data),n.getAllUnreadCount().then((function(t){console.log(1414,t),o.commit("setUnread",t.data.unread)}))}return Object(S["t"])((function(){u()})),{data:a}}};n("d6fa");T.render=k;var I=T,E=(n("3ca3"),n("ddb0"),Object(O["b"])()),N=Object(O["a"])({history:E,routes:[{path:"/",name:"login",component:function(){return n.e("login").then(n.bind(null,"dd1d"))}},{path:"/register",name:"register",component:function(){return n.e("register").then(n.bind(null,"cbf3"))}},{path:"/home",name:"home",component:function(){return n.e("home").then(n.bind(null,"7f63"))},redirect:"/chats",children:[{path:"/chats",name:"chats",component:function(){return n.e("chats").then(n.bind(null,"3114"))}},{path:"/search",name:"search",component:function(){return n.e("search").then(n.bind(null,"159f"))}},{path:"/my",name:"my",component:function(){return n.e("my").then(n.bind(null,"31cc"))}}]},{path:"/messages/:conversationID/:uid",name:"messages",component:function(){return n.e("messages").then(n.bind(null,"a7f0"))}}]});N.beforeEach((function(t,e,n){var r=window.localStorage.getItem("userId")||null;r||"login"===t.name||"register"===t.name?t.name?n():n("/home"):n({name:"login"})}));var C=N,B=n("2909"),j=(n("4de4"),n("7db0"),n("4e82"),Object(L["a"])({state:function(){return{curUserId:null,chatList:[],msgList:[],curConversationID:null,allUnread:0}},mutations:{clear:function(t){t.curUserId=null,t.chatList=[],t.msgList=[],t.curConversationID=null,t.allUnread=0},setUnread:function(t,e){t.allUnread=e},setUserId:function(t,e){t.curUserId=e},clearChats:function(t){t.chatList=[]},addChats:function(t,e){var n;(n=t.chatList).push.apply(n,Object(B["a"])(e))},addChat:function(t,e){t.chatList.unshift(e)},changeChat:function(t,e){t.curConversationID=e,t.msgList=[]},updateChats:function(t,e){e.forEach((function(e){if(e.deleted)t.chatList=t.chatList.filter((function(n){return e.conversationID===t.curConversationID&&(t.curConversationID=null),n.conversationID!==e.conversationID}));else{var n=t.chatList.find((function(t){return t.conversationID===e.conversationID}));n?Object.assign(n,e):t.chatList.unshift(e)}})),t.chatList.sort((function(t,e){return e.showMsgTime-t.showMsgTime})),!t.curConversationID&&t.chatList.length&&(t.curConversationID=t.chatList[0].conversationID,t.msgList=[])},addMsgs:function(t,e){var n;(n=t.msgList).unshift.apply(n,Object(B["a"])(e))},addMsg:function(t,e){t.msgList.push(e)},updateMsgs:function(t,e){t.curConversationID&&e.forEach((function(e){if(e.conversationID===t.curConversationID){var n=t.msgList.find((function(t){return t.onlyId===e.onlyId}));n?Object.assign(n,e):t.msgList.push(e)}}))},revokeMsgs:function(t,e){t.curConversationID&&e.forEach((function(e){if(e.conversationID===t.curConversationID){var n=t.msgList.find((function(t){return t.msgId===e.msgId}));n&&Object.assign(n,e)}}))},updateMsg:function(t,e){var n=t.msgList.find((function(t){return t.conversationID===e.conversationID&&t.onlyId===e.onlyId}));n&&Object.assign(n,e)}}})),A=j,U=n("bc3a"),P=n.n(U),x=n("6199"),M=n.n(x),D=5e3,R="https://im.ekfree.com:18788/",z=P.a.create({timeout:D,baseURL:R});z.interceptors.request.use((function(t){var e="asfasdasd123",n=Math.ceil(1e10*Math.random()),r=1e3*(new Date).getTime(),o=M()(e+n+r);return t.headers["nonce"]=n,t.headers["timestamp"]=r,t.headers["sig"]=o,t}),(function(t){Promise.reject(t)})),z.interceptors.response.use((function(t){var e=t.data;if(e&&0===e.code)return t.data;var n="接口参数错误";return 2001===e.code?n="图形验证码错误":e&&e.msg&&(n=e.msg),Object(r["a"])(n),Promise.reject(e)}),(function(t){return Promise.reject(t)}));var K=z,F=n("4345"),q=n.n(F),G=(n("499a"),n("157a"),[v["b"],_["b"],w["a"],y["a"],b["a"],m["a"],p["a"],f["a"],d["a"],h["a"],g["b"],c["a"],l["a"],u["a"],a["a"],s["a"],i["a"]]),V=[o["a"],r["a"]],H=Object(S["e"])(I);H.config.globalProperties.$IM=q.a,H.config.globalProperties.$http=K,G.forEach((function(t){H.component(t.name,t)})),V.forEach((function(t){H.use(t)})),H.use(A),H.use(C),q.a.create().then((function(t){H.config.globalProperties.$msim=t,H.mount("#app")}))},d6fa:function(t,e,n){"use strict";n("1f6d")}});